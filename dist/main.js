(()=>{var Rf=Object.create;var Sr=Object.defineProperty;var kf=Object.getOwnPropertyDescriptor;var Ff=Object.getOwnPropertyNames,ua=Object.getOwnPropertySymbols,$f=Object.getPrototypeOf,da=Object.prototype.hasOwnProperty,jf=Object.prototype.propertyIsEnumerable;var So=(t,e,n)=>e in t?Sr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dn=(t,e)=>{for(var n in e||={})da.call(e,n)&&So(t,n,e[n]);if(ua)for(var n of ua(e))jf.call(e,n)&&So(t,n,e[n]);return t};var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Vf=(t,e)=>{for(var n in e)Sr(t,n,{get:e[n],enumerable:!0})},Uf=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Ff(e))!da.call(t,r)&&r!==n&&Sr(t,r,{get:()=>e[r],enumerable:!(i=kf(e,r))||i.enumerable});return t};var Oo=(t,e,n)=>(n=t!=null?Rf($f(t)):{},Uf(e||!t||!t.__esModule?Sr(n,"default",{value:t,enumerable:!0}):n,t));var ii=(t,e,n)=>(So(t,typeof e!="symbol"?e+"":e,n),n);var he=(t,e,n)=>new Promise((i,r)=>{var o=l=>{try{a(n.next(l))}catch(f){r(f)}},s=l=>{try{a(n.throw(l))}catch(f){r(f)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(t,e)).next())});var Dl=b((ds,ps)=>{var us,Yr;us=ds,Yr=function(){"use strict";function t(u,d){var h=Object.keys(u);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(u);d&&(y=y.filter(function(O){return Object.getOwnPropertyDescriptor(u,O).enumerable})),h.push.apply(h,y)}return h}function e(u){for(var d=1;d<arguments.length;d++){var h=arguments[d]!=null?arguments[d]:{};d%2?t(Object(h),!0).forEach(function(y){i(u,y,h[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(h)):t(Object(h)).forEach(function(y){Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(h,y))})}return u}function n(u){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},n(u)}function i(u,d,h){return d in u?Object.defineProperty(u,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):u[d]=h,u}function r(u){return function(d){if(Array.isArray(d))return s(d)}(u)||function(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}(u)||o(u)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(u,d){if(u){if(typeof u=="string")return s(u,d);var h=Object.prototype.toString.call(u).slice(8,-1);return h==="Object"&&u.constructor&&(h=u.constructor.name),h==="Map"||h==="Set"?Array.from(u):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?s(u,d):void 0}}function s(u,d){(d==null||d>u.length)&&(d=u.length);for(var h=0,y=new Array(d);h<d;h++)y[h]=u[h];return y}var a=function(u){return typeof u=="string"?document.querySelector(u):u()},l=function(u,d){var h=typeof u=="string"?document.createElement(u):u;for(var y in d){var O=d[y];if(y==="inside")O.append(h);else if(y==="dest")a(O[0]).insertAdjacentElement(O[1],h);else if(y==="around"){var S=O;S.parentNode.insertBefore(h,S),h.append(S),S.getAttribute("autofocus")!=null&&S.focus()}else y in h?h[y]=O:h.setAttribute(y,O)}return h},f=function(u,d){return u=String(u).toLowerCase(),d?u.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):u},c=function(u,d){return l("mark",e({innerHTML:u},typeof d=="string"&&{class:d})).outerHTML},m=function(u,d){d.input.dispatchEvent(new CustomEvent(u,{bubbles:!0,detail:d.feedback,cancelable:!0}))},E=function(u,d,h){var y=h||{},O=y.mode,S=y.diacritics,q=y.highlight,se=f(d,S);if(d=String(d),u=f(u,S),O==="loose"){var re=(u=u.replace(/ /g,"")).length,N=0,Z=Array.from(d).map(function(pe,ce){return N<re&&se[ce]===u[N]&&(pe=q?c(pe,q):pe,N++),pe}).join("");if(N===re)return Z}else{var B=se.indexOf(u);if(~B)return u=d.substring(B,B+u.length),B=q?d.replace(u,c(u,q)):d}},w=function(u,d){return new Promise(function(h,y){var O;return(O=u.data).cache&&O.store?h():new Promise(function(S,q){return typeof O.src=="function"?O.src(d).then(S,q):S(O.src)}).then(function(S){try{return u.feedback=O.store=S,m("response",u),h()}catch(q){return y(q)}},y)})},H=function(u,d){var h=d.data,y=d.searchEngine,O=[];h.store.forEach(function(q,se){var re=function(B){var pe=B?q[B]:q,ce=typeof y=="function"?y(u,pe):E(u,pe,{mode:y,diacritics:d.diacritics,highlight:d.resultItem.highlight});if(ce){var De={match:ce,value:q};B&&(De.key=B),O.push(De)}};if(h.keys){var N,Z=function(B,pe){var ce=typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(!ce){if(Array.isArray(B)||(ce=o(B))||pe&&B&&typeof B.length=="number"){ce&&(B=ce);var De=0,Re=function(){};return{s:Re,n:function(){return De>=B.length?{done:!0}:{done:!1,value:B[De++]}},e:function(rt){throw rt},f:Re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Wt,At=!0,cn=!1;return{s:function(){ce=ce.call(B)},n:function(){var rt=ce.next();return At=rt.done,rt},e:function(rt){cn=!0,Wt=rt},f:function(){try{At||ce.return==null||ce.return()}finally{if(cn)throw Wt}}}}(h.keys);try{for(Z.s();!(N=Z.n()).done;)re(N.value)}catch(B){Z.e(B)}finally{Z.f()}}else re()}),h.filter&&(O=h.filter(O));var S=O.slice(0,d.resultsList.maxResults);d.feedback={query:u,matches:O,results:S},m("results",d)},P="aria-expanded",V="aria-activedescendant",F="aria-selected",te=function(u,d){u.feedback.selection=e({index:d},u.feedback.results[d])},oe=function(u){u.isOpen||((u.wrapper||u.input).setAttribute(P,!0),u.list.removeAttribute("hidden"),u.isOpen=!0,m("open",u))},$=function(u){u.isOpen&&((u.wrapper||u.input).setAttribute(P,!1),u.input.setAttribute(V,""),u.list.setAttribute("hidden",""),u.isOpen=!1,m("close",u))},z=function(u,d){var h=d.resultItem,y=d.list.getElementsByTagName(h.tag),O=!!h.selected&&h.selected.split(" ");if(d.isOpen&&y.length){var S,q,se=d.cursor;u>=y.length&&(u=0),u<0&&(u=y.length-1),d.cursor=u,se>-1&&(y[se].removeAttribute(F),O&&(q=y[se].classList).remove.apply(q,r(O))),y[u].setAttribute(F,!0),O&&(S=y[u].classList).add.apply(S,r(O)),d.input.setAttribute(V,y[d.cursor].id),d.list.scrollTop=y[u].offsetTop-d.list.clientHeight+y[u].clientHeight+5,d.feedback.cursor=d.cursor,te(d,u),m("navigate",d)}},j=function(u){z(u.cursor+1,u)},ne=function(u){z(u.cursor-1,u)},Q=function(u,d,h){(h=h>=0?h:u.cursor)<0||(u.feedback.event=d,te(u,h),m("selection",u),$(u))};function be(u,d){var h=this;return new Promise(function(y,O){var S,q;return S=d||((q=u.input)instanceof HTMLInputElement||q instanceof HTMLTextAreaElement?q.value:q.innerHTML),function(re,N,Z){return N?N(re):re.length>=Z}(S=u.query?u.query(S):S,u.trigger,u.threshold)?w(u,S).then(function(re){try{return u.feedback instanceof Error?y():(H(S,u),u.resultsList&&function(N){var Z=N.resultsList,B=N.list,pe=N.resultItem,ce=N.feedback,De=ce.matches,Re=ce.results;if(N.cursor=-1,B.innerHTML="",De.length||Z.noResults){var Wt=new DocumentFragment;Re.forEach(function(At,cn){var rt=l(pe.tag,e({id:"".concat(pe.id,"_").concat(cn),role:"option",innerHTML:At.match,inside:Wt},pe.class&&{class:pe.class}));pe.element&&pe.element(rt,At)}),B.append(Wt),Z.element&&Z.element(B,ce),oe(N)}else $(N)}(u),se.call(h))}catch(N){return O(N)}},O):($(u),se.call(h));function se(){return y()}})}var ie=function(u,d){for(var h in u)for(var y in u[h])d(h,y)},I=function(u){var d,h,y,O=u.events,S=(d=function(){return be(u)},h=u.debounce,function(){clearTimeout(y),y=setTimeout(function(){return d()},h)}),q=u.events=e({input:e({},O&&O.input)},u.resultsList&&{list:O?e({},O.list):{}}),se={input:{input:function(){S()},keydown:function(re){(function(N,Z){switch(N.keyCode){case 40:case 38:N.preventDefault(),N.keyCode===40?j(Z):ne(Z);break;case 13:Z.submit||N.preventDefault(),Z.cursor>=0&&Q(Z,N);break;case 9:Z.resultsList.tabSelect&&Z.cursor>=0&&Q(Z,N);break;case 27:Z.input.value="",$(Z)}})(re,u)},blur:function(){$(u)}},list:{mousedown:function(re){re.preventDefault()},click:function(re){(function(N,Z){var B=Z.resultItem.tag.toUpperCase(),pe=Array.from(Z.list.querySelectorAll(B)),ce=N.target.closest(B);ce&&ce.nodeName===B&&Q(Z,N,pe.indexOf(ce))})(re,u)}}};ie(se,function(re,N){(u.resultsList||N==="input")&&(q[re][N]||(q[re][N]=se[re][N]))}),ie(q,function(re,N){u[re].addEventListener(N,q[re][N])})};function Le(u){var d=this;return new Promise(function(h,y){var O,S,q;if(O=u.placeHolder,q={role:"combobox","aria-owns":(S=u.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},l(u.input,e(e({"aria-controls":S.id,"aria-autocomplete":"both"},O&&{placeholder:O}),!u.wrapper&&e({},q))),u.wrapper&&(u.wrapper=l("div",e({around:u.input,class:u.name+"_wrapper"},q))),S&&(u.list=l(S.tag,e({dest:[S.destination,S.position],id:S.id,role:"listbox",hidden:"hidden"},S.class&&{class:S.class}))),I(u),u.data.cache)return w(u).then(function(re){try{return se.call(d)}catch(N){return y(N)}},y);function se(){return m("init",u),h()}return se.call(d)})}function Me(u){var d=u.prototype;d.init=function(){Le(this)},d.start=function(h){be(this,h)},d.unInit=function(){if(this.wrapper){var h=this.wrapper.parentNode;h.insertBefore(this.input,this.wrapper),h.removeChild(this.wrapper)}var y;ie((y=this).events,function(O,S){y[O].removeEventListener(S,y.events[O][S])})},d.open=function(){oe(this)},d.close=function(){$(this)},d.goTo=function(h){z(h,this)},d.next=function(){j(this)},d.previous=function(){ne(this)},d.select=function(h){Q(this,null,h)},d.search=function(h,y,O){return E(h,y,O)}}return function u(d){this.options=d,this.id=u.instances=(u.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(h){var y=h.name,O=h.options,S=h.resultsList,q=h.resultItem;for(var se in O)if(n(O[se])==="object")for(var re in h[se]||(h[se]={}),O[se])h[se][re]=O[se][re];else h[se]=O[se];h.selector=h.selector||"#"+y,S.destination=S.destination||h.selector,S.id=S.id||y+"_list_"+h.id,q.id=q.id||y+"_result",h.input=a(h.selector)}(this),Me.call(this,u),Le(this)}},typeof ds=="object"&&typeof ps<"u"?ps.exports=Yr():typeof define=="function"&&define.amd?define(Yr):(us=typeof globalThis<"u"?globalThis:us||self).autoComplete=Yr()});var Jl=b((gs,eo)=>{(function(t){"use strict";var e=t.setTimeout,n=t.clearTimeout,i=t.XMLHttpRequest,r=t.XDomainRequest,o=t.ActiveXObject,s=t.EventSource,a=t.document,l=t.Promise,f=t.fetch,c=t.Response,m=t.TextDecoder,E=t.TextEncoder,w=t.AbortController;if(typeof window<"u"&&typeof a<"u"&&!("readyState"in a)&&a.body==null&&(a.readyState="loading",window.addEventListener("load",function(p){a.readyState="complete"},!1)),i==null&&o!=null&&(i=function(){return new o("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(p){function C(){}return C.prototype=p,new C}),Date.now||(Date.now=function(){return new Date().getTime()}),w==null){var H=f;f=function(p,C){var A=C.signal;return H(p,{headers:C.headers,credentials:C.credentials,cache:C.cache}).then(function(T){var R=T.body.getReader();return A._reader=R,A._aborted&&A._reader.cancel(),{status:T.status,statusText:T.statusText,headers:T.headers,body:{getReader:function(){return R}}}})},w=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function P(){this.bitsNeeded=0,this.codePoint=0}P.prototype.decode=function(p){function C(ae,ue,M){if(M===1)return ae>=128>>ue&&ae<<ue<=2047;if(M===2)return ae>=2048>>ue&&ae<<ue<=55295||ae>=57344>>ue&&ae<<ue<=65535;if(M===3)return ae>=65536>>ue&&ae<<ue<=1114111;throw new Error}function A(ae,ue){if(ae===6*1)return ue>>6>15?3:ue>31?2:1;if(ae===6*2)return ue>15?3:2;if(ae===6*3)return 3;throw new Error}for(var T=65533,R="",L=this.bitsNeeded,k=this.codePoint,fe=0;fe<p.length;fe+=1){var K=p[fe];L!==0&&(K<128||K>191||!C(k<<6|K&63,L-6,A(L,k)))&&(L=0,k=T,R+=String.fromCharCode(k)),L===0?(K>=0&&K<=127?(L=0,k=K):K>=192&&K<=223?(L=6*1,k=K&31):K>=224&&K<=239?(L=6*2,k=K&15):K>=240&&K<=247?(L=6*3,k=K&7):(L=0,k=T),L!==0&&!C(k,L,A(L,k))&&(L=0,k=T)):(L-=6,k=k<<6|K&63),L===0&&(k<=65535?R+=String.fromCharCode(k):(R+=String.fromCharCode(55296+(k-65535-1>>10)),R+=String.fromCharCode(56320+(k-65535-1&1023))))}return this.bitsNeeded=L,this.codePoint=k,R};var V=function(){try{return new m().decode(new E().encode("test"),{stream:!0})==="test"}catch(p){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+p)}return!1};(m==null||E==null||!V())&&(m=P);var F=function(){};function te(p){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=F,this.onload=F,this.onerror=F,this.onreadystatechange=F,this._contentType="",this._xhr=p,this._sendTimeout=0,this._abort=F}te.prototype.open=function(p,C){this._abort(!0);var A=this,T=this._xhr,R=1,L=0;this._abort=function(M){A._sendTimeout!==0&&(n(A._sendTimeout),A._sendTimeout=0),(R===1||R===2||R===3)&&(R=4,T.onload=F,T.onerror=F,T.onabort=F,T.onprogress=F,T.onreadystatechange=F,T.abort(),L!==0&&(n(L),L=0),M||(A.readyState=4,A.onabort(null),A.onreadystatechange())),R=0};var k=function(){if(R===1){var M=0,ve="",gt=void 0;if("contentType"in T)M=200,ve="OK",gt=T.contentType;else try{M=T.status,ve=T.statusText,gt=T.getResponseHeader("Content-Type")}catch{M=0,ve="",gt=void 0}M!==0&&(R=2,A.readyState=2,A.status=M,A.statusText=ve,A._contentType=gt,A.onreadystatechange())}},fe=function(){if(k(),R===2||R===3){R=3;var M="";try{M=T.responseText}catch{}A.readyState=3,A.responseText=M,A.onprogress()}},K=function(M,ve){if((ve==null||ve.preventDefault==null)&&(ve={preventDefault:F}),fe(),R===1||R===2||R===3){if(R=4,L!==0&&(n(L),L=0),A.readyState=4,M==="load")A.onload(ve);else if(M==="error")A.onerror(ve);else if(M==="abort")A.onabort(ve);else throw new TypeError;A.onreadystatechange()}},ae=function(M){T!=null&&(T.readyState===4?(!("onload"in T)||!("onerror"in T)||!("onabort"in T))&&K(T.responseText===""?"error":"load",M):T.readyState===3?"onprogress"in T||fe():T.readyState===2&&k())},ue=function(){L=e(function(){ue()},500),T.readyState===3&&fe()};"onload"in T&&(T.onload=function(M){K("load",M)}),"onerror"in T&&(T.onerror=function(M){K("error",M)}),"onabort"in T&&(T.onabort=function(M){K("abort",M)}),"onprogress"in T&&(T.onprogress=fe),"onreadystatechange"in T&&(T.onreadystatechange=function(M){ae(M)}),("contentType"in T||!("ontimeout"in i.prototype))&&(C+=(C.indexOf("?")===-1?"?":"&")+"padding=true"),T.open(p,C,!0),"readyState"in T&&(L=e(function(){ue()},0))},te.prototype.abort=function(){this._abort(!1)},te.prototype.getResponseHeader=function(p){return this._contentType},te.prototype.setRequestHeader=function(p,C){var A=this._xhr;"setRequestHeader"in A&&A.setRequestHeader(p,C)},te.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},te.prototype.send=function(){if((!("ontimeout"in i.prototype)||!("sendAsBinary"in i.prototype)&&!("mozAnon"in i.prototype))&&a!=null&&a.readyState!=null&&a.readyState!=="complete"){var p=this;p._sendTimeout=e(function(){p._sendTimeout=0,p.send()},4);return}var C=this._xhr;"withCredentials"in C&&(C.withCredentials=this.withCredentials);try{C.send(void 0)}catch(A){throw A}};function oe(p){return p.replace(/[A-Z]/g,function(C){return String.fromCharCode(C.charCodeAt(0)+32)})}function $(p){for(var C=Object.create(null),A=p.split(`\r
`),T=0;T<A.length;T+=1){var R=A[T],L=R.split(": "),k=L.shift(),fe=L.join(": ");C[oe(k)]=fe}this._map=C}$.prototype.get=function(p){return this._map[oe(p)]},i!=null&&i.HEADERS_RECEIVED==null&&(i.HEADERS_RECEIVED=2);function z(){}z.prototype.open=function(p,C,A,T,R,L,k){p.open("GET",R);var fe=0;p.onprogress=function(){var ae=p.responseText,ue=ae.slice(fe);fe+=ue.length,A(ue)},p.onerror=function(ae){ae.preventDefault(),T(new Error("NetworkError"))},p.onload=function(){T(null)},p.onabort=function(){T(null)},p.onreadystatechange=function(){if(p.readyState===i.HEADERS_RECEIVED){var ae=p.status,ue=p.statusText,M=p.getResponseHeader("Content-Type"),ve=p.getAllResponseHeaders();C(ae,ue,M,new $(ve))}},p.withCredentials=L;for(var K in k)Object.prototype.hasOwnProperty.call(k,K)&&p.setRequestHeader(K,k[K]);return p.send(),p};function j(p){this._headers=p}j.prototype.get=function(p){return this._headers.get(p)};function ne(){}ne.prototype.open=function(p,C,A,T,R,L,k){var fe=null,K=new w,ae=K.signal,ue=new m;return f(R,{headers:k,credentials:L?"include":"same-origin",signal:ae,cache:"no-store"}).then(function(M){return fe=M.body.getReader(),C(M.status,M.statusText,M.headers.get("Content-Type"),new j(M.headers)),new l(function(ve,gt){var un=function(){fe.read().then(function(ct){if(ct.done)ve(void 0);else{var Ke=ue.decode(ct.value,{stream:!0});A(Ke),un()}}).catch(function(ct){gt(ct)})};un()})}).catch(function(M){if(M.name!=="AbortError")return M}).then(function(M){T(M)}),{abort:function(){fe?.cancel(),K.abort()}}};function Q(){this._listeners=Object.create(null)}function be(p){e(function(){throw p},0)}Q.prototype.dispatchEvent=function(p){p.target=this;var C=this._listeners[p.type];if(C!=null)for(var A=C.length,T=0;T<A;T+=1){var R=C[T];try{typeof R.handleEvent=="function"?R.handleEvent(p):R.call(this,p)}catch(L){be(L)}}},Q.prototype.addEventListener=function(p,C){p=String(p);var A=this._listeners,T=A[p];T==null&&(T=[],A[p]=T);for(var R=!1,L=0;L<T.length;L+=1)T[L]===C&&(R=!0);R||T.push(C)},Q.prototype.removeEventListener=function(p,C){p=String(p);var A=this._listeners,T=A[p];if(T!=null){for(var R=[],L=0;L<T.length;L+=1)T[L]!==C&&R.push(T[L]);R.length===0?delete A[p]:A[p]=R}};function ie(p){this.type=p,this.target=void 0}function I(p,C){ie.call(this,p),this.data=C.data,this.lastEventId=C.lastEventId}I.prototype=Object.create(ie.prototype);function Le(p,C){ie.call(this,p),this.status=C.status,this.statusText=C.statusText,this.headers=C.headers}Le.prototype=Object.create(ie.prototype);function Me(p,C){ie.call(this,p),this.error=C.error}Me.prototype=Object.create(ie.prototype);var u=-1,d=0,h=1,y=2,O=-1,S=0,q=1,se=2,re=3,N=/^text\/event\-stream(;.*)?$/i,Z=1e3,B=18e6,pe=function(p,C){var A=p==null?C:parseInt(p,10);return A!==A&&(A=C),ce(A)},ce=function(p){return Math.min(Math.max(p,Z),B)},De=function(p,C,A){try{typeof C=="function"&&C.call(p,A)}catch(T){be(T)}};function Re(p,C){Q.call(this),C=C||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,cn(this,p,C)}function Wt(){return i!=null&&"withCredentials"in i.prototype||r==null?new i:new r}var At=f!=null&&c!=null&&"body"in c.prototype;function cn(p,C,A){C=String(C);var T=!!A.withCredentials,R=A.lastEventIdQueryParameterName||"lastEventId",L=ce(1e3),k=pe(A.heartbeatTimeout,45e3),fe="",K=L,ae=!1,ue=0,M=A.headers||{},ve=A.Transport,gt=At&&ve==null?void 0:new te(ve!=null?new ve:Wt()),un=ve!=null&&typeof ve!="string"?new ve:gt==null?new ne:new z,ct=void 0,Ke=0,St=u,ti="",Cr="",zt="",Ar="",Ye=S,Co=0,Dn=0,Nf=function(Ve,$e,ut,dt){if(St===d)if(Ve===200&&ut!=null&&N.test(ut)){St=h,ae=Date.now(),K=L,p.readyState=h;var Xe=new Le("open",{status:Ve,statusText:$e,headers:dt});p.dispatchEvent(Xe),De(p,p.onopen,Xe)}else{var qe="";Ve!==200?($e&&($e=$e.replace(/\s+/g," ")),qe="EventSource's response has a status "+Ve+" "+$e+" that is not 200. Aborting the connection."):qe="EventSource's response has a Content-Type specifying an unsupported type: "+(ut==null?"-":ut.replace(/\s+/g," "))+". Aborting the connection.",Ao();var Xe=new Le("error",{status:Ve,statusText:$e,headers:dt});p.dispatchEvent(Xe),De(p,p.onerror,Xe),console.error(qe)}},Mf=function(Ve){if(St===h){for(var $e=-1,ut=0;ut<Ve.length;ut+=1){var dt=Ve.charCodeAt(ut);(dt===`
`.charCodeAt(0)||dt==="\r".charCodeAt(0))&&($e=ut)}var Xe=($e!==-1?Ar:"")+Ve.slice(0,$e+1);Ar=($e===-1?Ar:"")+Ve.slice($e+1),Ve!==""&&(ae=Date.now(),ue+=Ve.length);for(var qe=0;qe<Xe.length;qe+=1){var dt=Xe.charCodeAt(qe);if(Ye===O&&dt===`
`.charCodeAt(0))Ye=S;else if(Ye===O&&(Ye=S),dt==="\r".charCodeAt(0)||dt===`
`.charCodeAt(0)){if(Ye!==S){Ye===q&&(Dn=qe+1);var Gt=Xe.slice(Co,Dn-1),Jt=Xe.slice(Dn+(Dn<qe&&Xe.charCodeAt(Dn)===" ".charCodeAt(0)?1:0),qe);Gt==="data"?(ti+=`
`,ti+=Jt):Gt==="id"?Cr=Jt:Gt==="event"?zt=Jt:Gt==="retry"?(L=pe(Jt,L),K=L):Gt==="heartbeatTimeout"&&(k=pe(Jt,k),Ke!==0&&(n(Ke),Ke=e(function(){Mi()},k)))}if(Ye===S){if(ti!==""){fe=Cr,zt===""&&(zt="message");var ni=new I(zt,{data:ti.slice(1),lastEventId:Cr});if(p.dispatchEvent(ni),zt==="open"?De(p,p.onopen,ni):zt==="message"?De(p,p.onmessage,ni):zt==="error"&&De(p,p.onerror,ni),St===y)return}ti="",zt=""}Ye=dt==="\r".charCodeAt(0)?O:S}else Ye===S&&(Co=qe,Ye=q),Ye===q?dt===":".charCodeAt(0)&&(Dn=qe+1,Ye=se):Ye===se&&(Ye=re)}}},ca=function(Ve){if(St===h||St===d){St=u,Ke!==0&&(n(Ke),Ke=0),Ke=e(function(){Mi()},K),K=ce(Math.min(L*16,K*2)),p.readyState=d;var $e=new Me("error",{error:Ve});p.dispatchEvent($e),De(p,p.onerror,$e),Ve!=null&&console.error(Ve)}},Ao=function(){St=y,ct!=null&&(ct.abort(),ct=void 0),Ke!==0&&(n(Ke),Ke=0),p.readyState=y},Mi=function(){if(Ke=0,St!==u){if(!ae&&ct!=null)ca(new Error("No activity within "+k+" milliseconds. "+(St===d?"No response received.":ue+" chars received.")+" Reconnecting.")),ct!=null&&(ct.abort(),ct=void 0);else{var Ve=Math.max((ae||Date.now())+k-Date.now(),1);ae=!1,Ke=e(function(){Mi()},Ve)}return}ae=!1,ue=0,Ke=e(function(){Mi()},k),St=d,ti="",zt="",Cr=fe,Ar="",Co=0,Dn=0,Ye=S;var $e=C;if(C.slice(0,5)!=="data:"&&C.slice(0,5)!=="blob:"&&fe!==""){var ut=C.indexOf("?");$e=ut===-1?C:C.slice(0,ut+1)+C.slice(ut+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(Jt,ni){return ni===R?"":Jt}),$e+=(C.indexOf("?")===-1?"?":"&")+R+"="+encodeURIComponent(fe)}var dt=p.withCredentials,Xe={};Xe.Accept="text/event-stream";var qe=p.headers;if(qe!=null)for(var Gt in qe)Object.prototype.hasOwnProperty.call(qe,Gt)&&(Xe[Gt]=qe[Gt]);try{ct=un.open(gt,Nf,Mf,ca,$e,dt,Xe)}catch(Jt){throw Ao(),Jt}};p.url=C,p.readyState=d,p.withCredentials=T,p.headers=M,p._close=Ao,Mi()}Re.prototype=Object.create(Q.prototype),Re.prototype.CONNECTING=d,Re.prototype.OPEN=h,Re.prototype.CLOSED=y,Re.prototype.close=function(){this._close()},Re.CONNECTING=d,Re.OPEN=h,Re.CLOSED=y,Re.prototype.withCredentials=void 0;var rt=s;i!=null&&(s==null||!("withCredentials"in s.prototype))&&(rt=Re),function(p){if(typeof eo=="object"&&typeof eo.exports=="object"){var C=p(gs);C!==void 0&&(eo.exports=C)}else typeof define=="function"&&define.amd?define(["exports"],p):p(t)}(function(p){p.EventSourcePolyfill=Re,p.NativeEventSource=s,p.EventSource=rt})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:gs:globalThis)});var lc=b((GL,ac)=>{function ty(){this.__data__=[],this.size=0}ac.exports=ty});var or=b((JL,cc)=>{function ny(t,e){return t===e||t!==t&&e!==e}cc.exports=ny});var sr=b((KL,uc)=>{var iy=or();function ry(t,e){for(var n=t.length;n--;)if(iy(t[n][0],e))return n;return-1}uc.exports=ry});var pc=b((YL,dc)=>{var oy=sr(),sy=Array.prototype,ay=sy.splice;function ly(t){var e=this.__data__,n=oy(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():ay.call(e,n,1),--this.size,!0}dc.exports=ly});var hc=b((XL,fc)=>{var cy=sr();function uy(t){var e=this.__data__,n=cy(e,t);return n<0?void 0:e[n][1]}fc.exports=uy});var gc=b((QL,mc)=>{var dy=sr();function py(t){return dy(this.__data__,t)>-1}mc.exports=py});var vc=b((ZL,bc)=>{var fy=sr();function hy(t,e){var n=this.__data__,i=fy(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}bc.exports=hy});var ar=b((eD,yc)=>{var my=lc(),gy=pc(),by=hc(),vy=gc(),yy=vc();function Ci(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Ci.prototype.clear=my;Ci.prototype.delete=gy;Ci.prototype.get=by;Ci.prototype.has=vy;Ci.prototype.set=yy;yc.exports=Ci});var _c=b((tD,Ec)=>{var Ey=ar();function _y(){this.__data__=new Ey,this.size=0}Ec.exports=_y});var wc=b((nD,Tc)=>{function Ty(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}Tc.exports=Ty});var Ac=b((iD,Cc)=>{function wy(t){return this.__data__.get(t)}Cc.exports=wy});var Oc=b((rD,Sc)=>{function Cy(t){return this.__data__.has(t)}Sc.exports=Cy});var Ss=b((oD,Pc)=>{var Ay=typeof global=="object"&&global&&global.Object===Object&&global;Pc.exports=Ay});var Xn=b((sD,xc)=>{var Sy=Ss(),Oy=typeof self=="object"&&self&&self.Object===Object&&self,Py=Sy||Oy||Function("return this")();xc.exports=Py});var Os=b((aD,Lc)=>{var xy=Xn(),Ly=xy.Symbol;Lc.exports=Ly});var Mc=b((lD,Nc)=>{var Dc=Os(),Ic=Object.prototype,Dy=Ic.hasOwnProperty,Iy=Ic.toString,lr=Dc?Dc.toStringTag:void 0;function Ny(t){var e=Dy.call(t,lr),n=t[lr];try{t[lr]=void 0;var i=!0}catch{}var r=Iy.call(t);return i&&(e?t[lr]=n:delete t[lr]),r}Nc.exports=Ny});var kc=b((cD,Rc)=>{var My=Object.prototype,Ry=My.toString;function ky(t){return Ry.call(t)}Rc.exports=ky});var cr=b((uD,jc)=>{var Fc=Os(),Fy=Mc(),$y=kc(),jy="[object Null]",Vy="[object Undefined]",$c=Fc?Fc.toStringTag:void 0;function Uy(t){return t==null?t===void 0?Vy:jy:$c&&$c in Object(t)?Fy(t):$y(t)}jc.exports=Uy});var An=b((dD,Vc)=>{function Hy(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}Vc.exports=Hy});var to=b((pD,Uc)=>{var qy=cr(),By=An(),Wy="[object AsyncFunction]",zy="[object Function]",Gy="[object GeneratorFunction]",Jy="[object Proxy]";function Ky(t){if(!By(t))return!1;var e=qy(t);return e==zy||e==Gy||e==Wy||e==Jy}Uc.exports=Ky});var qc=b((fD,Hc)=>{var Yy=Xn(),Xy=Yy["__core-js_shared__"];Hc.exports=Xy});var zc=b((hD,Wc)=>{var Ps=qc(),Bc=function(){var t=/[^.]+$/.exec(Ps&&Ps.keys&&Ps.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Qy(t){return!!Bc&&Bc in t}Wc.exports=Qy});var Jc=b((mD,Gc)=>{var Zy=Function.prototype,eE=Zy.toString;function tE(t){if(t!=null){try{return eE.call(t)}catch{}try{return t+""}catch{}}return""}Gc.exports=tE});var Yc=b((gD,Kc)=>{var nE=to(),iE=zc(),rE=An(),oE=Jc(),sE=/[\\^$.*+?()[\]{}|]/g,aE=/^\[object .+?Constructor\]$/,lE=Function.prototype,cE=Object.prototype,uE=lE.toString,dE=cE.hasOwnProperty,pE=RegExp("^"+uE.call(dE).replace(sE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fE(t){if(!rE(t)||iE(t))return!1;var e=nE(t)?pE:aE;return e.test(oE(t))}Kc.exports=fE});var Qc=b((bD,Xc)=>{function hE(t,e){return t?.[e]}Xc.exports=hE});var no=b((vD,Zc)=>{var mE=Yc(),gE=Qc();function bE(t,e){var n=gE(t,e);return mE(n)?n:void 0}Zc.exports=bE});var xs=b((yD,eu)=>{var vE=no(),yE=Xn(),EE=vE(yE,"Map");eu.exports=EE});var ur=b((ED,tu)=>{var _E=no(),TE=_E(Object,"create");tu.exports=TE});var ru=b((_D,iu)=>{var nu=ur();function wE(){this.__data__=nu?nu(null):{},this.size=0}iu.exports=wE});var su=b((TD,ou)=>{function CE(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}ou.exports=CE});var lu=b((wD,au)=>{var AE=ur(),SE="__lodash_hash_undefined__",OE=Object.prototype,PE=OE.hasOwnProperty;function xE(t){var e=this.__data__;if(AE){var n=e[t];return n===SE?void 0:n}return PE.call(e,t)?e[t]:void 0}au.exports=xE});var uu=b((CD,cu)=>{var LE=ur(),DE=Object.prototype,IE=DE.hasOwnProperty;function NE(t){var e=this.__data__;return LE?e[t]!==void 0:IE.call(e,t)}cu.exports=NE});var pu=b((AD,du)=>{var ME=ur(),RE="__lodash_hash_undefined__";function kE(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ME&&e===void 0?RE:e,this}du.exports=kE});var hu=b((SD,fu)=>{var FE=ru(),$E=su(),jE=lu(),VE=uu(),UE=pu();function Ai(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Ai.prototype.clear=FE;Ai.prototype.delete=$E;Ai.prototype.get=jE;Ai.prototype.has=VE;Ai.prototype.set=UE;fu.exports=Ai});var bu=b((OD,gu)=>{var mu=hu(),HE=ar(),qE=xs();function BE(){this.size=0,this.__data__={hash:new mu,map:new(qE||HE),string:new mu}}gu.exports=BE});var yu=b((PD,vu)=>{function WE(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}vu.exports=WE});var dr=b((xD,Eu)=>{var zE=yu();function GE(t,e){var n=t.__data__;return zE(e)?n[typeof e=="string"?"string":"hash"]:n.map}Eu.exports=GE});var Tu=b((LD,_u)=>{var JE=dr();function KE(t){var e=JE(this,t).delete(t);return this.size-=e?1:0,e}_u.exports=KE});var Cu=b((DD,wu)=>{var YE=dr();function XE(t){return YE(this,t).get(t)}wu.exports=XE});var Su=b((ID,Au)=>{var QE=dr();function ZE(t){return QE(this,t).has(t)}Au.exports=ZE});var Pu=b((ND,Ou)=>{var e_=dr();function t_(t,e){var n=e_(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}Ou.exports=t_});var Lu=b((MD,xu)=>{var n_=bu(),i_=Tu(),r_=Cu(),o_=Su(),s_=Pu();function Si(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Si.prototype.clear=n_;Si.prototype.delete=i_;Si.prototype.get=r_;Si.prototype.has=o_;Si.prototype.set=s_;xu.exports=Si});var Iu=b((RD,Du)=>{var a_=ar(),l_=xs(),c_=Lu(),u_=200;function d_(t,e){var n=this.__data__;if(n instanceof a_){var i=n.__data__;if(!l_||i.length<u_-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new c_(i)}return n.set(t,e),this.size=n.size,this}Du.exports=d_});var Mu=b((kD,Nu)=>{var p_=ar(),f_=_c(),h_=wc(),m_=Ac(),g_=Oc(),b_=Iu();function Oi(t){var e=this.__data__=new p_(t);this.size=e.size}Oi.prototype.clear=f_;Oi.prototype.delete=h_;Oi.prototype.get=m_;Oi.prototype.has=g_;Oi.prototype.set=b_;Nu.exports=Oi});var Ls=b((FD,Ru)=>{var v_=no(),y_=function(){try{var t=v_(Object,"defineProperty");return t({},"",{}),t}catch{}}();Ru.exports=y_});var io=b(($D,Fu)=>{var ku=Ls();function E_(t,e,n){e=="__proto__"&&ku?ku(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}Fu.exports=E_});var Ds=b((jD,$u)=>{var __=io(),T_=or();function w_(t,e,n){(n!==void 0&&!T_(t[e],n)||n===void 0&&!(e in t))&&__(t,e,n)}$u.exports=w_});var Vu=b((VD,ju)=>{function C_(t){return function(e,n,i){for(var r=-1,o=Object(e),s=i(e),a=s.length;a--;){var l=s[t?a:++r];if(n(o[l],l,o)===!1)break}return e}}ju.exports=C_});var Hu=b((UD,Uu)=>{var A_=Vu(),S_=A_();Uu.exports=S_});var Gu=b((pr,Pi)=>{var O_=Xn(),zu=typeof pr=="object"&&pr&&!pr.nodeType&&pr,qu=zu&&typeof Pi=="object"&&Pi&&!Pi.nodeType&&Pi,P_=qu&&qu.exports===zu,Bu=P_?O_.Buffer:void 0,Wu=Bu?Bu.allocUnsafe:void 0;function x_(t,e){if(e)return t.slice();var n=t.length,i=Wu?Wu(n):new t.constructor(n);return t.copy(i),i}Pi.exports=x_});var Ku=b((HD,Ju)=>{var L_=Xn(),D_=L_.Uint8Array;Ju.exports=D_});var Qu=b((qD,Xu)=>{var Yu=Ku();function I_(t){var e=new t.constructor(t.byteLength);return new Yu(e).set(new Yu(t)),e}Xu.exports=I_});var ed=b((BD,Zu)=>{var N_=Qu();function M_(t,e){var n=e?N_(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}Zu.exports=M_});var nd=b((WD,td)=>{function R_(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}td.exports=R_});var od=b((zD,rd)=>{var k_=An(),id=Object.create,F_=function(){function t(){}return function(e){if(!k_(e))return{};if(id)return id(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();rd.exports=F_});var ad=b((GD,sd)=>{function $_(t,e){return function(n){return t(e(n))}}sd.exports=$_});var Is=b((JD,ld)=>{var j_=ad(),V_=j_(Object.getPrototypeOf,Object);ld.exports=V_});var Ns=b((KD,cd)=>{var U_=Object.prototype;function H_(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||U_;return t===n}cd.exports=H_});var dd=b((YD,ud)=>{var q_=od(),B_=Is(),W_=Ns();function z_(t){return typeof t.constructor=="function"&&!W_(t)?q_(B_(t)):{}}ud.exports=z_});var xi=b((XD,pd)=>{function G_(t){return t!=null&&typeof t=="object"}pd.exports=G_});var hd=b((QD,fd)=>{var J_=cr(),K_=xi(),Y_="[object Arguments]";function X_(t){return K_(t)&&J_(t)==Y_}fd.exports=X_});var Ms=b((ZD,bd)=>{var md=hd(),Q_=xi(),gd=Object.prototype,Z_=gd.hasOwnProperty,eT=gd.propertyIsEnumerable,tT=md(function(){return arguments}())?md:function(t){return Q_(t)&&Z_.call(t,"callee")&&!eT.call(t,"callee")};bd.exports=tT});var Rs=b((eI,vd)=>{var nT=Array.isArray;vd.exports=nT});var ks=b((tI,yd)=>{var iT=9007199254740991;function rT(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=iT}yd.exports=rT});var ro=b((nI,Ed)=>{var oT=to(),sT=ks();function aT(t){return t!=null&&sT(t.length)&&!oT(t)}Ed.exports=aT});var Td=b((iI,_d)=>{var lT=ro(),cT=xi();function uT(t){return cT(t)&&lT(t)}_d.exports=uT});var Cd=b((rI,wd)=>{function dT(){return!1}wd.exports=dT});var Fs=b((fr,Li)=>{var pT=Xn(),fT=Cd(),Od=typeof fr=="object"&&fr&&!fr.nodeType&&fr,Ad=Od&&typeof Li=="object"&&Li&&!Li.nodeType&&Li,hT=Ad&&Ad.exports===Od,Sd=hT?pT.Buffer:void 0,mT=Sd?Sd.isBuffer:void 0,gT=mT||fT;Li.exports=gT});var Ld=b((oI,xd)=>{var bT=cr(),vT=Is(),yT=xi(),ET="[object Object]",_T=Function.prototype,TT=Object.prototype,Pd=_T.toString,wT=TT.hasOwnProperty,CT=Pd.call(Object);function AT(t){if(!yT(t)||bT(t)!=ET)return!1;var e=vT(t);if(e===null)return!0;var n=wT.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Pd.call(n)==CT}xd.exports=AT});var Id=b((sI,Dd)=>{var ST=cr(),OT=ks(),PT=xi(),xT="[object Arguments]",LT="[object Array]",DT="[object Boolean]",IT="[object Date]",NT="[object Error]",MT="[object Function]",RT="[object Map]",kT="[object Number]",FT="[object Object]",$T="[object RegExp]",jT="[object Set]",VT="[object String]",UT="[object WeakMap]",HT="[object ArrayBuffer]",qT="[object DataView]",BT="[object Float32Array]",WT="[object Float64Array]",zT="[object Int8Array]",GT="[object Int16Array]",JT="[object Int32Array]",KT="[object Uint8Array]",YT="[object Uint8ClampedArray]",XT="[object Uint16Array]",QT="[object Uint32Array]",_e={};_e[BT]=_e[WT]=_e[zT]=_e[GT]=_e[JT]=_e[KT]=_e[YT]=_e[XT]=_e[QT]=!0;_e[xT]=_e[LT]=_e[HT]=_e[DT]=_e[qT]=_e[IT]=_e[NT]=_e[MT]=_e[RT]=_e[kT]=_e[FT]=_e[$T]=_e[jT]=_e[VT]=_e[UT]=!1;function ZT(t){return PT(t)&&OT(t.length)&&!!_e[ST(t)]}Dd.exports=ZT});var Md=b((aI,Nd)=>{function ew(t){return function(e){return t(e)}}Nd.exports=ew});var kd=b((hr,Di)=>{var tw=Ss(),Rd=typeof hr=="object"&&hr&&!hr.nodeType&&hr,mr=Rd&&typeof Di=="object"&&Di&&!Di.nodeType&&Di,nw=mr&&mr.exports===Rd,$s=nw&&tw.process,iw=function(){try{var t=mr&&mr.require&&mr.require("util").types;return t||$s&&$s.binding&&$s.binding("util")}catch{}}();Di.exports=iw});var js=b((lI,jd)=>{var rw=Id(),ow=Md(),Fd=kd(),$d=Fd&&Fd.isTypedArray,sw=$d?ow($d):rw;jd.exports=sw});var Vs=b((cI,Vd)=>{function aw(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}Vd.exports=aw});var Hd=b((uI,Ud)=>{var lw=io(),cw=or(),uw=Object.prototype,dw=uw.hasOwnProperty;function pw(t,e,n){var i=t[e];(!(dw.call(t,e)&&cw(i,n))||n===void 0&&!(e in t))&&lw(t,e,n)}Ud.exports=pw});var Bd=b((dI,qd)=>{var fw=Hd(),hw=io();function mw(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?hw(n,a,l):fw(n,a,l)}return n}qd.exports=mw});var zd=b((pI,Wd)=>{function gw(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}Wd.exports=gw});var Us=b((fI,Gd)=>{var bw=9007199254740991,vw=/^(?:0|[1-9]\d*)$/;function yw(t,e){var n=typeof t;return e=e??bw,!!e&&(n=="number"||n!="symbol"&&vw.test(t))&&t>-1&&t%1==0&&t<e}Gd.exports=yw});var Kd=b((hI,Jd)=>{var Ew=zd(),_w=Ms(),Tw=Rs(),ww=Fs(),Cw=Us(),Aw=js(),Sw=Object.prototype,Ow=Sw.hasOwnProperty;function Pw(t,e){var n=Tw(t),i=!n&&_w(t),r=!n&&!i&&ww(t),o=!n&&!i&&!r&&Aw(t),s=n||i||r||o,a=s?Ew(t.length,String):[],l=a.length;for(var f in t)(e||Ow.call(t,f))&&!(s&&(f=="length"||r&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Cw(f,l)))&&a.push(f);return a}Jd.exports=Pw});var Xd=b((mI,Yd)=>{function xw(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}Yd.exports=xw});var Zd=b((gI,Qd)=>{var Lw=An(),Dw=Ns(),Iw=Xd(),Nw=Object.prototype,Mw=Nw.hasOwnProperty;function Rw(t){if(!Lw(t))return Iw(t);var e=Dw(t),n=[];for(var i in t)i=="constructor"&&(e||!Mw.call(t,i))||n.push(i);return n}Qd.exports=Rw});var Hs=b((bI,ep)=>{var kw=Kd(),Fw=Zd(),$w=ro();function jw(t){return $w(t)?kw(t,!0):Fw(t)}ep.exports=jw});var np=b((vI,tp)=>{var Vw=Bd(),Uw=Hs();function Hw(t){return Vw(t,Uw(t))}tp.exports=Hw});var lp=b((yI,ap)=>{var ip=Ds(),qw=Gu(),Bw=ed(),Ww=nd(),zw=dd(),rp=Ms(),op=Rs(),Gw=Td(),Jw=Fs(),Kw=to(),Yw=An(),Xw=Ld(),Qw=js(),sp=Vs(),Zw=np();function eC(t,e,n,i,r,o,s){var a=sp(t,n),l=sp(e,n),f=s.get(l);if(f){ip(t,n,f);return}var c=o?o(a,l,n+"",t,e,s):void 0,m=c===void 0;if(m){var E=op(l),w=!E&&Jw(l),H=!E&&!w&&Qw(l);c=l,E||w||H?op(a)?c=a:Gw(a)?c=Ww(a):w?(m=!1,c=qw(l,!0)):H?(m=!1,c=Bw(l,!0)):c=[]:Xw(l)||rp(l)?(c=a,rp(a)?c=Zw(a):(!Yw(a)||Kw(a))&&(c=zw(l))):m=!1}m&&(s.set(l,c),r(c,l,i,o,s),s.delete(l)),ip(t,n,c)}ap.exports=eC});var dp=b((EI,up)=>{var tC=Mu(),nC=Ds(),iC=Hu(),rC=lp(),oC=An(),sC=Hs(),aC=Vs();function cp(t,e,n,i,r){t!==e&&iC(e,function(o,s){if(r||(r=new tC),oC(o))rC(t,e,s,n,cp,i,r);else{var a=i?i(aC(t,s),o,s+"",t,e,r):void 0;a===void 0&&(a=o),nC(t,s,a)}},sC)}up.exports=cp});var qs=b((_I,pp)=>{function lC(t){return t}pp.exports=lC});var hp=b((TI,fp)=>{function cC(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}fp.exports=cC});var bp=b((wI,gp)=>{var uC=hp(),mp=Math.max;function dC(t,e,n){return e=mp(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=mp(i.length-e,0),s=Array(o);++r<o;)s[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(s),uC(t,this,a)}}gp.exports=dC});var yp=b((CI,vp)=>{function pC(t){return function(){return t}}vp.exports=pC});var Tp=b((AI,_p)=>{var fC=yp(),Ep=Ls(),hC=qs(),mC=Ep?function(t,e){return Ep(t,"toString",{configurable:!0,enumerable:!1,value:fC(e),writable:!0})}:hC;_p.exports=mC});var Cp=b((SI,wp)=>{var gC=800,bC=16,vC=Date.now;function yC(t){var e=0,n=0;return function(){var i=vC(),r=bC-(i-n);if(n=i,r>0){if(++e>=gC)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}wp.exports=yC});var Sp=b((OI,Ap)=>{var EC=Tp(),_C=Cp(),TC=_C(EC);Ap.exports=TC});var Pp=b((PI,Op)=>{var wC=qs(),CC=bp(),AC=Sp();function SC(t,e){return AC(CC(t,e,wC),t+"")}Op.exports=SC});var Lp=b((xI,xp)=>{var OC=or(),PC=ro(),xC=Us(),LC=An();function DC(t,e,n){if(!LC(n))return!1;var i=typeof e;return(i=="number"?PC(n)&&xC(e,n.length):i=="string"&&e in n)?OC(n[e],t):!1}xp.exports=DC});var Ip=b((LI,Dp)=>{var IC=Pp(),NC=Lp();function MC(t){return IC(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(r--,o):void 0,s&&NC(n[0],n[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,o)}return e})}Dp.exports=MC});var Mp=b((DI,Np)=>{var RC=dp(),kC=Ip(),FC=kC(function(t,e,n){RC(t,e,n)});Np.exports=FC});var kr={};Vf(kr,{afterMain:()=>ba,afterRead:()=>ha,afterWrite:()=>Ea,applyStyles:()=>oi,arrow:()=>Pr,auto:()=>Ri,basePlacements:()=>Kt,beforeMain:()=>ma,beforeRead:()=>pa,beforeWrite:()=>va,bottom:()=>ke,clippingParents:()=>Po,computeStyles:()=>ai,createPopper:()=>Bi,createPopperBase:()=>xa,createPopperLite:()=>La,detectOverflow:()=>Ze,end:()=>pn,eventListeners:()=>li,flip:()=>Ir,hide:()=>Nr,left:()=>Ie,main:()=>ga,modifierPhases:()=>Lo,offset:()=>Mr,placements:()=>Fi,popper:()=>In,popperGenerator:()=>Vn,popperOffsets:()=>di,preventOverflow:()=>Rr,read:()=>fa,reference:()=>xo,right:()=>Ne,start:()=>Mt,top:()=>Pe,variationPlacements:()=>Or,viewport:()=>ki,write:()=>ya});var Pe="top",ke="bottom",Ne="right",Ie="left",Ri="auto",Kt=[Pe,ke,Ne,Ie],Mt="start",pn="end",Po="clippingParents",ki="viewport",In="popper",xo="reference",Or=Kt.reduce(function(t,e){return t.concat([e+"-"+Mt,e+"-"+pn])},[]),Fi=[].concat(Kt,[Ri]).reduce(function(t,e){return t.concat([e,e+"-"+Mt,e+"-"+pn])},[]),pa="beforeRead",fa="read",ha="afterRead",ma="beforeMain",ga="main",ba="afterMain",va="beforeWrite",ya="write",Ea="afterWrite",Lo=[pa,fa,ha,ma,ga,ba,va,ya,Ea];function Ue(t){return t?(t.nodeName||"").toLowerCase():null}function Te(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function bt(t){var e=Te(t).Element;return t instanceof e||t instanceof Element}function je(t){var e=Te(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ri(t){if(typeof ShadowRoot>"u")return!1;var e=Te(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Hf(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!je(o)||!Ue(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(s){var a=r[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function qf(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],o=e.attributes[i]||{},s=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=s.reduce(function(l,f){return l[f]="",l},{});!je(r)||!Ue(r)||(Object.assign(r.style,a),Object.keys(o).forEach(function(l){r.removeAttribute(l)}))})}}var oi={name:"applyStyles",enabled:!0,phase:"write",fn:Hf,effect:qf,requires:["computeStyles"]};function He(t){return t.split("-")[0]}var Ot=Math.max,Nn=Math.min,Yt=Math.round;function si(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function $i(){return!/^((?!chrome|android).)*safari/i.test(si())}function vt(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&je(t)&&(r=t.offsetWidth>0&&Yt(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Yt(i.height)/t.offsetHeight||1);var s=bt(t)?Te(t):window,a=s.visualViewport,l=!$i()&&n,f=(i.left+(l&&a?a.offsetLeft:0))/r,c=(i.top+(l&&a?a.offsetTop:0))/o,m=i.width/r,E=i.height/o;return{width:m,height:E,top:c,right:f+m,bottom:c+E,left:f,x:f,y:c}}function Mn(t){var e=vt(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function ji(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ri(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Qe(t){return Te(t).getComputedStyle(t)}function Do(t){return["table","td","th"].indexOf(Ue(t))>=0}function Be(t){return((bt(t)?t.ownerDocument:t.document)||window.document).documentElement}function Xt(t){return Ue(t)==="html"?t:t.assignedSlot||t.parentNode||(ri(t)?t.host:null)||Be(t)}function _a(t){return!je(t)||Qe(t).position==="fixed"?null:t.offsetParent}function Bf(t){var e=/firefox/i.test(si()),n=/Trident/i.test(si());if(n&&je(t)){var i=Qe(t);if(i.position==="fixed")return null}var r=Xt(t);for(ri(r)&&(r=r.host);je(r)&&["html","body"].indexOf(Ue(r))<0;){var o=Qe(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function Pt(t){for(var e=Te(t),n=_a(t);n&&Do(n)&&Qe(n).position==="static";)n=_a(n);return n&&(Ue(n)==="html"||Ue(n)==="body"&&Qe(n).position==="static")?e:n||Bf(t)||e}function Rn(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function kn(t,e,n){return Ot(t,Nn(e,n))}function Ta(t,e,n){var i=kn(t,e,n);return i>n?n:i}function Vi(){return{top:0,right:0,bottom:0,left:0}}function Ui(t){return Object.assign({},Vi(),t)}function Hi(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var Wf=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Ui(typeof e!="number"?e:Hi(e,Kt))};function zf(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=He(n.placement),l=Rn(a),f=[Ie,Ne].indexOf(a)>=0,c=f?"height":"width";if(!(!o||!s)){var m=Wf(r.padding,n),E=Mn(o),w=l==="y"?Pe:Ie,H=l==="y"?ke:Ne,P=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],V=s[l]-n.rects.reference[l],F=Pt(o),te=F?l==="y"?F.clientHeight||0:F.clientWidth||0:0,oe=P/2-V/2,$=m[w],z=te-E[c]-m[H],j=te/2-E[c]/2+oe,ne=kn($,j,z),Q=l;n.modifiersData[i]=(e={},e[Q]=ne,e.centerOffset=ne-j,e)}}function Gf(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||ji(e.elements.popper,r)&&(e.elements.arrow=r))}var Pr={name:"arrow",enabled:!0,phase:"main",fn:zf,effect:Gf,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function yt(t){return t.split("-")[1]}var Jf={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kf(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:Yt(n*r)/r||0,y:Yt(i*r)/r||0}}function wa(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,f=t.adaptive,c=t.roundOffsets,m=t.isFixed,E=s.x,w=E===void 0?0:E,H=s.y,P=H===void 0?0:H,V=typeof c=="function"?c({x:w,y:P}):{x:w,y:P};w=V.x,P=V.y;var F=s.hasOwnProperty("x"),te=s.hasOwnProperty("y"),oe=Ie,$=Pe,z=window;if(f){var j=Pt(n),ne="clientHeight",Q="clientWidth";if(j===Te(n)&&(j=Be(n),Qe(j).position!=="static"&&a==="absolute"&&(ne="scrollHeight",Q="scrollWidth")),j=j,r===Pe||(r===Ie||r===Ne)&&o===pn){$=ke;var be=m&&j===z&&z.visualViewport?z.visualViewport.height:j[ne];P-=be-i.height,P*=l?1:-1}if(r===Ie||(r===Pe||r===ke)&&o===pn){oe=Ne;var ie=m&&j===z&&z.visualViewport?z.visualViewport.width:j[Q];w-=ie-i.width,w*=l?1:-1}}var I=Object.assign({position:a},f&&Jf),Le=c===!0?Kf({x:w,y:P},Te(n)):{x:w,y:P};if(w=Le.x,P=Le.y,l){var Me;return Object.assign({},I,(Me={},Me[$]=te?"0":"",Me[oe]=F?"0":"",Me.transform=(z.devicePixelRatio||1)<=1?"translate("+w+"px, "+P+"px)":"translate3d("+w+"px, "+P+"px, 0)",Me))}return Object.assign({},I,(e={},e[$]=te?P+"px":"",e[oe]=F?w+"px":"",e.transform="",e))}function Yf(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a;if(!1)var f;var c={placement:He(e.placement),variation:yt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,wa(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,wa(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var ai={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Yf,data:{}};var xr={passive:!0};function Xf(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=r===void 0?!0:r,s=i.resize,a=s===void 0?!0:s,l=Te(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&f.forEach(function(c){c.addEventListener("scroll",n.update,xr)}),a&&l.addEventListener("resize",n.update,xr),function(){o&&f.forEach(function(c){c.removeEventListener("scroll",n.update,xr)}),a&&l.removeEventListener("resize",n.update,xr)}}var li={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Xf,data:{}};var Qf={left:"right",right:"left",bottom:"top",top:"bottom"};function ci(t){return t.replace(/left|right|bottom|top/g,function(e){return Qf[e]})}var Zf={start:"end",end:"start"};function Lr(t){return t.replace(/start|end/g,function(e){return Zf[e]})}function Fn(t){var e=Te(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function $n(t){return vt(Be(t)).left+Fn(t).scrollLeft}function Io(t,e){var n=Te(t),i=Be(t),r=n.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;var f=$i();(f||!f&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:s,x:a+$n(t),y:l}}function No(t){var e,n=Be(t),i=Fn(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=Ot(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=Ot(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+$n(t),l=-i.scrollTop;return Qe(r||n).direction==="rtl"&&(a+=Ot(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function jn(t){var e=Qe(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Dr(t){return["html","body","#document"].indexOf(Ue(t))>=0?t.ownerDocument.body:je(t)&&jn(t)?t:Dr(Xt(t))}function fn(t,e){var n;e===void 0&&(e=[]);var i=Dr(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),o=Te(i),s=r?[o].concat(o.visualViewport||[],jn(i)?i:[]):i,a=e.concat(s);return r?a:a.concat(fn(Xt(s)))}function ui(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function eh(t,e){var n=vt(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Ca(t,e,n){return e===ki?ui(Io(t,n)):bt(e)?eh(e,n):ui(No(Be(t)))}function th(t){var e=fn(Xt(t)),n=["absolute","fixed"].indexOf(Qe(t).position)>=0,i=n&&je(t)?Pt(t):t;return bt(i)?e.filter(function(r){return bt(r)&&ji(r,i)&&Ue(r)!=="body"}):[]}function Mo(t,e,n,i){var r=e==="clippingParents"?th(t):[].concat(e),o=[].concat(r,[n]),s=o[0],a=o.reduce(function(l,f){var c=Ca(t,f,i);return l.top=Ot(c.top,l.top),l.right=Nn(c.right,l.right),l.bottom=Nn(c.bottom,l.bottom),l.left=Ot(c.left,l.left),l},Ca(t,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function qi(t){var e=t.reference,n=t.element,i=t.placement,r=i?He(i):null,o=i?yt(i):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(r){case Pe:l={x:s,y:e.y-n.height};break;case ke:l={x:s,y:e.y+e.height};break;case Ne:l={x:e.x+e.width,y:a};break;case Ie:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var f=r?Rn(r):null;if(f!=null){var c=f==="y"?"height":"width";switch(o){case Mt:l[f]=l[f]-(e[c]/2-n[c]/2);break;case pn:l[f]=l[f]+(e[c]/2-n[c]/2);break;default:}}return l}function Ze(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?Po:a,f=n.rootBoundary,c=f===void 0?ki:f,m=n.elementContext,E=m===void 0?In:m,w=n.altBoundary,H=w===void 0?!1:w,P=n.padding,V=P===void 0?0:P,F=Ui(typeof V!="number"?V:Hi(V,Kt)),te=E===In?xo:In,oe=t.rects.popper,$=t.elements[H?te:E],z=Mo(bt($)?$:$.contextElement||Be(t.elements.popper),l,c,s),j=vt(t.elements.reference),ne=qi({reference:j,element:oe,strategy:"absolute",placement:r}),Q=ui(Object.assign({},oe,ne)),be=E===In?Q:j,ie={top:z.top-be.top+F.top,bottom:be.bottom-z.bottom+F.bottom,left:z.left-be.left+F.left,right:be.right-z.right+F.right},I=t.modifiersData.offset;if(E===In&&I){var Le=I[r];Object.keys(ie).forEach(function(Me){var u=[Ne,ke].indexOf(Me)>=0?1:-1,d=[Pe,ke].indexOf(Me)>=0?"y":"x";ie[Me]+=Le[d]*u})}return ie}function Ro(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,f=l===void 0?Fi:l,c=yt(i),m=c?a?Or:Or.filter(function(H){return yt(H)===c}):Kt,E=m.filter(function(H){return f.indexOf(H)>=0});E.length===0&&(E=m);var w=E.reduce(function(H,P){return H[P]=Ze(t,{placement:P,boundary:r,rootBoundary:o,padding:s})[He(P)],H},{});return Object.keys(w).sort(function(H,P){return w[H]-w[P]})}function nh(t){if(He(t)===Ri)return[];var e=ci(t);return[Lr(t),e,Lr(e)]}function ih(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,f=n.padding,c=n.boundary,m=n.rootBoundary,E=n.altBoundary,w=n.flipVariations,H=w===void 0?!0:w,P=n.allowedAutoPlacements,V=e.options.placement,F=He(V),te=F===V,oe=l||(te||!H?[ci(V)]:nh(V)),$=[V].concat(oe).reduce(function(Z,B){return Z.concat(He(B)===Ri?Ro(e,{placement:B,boundary:c,rootBoundary:m,padding:f,flipVariations:H,allowedAutoPlacements:P}):B)},[]),z=e.rects.reference,j=e.rects.popper,ne=new Map,Q=!0,be=$[0],ie=0;ie<$.length;ie++){var I=$[ie],Le=He(I),Me=yt(I)===Mt,u=[Pe,ke].indexOf(Le)>=0,d=u?"width":"height",h=Ze(e,{placement:I,boundary:c,rootBoundary:m,altBoundary:E,padding:f}),y=u?Me?Ne:Ie:Me?ke:Pe;z[d]>j[d]&&(y=ci(y));var O=ci(y),S=[];if(o&&S.push(h[Le]<=0),a&&S.push(h[y]<=0,h[O]<=0),S.every(function(Z){return Z})){be=I,Q=!1;break}ne.set(I,S)}if(Q)for(var q=H?3:1,se=function(B){var pe=$.find(function(ce){var De=ne.get(ce);if(De)return De.slice(0,B).every(function(Re){return Re})});if(pe)return be=pe,"break"},re=q;re>0;re--){var N=se(re);if(N==="break")break}e.placement!==be&&(e.modifiersData[i]._skip=!0,e.placement=be,e.reset=!0)}}var Ir={name:"flip",enabled:!0,phase:"main",fn:ih,requiresIfExists:["offset"],data:{_skip:!1}};function Aa(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Sa(t){return[Pe,Ne,ke,Ie].some(function(e){return t[e]>=0})}function rh(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,s=Ze(e,{elementContext:"reference"}),a=Ze(e,{altBoundary:!0}),l=Aa(s,i),f=Aa(a,r,o),c=Sa(l),m=Sa(f);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:f,isReferenceHidden:c,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":m})}var Nr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rh};function oh(t,e,n){var i=He(t),r=[Ie,Pe].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[Ie,Ne].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}function sh(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=r===void 0?[0,0]:r,s=Fi.reduce(function(c,m){return c[m]=oh(m,e.rects,o),c},{}),a=s[e.placement],l=a.x,f=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=f),e.modifiersData[i]=s}var Mr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sh};function ah(t){var e=t.state,n=t.name;e.modifiersData[n]=qi({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var di={name:"popperOffsets",enabled:!0,phase:"read",fn:ah,data:{}};function ko(t){return t==="x"?"y":"x"}function lh(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=r===void 0?!0:r,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,f=n.rootBoundary,c=n.altBoundary,m=n.padding,E=n.tether,w=E===void 0?!0:E,H=n.tetherOffset,P=H===void 0?0:H,V=Ze(e,{boundary:l,rootBoundary:f,padding:m,altBoundary:c}),F=He(e.placement),te=yt(e.placement),oe=!te,$=Rn(F),z=ko($),j=e.modifiersData.popperOffsets,ne=e.rects.reference,Q=e.rects.popper,be=typeof P=="function"?P(Object.assign({},e.rects,{placement:e.placement})):P,ie=typeof be=="number"?{mainAxis:be,altAxis:be}:Object.assign({mainAxis:0,altAxis:0},be),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Le={x:0,y:0};if(j){if(o){var Me,u=$==="y"?Pe:Ie,d=$==="y"?ke:Ne,h=$==="y"?"height":"width",y=j[$],O=y+V[u],S=y-V[d],q=w?-Q[h]/2:0,se=te===Mt?ne[h]:Q[h],re=te===Mt?-Q[h]:-ne[h],N=e.elements.arrow,Z=w&&N?Mn(N):{width:0,height:0},B=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Vi(),pe=B[u],ce=B[d],De=kn(0,ne[h],Z[h]),Re=oe?ne[h]/2-q-De-pe-ie.mainAxis:se-De-pe-ie.mainAxis,Wt=oe?-ne[h]/2+q+De+ce+ie.mainAxis:re+De+ce+ie.mainAxis,At=e.elements.arrow&&Pt(e.elements.arrow),cn=At?$==="y"?At.clientTop||0:At.clientLeft||0:0,rt=(Me=I?.[$])!=null?Me:0,p=y+Re-rt-cn,C=y+Wt-rt,A=kn(w?Nn(O,p):O,y,w?Ot(S,C):S);j[$]=A,Le[$]=A-y}if(a){var T,R=$==="x"?Pe:Ie,L=$==="x"?ke:Ne,k=j[z],fe=z==="y"?"height":"width",K=k+V[R],ae=k-V[L],ue=[Pe,Ie].indexOf(F)!==-1,M=(T=I?.[z])!=null?T:0,ve=ue?K:k-ne[fe]-Q[fe]-M+ie.altAxis,gt=ue?k+ne[fe]+Q[fe]-M-ie.altAxis:ae,un=w&&ue?Ta(ve,k,gt):kn(w?ve:K,k,w?gt:ae);j[z]=un,Le[z]=un-k}e.modifiersData[i]=Le}}var Rr={name:"preventOverflow",enabled:!0,phase:"main",fn:lh,requiresIfExists:["offset"]};function Fo(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function $o(t){return t===Te(t)||!je(t)?Fn(t):Fo(t)}function ch(t){var e=t.getBoundingClientRect(),n=Yt(e.width)/t.offsetWidth||1,i=Yt(e.height)/t.offsetHeight||1;return n!==1||i!==1}function jo(t,e,n){n===void 0&&(n=!1);var i=je(e),r=je(e)&&ch(e),o=Be(e),s=vt(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((Ue(e)!=="body"||jn(o))&&(a=$o(e)),je(e)?(l=vt(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=$n(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function uh(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&r(l)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),i}function Vo(t){var e=uh(t);return Lo.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function Uo(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Ho(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var Oa={placement:"bottom",modifiers:[],strategy:"absolute"};function Pa(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Vn(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?Oa:r;return function(a,l,f){f===void 0&&(f=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Oa,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},m=[],E=!1,w={state:c,setOptions:function(F){var te=typeof F=="function"?F(c.options):F;P(),c.options=Object.assign({},o,c.options,te),c.scrollParents={reference:bt(a)?fn(a):a.contextElement?fn(a.contextElement):[],popper:fn(l)};var oe=Vo(Ho([].concat(i,c.options.modifiers)));if(c.orderedModifiers=oe.filter(function(I){return I.enabled}),!1){var $;if(getBasePlacement(c.options.placement)===auto)var z;var j,ne,Q,be,ie}return H(),w.update()},forceUpdate:function(){if(!E){var F=c.elements,te=F.reference,oe=F.popper;if(Pa(te,oe)){c.rects={reference:jo(te,Pt(oe),c.options.strategy==="fixed"),popper:Mn(oe)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(I){return c.modifiersData[I.name]=Object.assign({},I.data)});for(var $=0,z=0;z<c.orderedModifiers.length;z++){if(c.reset===!0){c.reset=!1,z=-1;continue}var j=c.orderedModifiers[z],ne=j.fn,Q=j.options,be=Q===void 0?{}:Q,ie=j.name;typeof ne=="function"&&(c=ne({state:c,options:be,name:ie,instance:w})||c)}}}},update:Uo(function(){return new Promise(function(V){w.forceUpdate(),V(c)})}),destroy:function(){P(),E=!0}};if(!Pa(a,l))return w;w.setOptions(f).then(function(V){!E&&f.onFirstUpdate&&f.onFirstUpdate(V)});function H(){c.orderedModifiers.forEach(function(V){var F=V.name,te=V.options,oe=te===void 0?{}:te,$=V.effect;if(typeof $=="function"){var z=$({state:c,name:F,instance:w,options:oe}),j=function(){};m.push(z||j)}})}function P(){m.forEach(function(V){return V()}),m=[]}return w}}var xa=Vn();var dh=[li,di,ai,oi],La=Vn({defaultModifiers:dh});var ph=[li,di,ai,oi,Mr,Ir,Rr,Pr,Nr],Bi=Vn({defaultModifiers:ph});var fh=1e6,hh=1e3,ns="transitionend",mh=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),gh=t=>{do t+=Math.floor(Math.random()*fh);while(document.getElementById(t));return t},rl=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e},ol=t=>{let e=rl(t);return e&&document.querySelector(e)?e:null},Zt=t=>{let e=rl(t);return e?document.querySelector(e):null},bh=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t),i=Number.parseFloat(e),r=Number.parseFloat(n);return!i&&!r?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*hh)},sl=t=>{t.dispatchEvent(new Event(ns))},en=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),mn=t=>en(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,_i=t=>{if(!en(t)||t.getClientRects().length===0)return!1;let e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){let i=t.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return e},gn=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",al=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){let e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?al(t.parentNode):null},Wr=()=>{},Ki=t=>{t.offsetHeight},ll=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,qo=[],vh=t=>{document.readyState==="loading"?(qo.length||document.addEventListener("DOMContentLoaded",()=>{for(let e of qo)e()}),qo.push(t)):t()},Et=()=>document.documentElement.dir==="rtl",Tt=t=>{vh(()=>{let e=ll();if(e){let n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},Qt=t=>{typeof t=="function"&&t()},cl=(t,e,n=!0)=>{if(!n){Qt(t);return}let i=5,r=bh(e)+i,o=!1,s=({target:a})=>{a===e&&(o=!0,e.removeEventListener(ns,s),Qt(t))};e.addEventListener(ns,s),setTimeout(()=>{o||sl(e)},r)},ss=(t,e,n,i)=>{let r=t.length,o=t.indexOf(e);return o===-1?!n&&i?t[r-1]:t[0]:(o+=n?1:-1,i&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},yh=/[^.]*(?=\..*)\.|.*/,Eh=/\..*/,_h=/::\d+$/,Bo={},Da=1,ul={mouseenter:"mouseover",mouseleave:"mouseout"},Th=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function dl(t,e){return e&&`${e}::${Da++}`||t.uidEvent||Da++}function pl(t){let e=dl(t);return t.uidEvent=e,Bo[e]=Bo[e]||{},Bo[e]}function wh(t,e){return function n(i){return as(i,{delegateTarget:t}),n.oneOff&&g.off(t,i.type,e),e.apply(t,[i])}}function Ch(t,e,n){return function i(r){let o=t.querySelectorAll(e);for(let{target:s}=r;s&&s!==this;s=s.parentNode)for(let a of o)if(a===s)return as(r,{delegateTarget:s}),i.oneOff&&g.off(t,r.type,e,n),n.apply(s,[r])}}function fl(t,e,n=null){return Object.values(t).find(i=>i.callable===e&&i.delegationSelector===n)}function hl(t,e,n){let i=typeof e=="string",r=i?n:e||n,o=ml(t);return Th.has(o)||(o=t),[i,r,o]}function Ia(t,e,n,i,r){if(typeof e!="string"||!t)return;let[o,s,a]=hl(e,n,i);e in ul&&(s=(H=>function(P){if(!P.relatedTarget||P.relatedTarget!==P.delegateTarget&&!P.delegateTarget.contains(P.relatedTarget))return H.call(this,P)})(s));let l=pl(t),f=l[a]||(l[a]={}),c=fl(f,s,o?n:null);if(c){c.oneOff=c.oneOff&&r;return}let m=dl(s,e.replace(yh,"")),E=o?Ch(t,n,s):wh(t,s);E.delegationSelector=o?n:null,E.callable=s,E.oneOff=r,E.uidEvent=m,f[m]=E,t.addEventListener(a,E,o)}function is(t,e,n,i,r){let o=fl(e[n],i,r);o&&(t.removeEventListener(n,o,!!r),delete e[n][o.uidEvent])}function Ah(t,e,n,i){let r=e[n]||{};for(let o of Object.keys(r))if(o.includes(i)){let s=r[o];is(t,e,n,s.callable,s.delegationSelector)}}function ml(t){return t=t.replace(Eh,""),ul[t]||t}var g={on(t,e,n,i){Ia(t,e,n,i,!1)},one(t,e,n,i){Ia(t,e,n,i,!0)},off(t,e,n,i){if(typeof e!="string"||!t)return;let[r,o,s]=hl(e,n,i),a=s!==e,l=pl(t),f=l[s]||{},c=e.startsWith(".");if(typeof o<"u"){if(!Object.keys(f).length)return;is(t,l,s,o,r?n:null);return}if(c)for(let m of Object.keys(l))Ah(t,l,m,e.slice(1));for(let m of Object.keys(f)){let E=m.replace(_h,"");if(!a||e.includes(E)){let w=f[m];is(t,l,s,w.callable,w.delegationSelector)}}},trigger(t,e,n){if(typeof e!="string"||!t)return null;let i=ll(),r=ml(e),o=e!==r,s=null,a=!0,l=!0,f=!1;o&&i&&(s=i.Event(e,n),i(t).trigger(s),a=!s.isPropagationStopped(),l=!s.isImmediatePropagationStopped(),f=s.isDefaultPrevented());let c=new Event(e,{bubbles:a,cancelable:!0});return c=as(c,n),f&&c.preventDefault(),l&&t.dispatchEvent(c),c.defaultPrevented&&s&&s.preventDefault(),c}};function as(t,e){for(let[n,i]of Object.entries(e||{}))try{t[n]=i}catch{Object.defineProperty(t,n,{configurable:!0,get(){return i}})}return t}var hn=new Map,Wo={set(t,e,n){hn.has(t)||hn.set(t,new Map);let i=hn.get(t);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,n)},get(t,e){return hn.has(t)&&hn.get(t).get(e)||null},remove(t,e){if(!hn.has(t))return;let n=hn.get(t);n.delete(e),n.size===0&&hn.delete(t)}};function Na(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function zo(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}var tn={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${zo(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${zo(e)}`)},getDataAttributes(t){if(!t)return{};let e={},n=Object.keys(t.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(let i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=Na(t.dataset[i])}return e},getDataAttribute(t,e){return Na(t.getAttribute(`data-bs-${zo(e)}`))}},qn=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){let i=en(n)?tn.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...en(n)?tn.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(let i of Object.keys(n)){let r=n[i],o=e[i],s=en(o)?"element":mh(o);if(!new RegExp(r).test(s))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${s}" but expected type "${r}".`)}}},Sh="5.2.3",pt=class extends qn{constructor(e,n){super(),e=mn(e),e&&(this._element=e,this._config=this._getConfig(n),Wo.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Wo.remove(this._element,this.constructor.DATA_KEY),g.off(this._element,this.constructor.EVENT_KEY);for(let e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,i=!0){cl(e,n,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Wo.get(mn(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return Sh}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}},Kr=(t,e="hide")=>{let n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;g.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),gn(this))return;let o=Zt(this)||this.closest(`.${i}`);t.getOrCreateInstance(o)[e]()})},Oh="alert",Ph="bs.alert",gl=`.${Ph}`,xh=`close${gl}`,Lh=`closed${gl}`,Dh="fade",Ih="show",bi=class extends pt{static get NAME(){return Oh}close(){if(g.trigger(this._element,xh).defaultPrevented)return;this._element.classList.remove(Ih);let n=this._element.classList.contains(Dh);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),g.trigger(this._element,Lh),this.dispose()}static jQueryInterface(e){return this.each(function(){let n=bi.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}};Kr(bi,"close");Tt(bi);var Nh="button",Mh="bs.button",Rh=`.${Mh}`,kh=".data-api",Fh="active",Ma='[data-bs-toggle="button"]',$h=`click${Rh}${kh}`,vi=class extends pt{static get NAME(){return Nh}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Fh))}static jQueryInterface(e){return this.each(function(){let n=vi.getOrCreateInstance(this);e==="toggle"&&n[e]()})}};g.on(document,$h,Ma,t=>{t.preventDefault();let e=t.target.closest(Ma);vi.getOrCreateInstance(e).toggle()});Tt(vi);var W={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){let n=[],i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){let e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!gn(n)&&_i(n))}},jh="swipe",Ti=".bs.swipe",Vh=`touchstart${Ti}`,Uh=`touchmove${Ti}`,Hh=`touchend${Ti}`,qh=`pointerdown${Ti}`,Bh=`pointerup${Ti}`,Wh="touch",zh="pen",Gh="pointer-event",Jh=40,Kh={endCallback:null,leftCallback:null,rightCallback:null},Yh={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},yi=class extends qn{constructor(e,n){super(),this._element=e,!(!e||!yi.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Kh}static get DefaultType(){return Yh}static get NAME(){return jh}dispose(){g.off(this._element,Ti)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Qt(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){let e=Math.abs(this._deltaX);if(e<=Jh)return;let n=e/this._deltaX;this._deltaX=0,n&&Qt(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(g.on(this._element,qh,e=>this._start(e)),g.on(this._element,Bh,e=>this._end(e)),this._element.classList.add(Gh)):(g.on(this._element,Vh,e=>this._start(e)),g.on(this._element,Uh,e=>this._move(e)),g.on(this._element,Hh,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===zh||e.pointerType===Wh)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},Xh="carousel",Qh="bs.carousel",En=`.${Qh}`,bl=".data-api",Zh="ArrowLeft",em="ArrowRight",tm=500,Wi="next",pi="prev",hi="left",qr="right",nm=`slide${En}`,Go=`slid${En}`,im=`keydown${En}`,rm=`mouseenter${En}`,om=`mouseleave${En}`,sm=`dragstart${En}`,am=`load${En}${bl}`,lm=`click${En}${bl}`,vl="carousel",Fr="active",cm="slide",um="carousel-item-end",dm="carousel-item-start",pm="carousel-item-next",fm="carousel-item-prev",yl=".active",El=".carousel-item",hm=yl+El,mm=".carousel-item img",gm=".carousel-indicators",bm="[data-bs-slide], [data-bs-slide-to]",vm='[data-bs-ride="carousel"]',ym={[Zh]:qr,[em]:hi},Em={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},_m={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},Bn=class extends pt{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=W.findOne(gm,this._element),this._addEventListeners(),this._config.ride===vl&&this.cycle()}static get Default(){return Em}static get DefaultType(){return _m}static get NAME(){return Xh}next(){this._slide(Wi)}nextWhenVisible(){!document.hidden&&_i(this._element)&&this.next()}prev(){this._slide(pi)}pause(){this._isSliding&&sl(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){g.one(this._element,Go,()=>this.cycle());return}this.cycle()}}to(e){let n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){g.one(this._element,Go,()=>this.to(e));return}let i=this._getItemIndex(this._getActive());if(i===e)return;let r=e>i?Wi:pi;this._slide(r,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&g.on(this._element,im,e=>this._keydown(e)),this._config.pause==="hover"&&(g.on(this._element,rm,()=>this.pause()),g.on(this._element,om,()=>this._maybeEnableCycle())),this._config.touch&&yi.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let i of W.find(mm,this._element))g.on(i,sm,r=>r.preventDefault());let n={leftCallback:()=>this._slide(this._directionToOrder(hi)),rightCallback:()=>this._slide(this._directionToOrder(qr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),tm+this._config.interval))}};this._swipeHelper=new yi(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;let n=ym[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;let n=W.findOne(yl,this._indicatorsElement);n.classList.remove(Fr),n.removeAttribute("aria-current");let i=W.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(Fr),i.setAttribute("aria-current","true"))}_updateInterval(){let e=this._activeElement||this._getActive();if(!e)return;let n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;let i=this._getActive(),r=e===Wi,o=n||ss(this._getItems(),i,r,this._config.wrap);if(o===i)return;let s=this._getItemIndex(o),a=w=>g.trigger(this._element,w,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:s});if(a(nm).defaultPrevented||!i||!o)return;let f=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=o;let c=r?dm:um,m=r?pm:fm;o.classList.add(m),Ki(o),i.classList.add(c),o.classList.add(c);let E=()=>{o.classList.remove(c,m),o.classList.add(Fr),i.classList.remove(Fr,m,c),this._isSliding=!1,a(Go)};this._queueCallback(E,i,this._isAnimated()),f&&this.cycle()}_isAnimated(){return this._element.classList.contains(cm)}_getActive(){return W.findOne(hm,this._element)}_getItems(){return W.find(El,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Et()?e===hi?pi:Wi:e===hi?Wi:pi}_orderToDirection(e){return Et()?e===pi?hi:qr:e===pi?qr:hi}static jQueryInterface(e){return this.each(function(){let n=Bn.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}};g.on(document,lm,bm,function(t){let e=Zt(this);if(!e||!e.classList.contains(vl))return;t.preventDefault();let n=Bn.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(tn.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});g.on(window,am,()=>{let t=W.find(vm);for(let e of t)Bn.getOrCreateInstance(e)});Tt(Bn);var Tm="collapse",wm="bs.collapse",Yi=`.${wm}`,Cm=".data-api",Am=`show${Yi}`,Sm=`shown${Yi}`,Om=`hide${Yi}`,Pm=`hidden${Yi}`,xm=`click${Yi}${Cm}`,Jo="show",gi="collapse",$r="collapsing",Lm="collapsed",Dm=`:scope .${gi} .${gi}`,Im="collapse-horizontal",Nm="width",Mm="height",Rm=".collapse.show, .collapse.collapsing",rs='[data-bs-toggle="collapse"]',km={parent:null,toggle:!0},Fm={parent:"(null|element)",toggle:"boolean"},Wn=class extends pt{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];let i=W.find(rs);for(let r of i){let o=ol(r),s=W.find(o).filter(a=>a===this._element);o!==null&&s.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return km}static get DefaultType(){return Fm}static get NAME(){return Tm}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(Rm).filter(a=>a!==this._element).map(a=>Wn.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||g.trigger(this._element,Am).defaultPrevented)return;for(let a of e)a.hide();let i=this._getDimension();this._element.classList.remove(gi),this._element.classList.add($r),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let r=()=>{this._isTransitioning=!1,this._element.classList.remove($r),this._element.classList.add(gi,Jo),this._element.style[i]="",g.trigger(this._element,Sm)},s=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._isShown()||g.trigger(this._element,Om).defaultPrevented)return;let n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Ki(this._element),this._element.classList.add($r),this._element.classList.remove(gi,Jo);for(let r of this._triggerArray){let o=Zt(r);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;let i=()=>{this._isTransitioning=!1,this._element.classList.remove($r),this._element.classList.add(gi),g.trigger(this._element,Pm)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Jo)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=mn(e.parent),e}_getDimension(){return this._element.classList.contains(Im)?Nm:Mm}_initializeChildren(){if(!this._config.parent)return;let e=this._getFirstLevelChildren(rs);for(let n of e){let i=Zt(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(e){let n=W.find(Dm,this._config.parent);return W.find(e,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(e,n){if(e.length)for(let i of e)i.classList.toggle(Lm,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(e){let n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){let i=Wn.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}};g.on(document,xm,rs,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();let e=ol(this),n=W.find(e);for(let i of n)Wn.getOrCreateInstance(i,{toggle:!1}).toggle()});Tt(Wn);var Ra="dropdown",$m="bs.dropdown",zn=`.${$m}`,ls=".data-api",jm="Escape",ka="Tab",Vm="ArrowUp",Fa="ArrowDown",Um=2,Hm=`hide${zn}`,qm=`hidden${zn}`,Bm=`show${zn}`,Wm=`shown${zn}`,_l=`click${zn}${ls}`,Tl=`keydown${zn}${ls}`,zm=`keyup${zn}${ls}`,mi="show",Gm="dropup",Jm="dropend",Km="dropstart",Ym="dropup-center",Xm="dropdown-center",Un='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Qm=`${Un}.${mi}`,Br=".dropdown-menu",Zm=".navbar",eg=".navbar-nav",tg=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",ng=Et()?"top-end":"top-start",ig=Et()?"top-start":"top-end",rg=Et()?"bottom-end":"bottom-start",og=Et()?"bottom-start":"bottom-end",sg=Et()?"left-start":"right-start",ag=Et()?"right-start":"left-start",lg="top",cg="bottom",ug={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},dg={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},ot=class extends pt{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=W.next(this._element,Br)[0]||W.prev(this._element,Br)[0]||W.findOne(Br,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ug}static get DefaultType(){return dg}static get NAME(){return Ra}toggle(){return this._isShown()?this.hide():this.show()}show(){if(gn(this._element)||this._isShown())return;let e={relatedTarget:this._element};if(!g.trigger(this._element,Bm,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(eg))for(let i of[].concat(...document.body.children))g.on(i,"mouseover",Wr);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(mi),this._element.classList.add(mi),g.trigger(this._element,Wm,e)}}hide(){if(gn(this._element)||!this._isShown())return;let e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!g.trigger(this._element,Hm,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(let i of[].concat(...document.body.children))g.off(i,"mouseover",Wr);this._popper&&this._popper.destroy(),this._menu.classList.remove(mi),this._element.classList.remove(mi),this._element.setAttribute("aria-expanded","false"),tn.removeDataAttribute(this._menu,"popper"),g.trigger(this._element,qm,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!en(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Ra.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof kr>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:en(this._config.reference)?e=mn(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);let n=this._getPopperConfig();this._popper=Bi(e,this._menu,n)}_isShown(){return this._menu.classList.contains(mi)}_getPlacement(){let e=this._parent;if(e.classList.contains(Jm))return sg;if(e.classList.contains(Km))return ag;if(e.classList.contains(Ym))return lg;if(e.classList.contains(Xm))return cg;let n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(Gm)?n?ig:ng:n?og:rg}_detectNavbar(){return this._element.closest(Zm)!==null}_getOffset(){let{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){let e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(tn.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:n}){let i=W.find(tg,this._menu).filter(r=>_i(r));i.length&&ss(i,n,e===Fa,!i.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){let n=ot.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===Um||e.type==="keyup"&&e.key!==ka)return;let n=W.find(Qm);for(let i of n){let r=ot.getInstance(i);if(!r||r._config.autoClose===!1)continue;let o=e.composedPath(),s=o.includes(r._menu);if(o.includes(r._element)||r._config.autoClose==="inside"&&!s||r._config.autoClose==="outside"&&s||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===ka||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;let a={relatedTarget:r._element};e.type==="click"&&(a.clickEvent=e),r._completeHide(a)}}static dataApiKeydownHandler(e){let n=/input|textarea/i.test(e.target.tagName),i=e.key===jm,r=[Vm,Fa].includes(e.key);if(!r&&!i||n&&!i)return;e.preventDefault();let o=this.matches(Un)?this:W.prev(this,Un)[0]||W.next(this,Un)[0]||W.findOne(Un,e.delegateTarget.parentNode),s=ot.getOrCreateInstance(o);if(r){e.stopPropagation(),s.show(),s._selectMenuItem(e);return}s._isShown()&&(e.stopPropagation(),s.hide(),o.focus())}};g.on(document,Tl,Un,ot.dataApiKeydownHandler);g.on(document,Tl,Br,ot.dataApiKeydownHandler);g.on(document,_l,ot.clearMenus);g.on(document,zm,ot.clearMenus);g.on(document,_l,Un,function(t){t.preventDefault(),ot.getOrCreateInstance(this).toggle()});Tt(ot);var $a=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ja=".sticky-top",jr="padding-right",Va="margin-right",Gi=class{constructor(){this._element=document.body}getWidth(){let e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){let e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,jr,n=>n+e),this._setElementAttributes($a,jr,n=>n+e),this._setElementAttributes(ja,Va,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,jr),this._resetElementAttributes($a,jr),this._resetElementAttributes(ja,Va)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,i){let r=this.getWidth(),o=s=>{if(s!==this._element&&window.innerWidth>s.clientWidth+r)return;this._saveInitialAttribute(s,n);let a=window.getComputedStyle(s).getPropertyValue(n);s.style.setProperty(n,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,n){let i=e.style.getPropertyValue(n);i&&tn.setDataAttribute(e,n,i)}_resetElementAttributes(e,n){let i=r=>{let o=tn.getDataAttribute(r,n);if(o===null){r.style.removeProperty(n);return}tn.removeDataAttribute(r,n),r.style.setProperty(n,o)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,n){if(en(e)){n(e);return}for(let i of W.find(e,this._element))n(i)}},wl="backdrop",pg="fade",Ua="show",Ha=`mousedown.bs.${wl}`,fg={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},hg={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},zr=class extends qn{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return fg}static get DefaultType(){return hg}static get NAME(){return wl}show(e){if(!this._config.isVisible){Qt(e);return}this._append();let n=this._getElement();this._config.isAnimated&&Ki(n),n.classList.add(Ua),this._emulateAnimation(()=>{Qt(e)})}hide(e){if(!this._config.isVisible){Qt(e);return}this._getElement().classList.remove(Ua),this._emulateAnimation(()=>{this.dispose(),Qt(e)})}dispose(){this._isAppended&&(g.off(this._element,Ha),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(pg),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=mn(e.rootElement),e}_append(){if(this._isAppended)return;let e=this._getElement();this._config.rootElement.append(e),g.on(e,Ha,()=>{Qt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){cl(e,this._getElement(),this._config.isAnimated)}},mg="focustrap",gg="bs.focustrap",Gr=`.${gg}`,bg=`focusin${Gr}`,vg=`keydown.tab${Gr}`,yg="Tab",Eg="forward",qa="backward",_g={autofocus:!0,trapElement:null},Tg={autofocus:"boolean",trapElement:"element"},Jr=class extends qn{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return _g}static get DefaultType(){return Tg}static get NAME(){return mg}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),g.off(document,Gr),g.on(document,bg,e=>this._handleFocusin(e)),g.on(document,vg,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,g.off(document,Gr))}_handleFocusin(e){let{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;let i=W.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===qa?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===yg&&(this._lastTabNavDirection=e.shiftKey?qa:Eg)}},wg="modal",Cg="bs.modal",xt=`.${Cg}`,Ag=".data-api",Sg="Escape",Og=`hide${xt}`,Pg=`hidePrevented${xt}`,Cl=`hidden${xt}`,Al=`show${xt}`,xg=`shown${xt}`,Lg=`resize${xt}`,Dg=`click.dismiss${xt}`,Ig=`mousedown.dismiss${xt}`,Ng=`keydown.dismiss${xt}`,Mg=`click${xt}${Ag}`,Ba="modal-open",Rg="fade",Wa="show",Ko="modal-static",kg=".modal.show",Fg=".modal-dialog",$g=".modal-body",jg='[data-bs-toggle="modal"]',Vg={backdrop:!0,focus:!0,keyboard:!0},Ug={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},_t=class extends pt{constructor(e,n){super(e,n),this._dialog=W.findOne(Fg,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Gi,this._addEventListeners()}static get Default(){return Vg}static get DefaultType(){return Ug}static get NAME(){return wg}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||g.trigger(this._element,Al,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ba),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||g.trigger(this._element,Og).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Wa),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(let e of[window,this._dialog])g.off(e,xt);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new zr({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Jr({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let n=W.findOne($g,this._dialog);n&&(n.scrollTop=0),Ki(this._element),this._element.classList.add(Wa);let i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,g.trigger(this._element,xg,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){g.on(this._element,Ng,e=>{if(e.key===Sg){if(this._config.keyboard){e.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),g.on(window,Lg,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),g.on(this._element,Ig,e=>{g.one(this._element,Dg,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ba),this._resetAdjustments(),this._scrollBar.reset(),g.trigger(this._element,Cl)})}_isAnimated(){return this._element.classList.contains(Rg)}_triggerBackdropTransition(){if(g.trigger(this._element,Pg).defaultPrevented)return;let n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(Ko)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Ko),this._queueCallback(()=>{this._element.classList.remove(Ko),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!e){let r=Et()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&e){let r=Et()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){let i=_t.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](n)}})}};g.on(document,Mg,jg,function(t){let e=Zt(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),g.one(e,Al,r=>{r.defaultPrevented||g.one(e,Cl,()=>{_i(this)&&this.focus()})});let n=W.findOne(kg);n&&_t.getInstance(n).hide(),_t.getOrCreateInstance(e).toggle(this)});Kr(_t);Tt(_t);var Hg="offcanvas",qg="bs.offcanvas",nn=`.${qg}`,Sl=".data-api",Bg=`load${nn}${Sl}`,Wg="Escape",za="show",Ga="showing",Ja="hiding",zg="offcanvas-backdrop",Ol=".offcanvas.show",Gg=`show${nn}`,Jg=`shown${nn}`,Kg=`hide${nn}`,Ka=`hidePrevented${nn}`,Pl=`hidden${nn}`,Yg=`resize${nn}`,Xg=`click${nn}${Sl}`,Qg=`keydown.dismiss${nn}`,Zg='[data-bs-toggle="offcanvas"]',eb={backdrop:!0,keyboard:!0,scroll:!1},tb={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},Rt=class extends pt{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return eb}static get DefaultType(){return tb}static get NAME(){return Hg}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||g.trigger(this._element,Gg,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Gi().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ga);let i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(za),this._element.classList.remove(Ga),g.trigger(this._element,Jg,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||g.trigger(this._element,Kg).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ja),this._backdrop.hide();let n=()=>{this._element.classList.remove(za,Ja),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Gi().reset(),g.trigger(this._element,Pl)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let e=()=>{if(this._config.backdrop==="static"){g.trigger(this._element,Ka);return}this.hide()},n=!!this._config.backdrop;return new zr({className:zg,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new Jr({trapElement:this._element})}_addEventListeners(){g.on(this._element,Qg,e=>{if(e.key===Wg){if(!this._config.keyboard){g.trigger(this._element,Ka);return}this.hide()}})}static jQueryInterface(e){return this.each(function(){let n=Rt.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}};g.on(document,Xg,Zg,function(t){let e=Zt(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),gn(this))return;g.one(e,Pl,()=>{_i(this)&&this.focus()});let n=W.findOne(Ol);n&&n!==e&&Rt.getInstance(n).hide(),Rt.getOrCreateInstance(e).toggle(this)});g.on(window,Bg,()=>{for(let t of W.find(Ol))Rt.getOrCreateInstance(t).show()});g.on(window,Yg,()=>{for(let t of W.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Rt.getOrCreateInstance(t).hide()});Kr(Rt);Tt(Rt);var nb=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ib=/^aria-[\w-]*$/i,rb=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,ob=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,sb=(t,e)=>{let n=t.nodeName.toLowerCase();return e.includes(n)?nb.has(n)?!!(rb.test(t.nodeValue)||ob.test(t.nodeValue)):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(n))},xl={"*":["class","dir","id","lang","role",ib],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function ab(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);let r=new window.DOMParser().parseFromString(t,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(let s of o){let a=s.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){s.remove();continue}let l=[].concat(...s.attributes),f=[].concat(e["*"]||[],e[a]||[]);for(let c of l)sb(c,f)||s.removeAttribute(c.nodeName)}return r.body.innerHTML}var lb="TemplateFactory",cb={allowList:xl,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ub={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},db={entry:"(string|element|function|null)",selector:"(string|element)"},os=class extends qn{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return cb}static get DefaultType(){return ub}static get NAME(){return lb}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){let e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(let[r,o]of Object.entries(this._config.content))this._setContent(e,o,r);let n=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(let[n,i]of Object.entries(e))super._typeCheckConfig({selector:n,entry:i},db)}_setContent(e,n,i){let r=W.findOne(i,e);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(en(n)){this._putElementInTemplate(mn(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(e){return this._config.sanitize?ab(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}},pb="tooltip",fb=new Set(["sanitize","allowList","sanitizeFn"]),Yo="fade",hb="modal",Vr="show",mb=".tooltip-inner",Ya=`.${hb}`,Xa="hide.bs.modal",zi="hover",Xo="focus",gb="click",bb="manual",vb="hide",yb="hidden",Eb="show",_b="shown",Tb="inserted",wb="click",Cb="focusin",Ab="focusout",Sb="mouseenter",Ob="mouseleave",Pb={AUTO:"auto",TOP:"top",RIGHT:Et()?"left":"right",BOTTOM:"bottom",LEFT:Et()?"right":"left"},xb={allowList:xl,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Lb={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},bn=class extends pt{constructor(e,n){if(typeof kr>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return xb}static get DefaultType(){return Lb}static get NAME(){return pb}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),g.off(this._element.closest(Ya),Xa,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let e=g.trigger(this._element,this.constructor.eventName(Eb)),i=(al(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();let r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));let{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(r),g.trigger(this._element,this.constructor.eventName(Tb))),this._popper=this._createPopper(r),r.classList.add(Vr),"ontouchstart"in document.documentElement)for(let a of[].concat(...document.body.children))g.on(a,"mouseover",Wr);let s=()=>{g.trigger(this._element,this.constructor.eventName(_b)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(s,this.tip,this._isAnimated())}hide(){if(!this._isShown()||g.trigger(this._element,this.constructor.eventName(vb)).defaultPrevented)return;if(this._getTipElement().classList.remove(Vr),"ontouchstart"in document.documentElement)for(let r of[].concat(...document.body.children))g.off(r,"mouseover",Wr);this._activeTrigger[gb]=!1,this._activeTrigger[Xo]=!1,this._activeTrigger[zi]=!1,this._isHovered=null;let i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),g.trigger(this._element,this.constructor.eventName(yb)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){let n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(Yo,Vr),n.classList.add(`bs-${this.constructor.NAME}-auto`);let i=gh(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(Yo),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new os({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[mb]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Yo)}_isShown(){return this.tip&&this.tip.classList.contains(Vr)}_createPopper(e){let n=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,i=Pb[n.toUpperCase()];return Bi(this._element,e,this._getPopperConfig(i))}_getOffset(){let{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){let n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...typeof this._config.popperConfig=="function"?this._config.popperConfig(n):this._config.popperConfig}}_setListeners(){let e=this._config.trigger.split(" ");for(let n of e)if(n==="click")g.on(this._element,this.constructor.eventName(wb),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(n!==bb){let i=n===zi?this.constructor.eventName(Sb):this.constructor.eventName(Cb),r=n===zi?this.constructor.eventName(Ob):this.constructor.eventName(Ab);g.on(this._element,i,this._config.selector,o=>{let s=this._initializeOnDelegatedTarget(o);s._activeTrigger[o.type==="focusin"?Xo:zi]=!0,s._enter()}),g.on(this._element,r,this._config.selector,o=>{let s=this._initializeOnDelegatedTarget(o);s._activeTrigger[o.type==="focusout"?Xo:zi]=s._element.contains(o.relatedTarget),s._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},g.on(this._element.closest(Ya),Xa,this._hideModalHandler)}_fixTitle(){let e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){let n=tn.getDataAttributes(this._element);for(let i of Object.keys(n))fb.has(i)&&delete n[i];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:mn(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){let e={};for(let n in this._config)this.constructor.Default[n]!==this._config[n]&&(e[n]=this._config[n]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){let n=bn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}};Tt(bn);var Db="popover",Ib=".popover-header",Nb=".popover-body",Mb={...bn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Rb={...bn.DefaultType,content:"(null|string|element|function)"},Ji=class extends bn{static get Default(){return Mb}static get DefaultType(){return Rb}static get NAME(){return Db}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Ib]:this._getTitle(),[Nb]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){let n=Ji.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}};Tt(Ji);var kb="scrollspy",Fb="bs.scrollspy",cs=`.${Fb}`,$b=".data-api",jb=`activate${cs}`,Qa=`click${cs}`,Vb=`load${cs}${$b}`,Ub="dropdown-item",fi="active",Hb='[data-bs-spy="scroll"]',Qo="[href]",qb=".nav, .list-group",Za=".nav-link",Bb=".nav-item",Wb=".list-group-item",zb=`${Za}, ${Bb} > ${Za}, ${Wb}`,Gb=".dropdown",Jb=".dropdown-toggle",Kb={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Yb={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},Ei=class extends pt{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Kb}static get DefaultType(){return Yb}static get NAME(){return kb}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=mn(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(g.off(this._config.target,Qa),g.on(this._config.target,Qa,Qo,e=>{let n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();let i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){let e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){let n=s=>this._targetLinks.get(`#${s.target.id}`),i=s=>{this._previousScrollData.visibleEntryTop=s.target.offsetTop,this._process(n(s))},r=(this._rootElement||document.documentElement).scrollTop,o=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(let s of e){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(s));continue}let a=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&a){if(i(s),!r)return;continue}!o&&!a&&i(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let e=W.find(Qo,this._config.target);for(let n of e){if(!n.hash||gn(n))continue;let i=W.findOne(n.hash,this._element);_i(i)&&(this._targetLinks.set(n.hash,n),this._observableSections.set(n.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(fi),this._activateParents(e),g.trigger(this._element,jb,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(Ub)){W.findOne(Jb,e.closest(Gb)).classList.add(fi);return}for(let n of W.parents(e,qb))for(let i of W.prev(n,zb))i.classList.add(fi)}_clearActiveClass(e){e.classList.remove(fi);let n=W.find(`${Qo}.${fi}`,e);for(let i of n)i.classList.remove(fi)}static jQueryInterface(e){return this.each(function(){let n=Ei.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}};g.on(window,Vb,()=>{for(let t of W.find(Hb))Ei.getOrCreateInstance(t)});Tt(Ei);var Xb="tab",Qb="bs.tab",Gn=`.${Qb}`,Zb=`hide${Gn}`,ev=`hidden${Gn}`,tv=`show${Gn}`,nv=`shown${Gn}`,iv=`click${Gn}`,rv=`keydown${Gn}`,ov=`load${Gn}`,sv="ArrowLeft",el="ArrowRight",av="ArrowUp",tl="ArrowDown",Hn="active",nl="fade",Zo="show",lv="dropdown",cv=".dropdown-toggle",uv=".dropdown-menu",es=":not(.dropdown-toggle)",dv='.list-group, .nav, [role="tablist"]',pv=".nav-item, .list-group-item",fv=`.nav-link${es}, .list-group-item${es}, [role="tab"]${es}`,Ll='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ts=`${fv}, ${Ll}`,hv=`.${Hn}[data-bs-toggle="tab"], .${Hn}[data-bs-toggle="pill"], .${Hn}[data-bs-toggle="list"]`,vn=class extends pt{constructor(e){super(e),this._parent=this._element.closest(dv),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),g.on(this._element,rv,n=>this._keydown(n)))}static get NAME(){return Xb}show(){let e=this._element;if(this._elemIsActive(e))return;let n=this._getActiveElem(),i=n?g.trigger(n,Zb,{relatedTarget:e}):null;g.trigger(e,tv,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(Hn),this._activate(Zt(e));let i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Zo);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),g.trigger(e,nv,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(nl))}_deactivate(e,n){if(!e)return;e.classList.remove(Hn),e.blur(),this._deactivate(Zt(e));let i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Zo);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),g.trigger(e,ev,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(nl))}_keydown(e){if(![sv,el,av,tl].includes(e.key))return;e.stopPropagation(),e.preventDefault();let n=[el,tl].includes(e.key),i=ss(this._getChildren().filter(r=>!gn(r)),e.target,n,!0);i&&(i.focus({preventScroll:!0}),vn.getOrCreateInstance(i).show())}_getChildren(){return W.find(ts,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(let i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);let n=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",n),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){let n=Zt(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,n){let i=this._getOuterElement(e);if(!i.classList.contains(lv))return;let r=(o,s)=>{let a=W.findOne(o,i);a&&a.classList.toggle(s,n)};r(cv,Hn),r(uv,Zo),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,i){e.hasAttribute(n)||e.setAttribute(n,i)}_elemIsActive(e){return e.classList.contains(Hn)}_getInnerElement(e){return e.matches(ts)?e:W.findOne(ts,e)}_getOuterElement(e){return e.closest(pv)||e}static jQueryInterface(e){return this.each(function(){let n=vn.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}};g.on(document,iv,Ll,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!gn(this)&&vn.getOrCreateInstance(this).show()});g.on(window,ov,()=>{for(let t of W.find(hv))vn.getOrCreateInstance(t)});Tt(vn);var mv="toast",gv="bs.toast",_n=`.${gv}`,bv=`mouseover${_n}`,vv=`mouseout${_n}`,yv=`focusin${_n}`,Ev=`focusout${_n}`,_v=`hide${_n}`,Tv=`hidden${_n}`,wv=`show${_n}`,Cv=`shown${_n}`,Av="fade",il="hide",Ur="show",Hr="showing",Sv={animation:"boolean",autohide:"boolean",delay:"number"},Ov={animation:!0,autohide:!0,delay:5e3},yn=class extends pt{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ov}static get DefaultType(){return Sv}static get NAME(){return mv}show(){if(g.trigger(this._element,wv).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Av);let n=()=>{this._element.classList.remove(Hr),g.trigger(this._element,Cv),this._maybeScheduleHide()};this._element.classList.remove(il),Ki(this._element),this._element.classList.add(Ur,Hr),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||g.trigger(this._element,_v).defaultPrevented)return;let n=()=>{this._element.classList.add(il),this._element.classList.remove(Hr,Ur),g.trigger(this._element,Tv)};this._element.classList.add(Hr),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ur),super.dispose()}isShown(){return this._element.classList.contains(Ur)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}let i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){g.on(this._element,bv,e=>this._onInteraction(e,!0)),g.on(this._element,vv,e=>this._onInteraction(e,!1)),g.on(this._element,yv,e=>this._onInteraction(e,!0)),g.on(this._element,Ev,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){let n=yn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}};Kr(yn);Tt(yn);var Il=Oo(Dl());var Qi={modalBodyConfirm:null,buttonConfirmed:null,toastContainer:null};function Nl(){ee(Qi)}var we=function(t,e,n,i,...r){let o=t.insertRow();return o.id=e,Zi(o,e,e,0),r.forEach(s=>{Zi(o,s)}),n&&o.classList.add("table-active"),i&&Pv(o),o};function Xr(t,e,n,i){let r=t.insertCell(0);r.style.verticalAlign="middle";let o=document.createElement("input");o.type="checkbox",o.id=e,o.checked=n,o.onchange=i,r.append(o)}function Zi(t,e,n=null,i=-1){let r=t.insertCell(i);return r.innerHTML=e,r.setAttribute("data-bs-toggle","tooltip"),r.title=n!=null?n:e,r}function Pv(t){let e=t.insertCell();e.style.textAlign="right";let n=document.createElement("button");n.classList.add("btn","btn-sm"),n.style.padding=0,n.innerHTML='<i class="bi bi-clipboard"></i>',n.onclick=i=>{let r=i.currentTarget.parentNode.previousSibling;navigator.clipboard.writeText(r.innerText)},e.appendChild(n)}function Qr(t,e){let n=document.createElement("th");n.innerHTML=e,t.appendChild(n)}function Ml(t,e){t.innerHTML="",e.forEach(n=>{let i=document.createElement("option");i.text=n,t.appendChild(i)})}function rn(t,e,n=!1){e.forEach(i=>{let r=document.createElement("li");r.innerHTML=n?`<h6 class="dropdown-header">${i}</h6>`:`<a class="dropdown-item" href="#">${i}</a>`,t.appendChild(r)})}function Zr(t,e,n,i,r){let o="tab"+Math.random().toString(36).replace("0.",""),s=document.createElement("li");s.classList.add("nav-item"),r&&(s.setAttribute("data-bs-toggle","tooltip"),s.setAttribute("title",r)),s.innerHTML=`<a class="nav-link" data-bs-toggle="tab" data-bs-target="#${o}">${n}</a>`,t.appendChild(s);let a=document.createElement("template");return a.innerHTML=i,a.content.firstElementChild.id=o,e.appendChild(a.content.firstElementChild),o}function ee(t,e=document){Object.keys(t).forEach(n=>{if(t[n]=e.getElementById(n),!t[n])throw new Error(`Element ${n} not found.`)})}function wt(t,e,n=""){let i=document.createElement("div");i.classList.add("toast"),i.innerHTML=`<div class="toast-header alert-danger">
  <i class="bi me-2 bi-exclamation-triangle-fill"></i>
  <strong class="me-auto">${e!=null?e:"Error"}</strong>
  <small>${n}</small>
  <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
  <div class="toast-body">${t}</div>`,Qi.toastContainer.appendChild(i),i.addEventListener("hidden.bs.toast",()=>{i.remove()}),new yn(i).show()}function xv(t){this.message=t,this.name="UserException"}function D(t,e,n){if(n&&n.classList.remove("is-invalid"),!t)throw n?(n.parentNode.getElementsByClassName("invalid-feedback")[0].innerHTML=e,n.classList.add("is-invalid")):wt(e,"Error"),new xv(e)}function er(t,e){return e?t.replace("T"," ").replace("Z","").replace("."," "):t.split(".")[0].replace("T"," ")}var Xi;function Tn(t,e,n){Xi=Xi!=null?Xi:new _t("#modalConfirm"),Qi.modalBodyConfirm.innerHTML=t,Qi.buttonConfirmed.innerText=e,Qi.buttonConfirmed.onclick=n,Xi.show()}function Ce(t,e,n){let i=ace.edit(t);return i.session.setMode(e),n&&(i.setReadOnly(!0),i.renderer.setShowGutter(!1)),i}function Rl(t,e,n){return new Il.default({selector:t,data:{src:e,keys:["label","group"]},placeHolder:n,resultsList:{class:"dropdown-menu show",maxResults:30},resultItem:{class:"dropdown-item",highlight:!0,element:(i,r)=>{i.style="display: flex;",i.innerHTML=`<span style="flex-grow: 1;" >${r.key==="label"?r.match:r.value.label}</span>
            <span style="color: 3a8c9a;" class="fw-light fst-italic ms-1">
              ${r.key==="group"?r.match:r.value.group}</span>`}},events:{input:{results:()=>{Array.from(document.getElementsByClassName("resizable_pane")).forEach(i=>{i.style.overflow="unset"})},close:()=>{Array.from(document.getElementsByClassName("resizable_pane")).forEach(i=>{i.style.overflow="auto"})}}}})}function kt(t,e){t.addEventListener("click",()=>{e.classList.remove("is-invalid")})}function wi(t,e){Array.from(t.rows).forEach(n=>{e(n)?n.classList.add("table-active"):n.classList.remove("table-active")})}var kl={local_ditto:{api_uri:"http://localhost:8080",ditto_version:3,bearer:null,bearerDevOps:null,defaultUsernamePassword:"ditto:ditto",defaultDittoPreAuthenticatedUsername:null,defaultUsernamePasswordDevOps:"devops:foobar",mainAuth:"basic",devopsAuth:"basic"},local_ditto_ide:{api_uri:"http://localhost:8080",ditto_version:3,bearer:null,bearerDevOps:null,defaultUsernamePassword:null,defaultDittoPreAuthenticatedUsername:"pre:ditto",defaultUsernamePasswordDevOps:"devops:foobar",mainAuth:"pre",devopsAuth:"basic"},ditto_sandbox:{api_uri:"https://ditto.eclipseprojects.io",ditto_version:3,bearer:null,bearerDevOps:null,defaultUsernamePassword:"ditto:ditto",defaultDittoPreAuthenticatedUsername:null,defaultUsernamePasswordDevOps:null,mainAuth:"basic",devopsAuth:null,disableConnections:!0,disableOperations:!0}};var Fl=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5>Environments</h5>
<hr />
<div class="row resizable_pane" style="height: 80vh">
    <div class="col-md-4 resizable_flex_column">
        <div class="input-group has-validation">
            <input class="form-control" id="tableValidationEnvironments" hidden="true"></input>
            <div class="invalid-feedback"></div>
        </div>
        <div class="table-wrap">
            <table class="table table-striped table-hover table-sm">
                <tbody id="tbodyEnvironments"></tbody>
            </table>
        </div>
    </div>
    <div class="col-md-8 resizable_flex_column">
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabEnvDetails">CRUD Environment</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabEnvJson">Environment JSON</a>
            </li>
        </ul>
        <div class="tab-content" style="flex-grow: 1; overflow: hidden;">
            <div class="tab-pane container active no-margin" id="tabEnvDetails">
                <crud-toolbar label="Name" id="crudEnvironmentFields" allowIdChange>
                    <div class="input-group input-group-sm mt-1">
                        <label class="input-group-text" data-bs-toggle="tooltip"
                            title="URI including protocol, host and port (e.g. http://localhost:8080)">API URI</label>
                        <input type="text" class="form-control form-control-sm" id="inputApiUri" disabled></input>
                    </div>
                    <div class="input-group input-group-sm mt-1">
                        <label class="input-group-text" data-bs-toggle="tooltip"
                            title="A comma-separated list of namespaces (e.g. com.example.namespace). The given namespaces are used as a parameter for the Things search">Search Namespaces</label>
                        <input type="text" class="form-control form-control-sm" spellcheck="false" id="inputSearchNamespaces" disabled></input>
                    </div>
                    <div class="input-group input-group-sm mt-1 mb-3">
                        <label class="input-group-text">Ditto Version</label>
                        <select class="form-select form-select-sm" id="selectDittoVersion" disabled>
                            <option selecte value="3">3</option>
                            <option value="2">2</option>
                        </select>
                    </div>    
                    <label class="form-label">Optional Tabs</label>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabPolicies" disabled>
                        <label class="form-check-label" for="inputTabPolicies">Policies</label>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabConnections" disabled>
                        <label class="form-check-label" for="inputTabConnections">Connections</label>
                      </div>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="inputTabOperations" disabled>
                        <label class="form-check-label" for="inputTabOperations">Operations</label>
                      </div>
            </crud-toolbar>
            </div>
            <div class="tab-pane container no-margin" id="tabEnvJson">
                <crud-toolbar label="Name" id="crudEnvironmentJson" allowIdChange>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div>
                            <div class="script_editor" id="settingsEditor"></div>
                        </div>
                    </div>
                </crud-toolbar>
            </div>
        </div>
    </div>
</div>`;var Hl="primaryEnvironmentName",Iv="environmentsURL",ql="ditto-ui-env",tr,Se,Ae,wn,x={environmentSelector:null,tbodyEnvironments:null,tableValidationEnvironments:null,crudEnvironmentFields:null,crudEnvironmentJson:null,inputApiUri:null,inputSearchNamespaces:null,selectDittoVersion:null,inputTabPolicies:null,inputTabConnections:null,inputTabOperations:null},Bl=[];document.getElementById("environmentsHTML").innerHTML=Fl;function fs(t){Object.assign(this,t),Object.defineProperties(this,{bearer:{enumerable:!1,writable:!0},bearerDevOps:{enumerable:!1,writable:!0},usernamePassword:{value:this.defaultUsernamePassword,enumerable:!1,writable:!0},usernamePasswordDevOps:{value:this.defaultUsernamePasswordDevOps,enumerable:!1,writable:!0},dittoPreAuthenticatedUsername:{value:this.defaultDittoPreAuthenticatedUsername,enumerable:!1,writable:!0}})}function v(){return Se[x.environmentSelector.value]}function Ft(t){Bl.push(t)}function Wl(t){Gl(t),Bl.forEach(e=>e.call(null,t))}function zl(){return he(this,null,function*(){ee(x),kt(x.tbodyEnvironments,x.tableValidationEnvironments),tr=new URLSearchParams(window.location.search),Se=yield Rv(),wn=Ce("settingsEditor","ace/mode/json",!0),x.tbodyEnvironments.addEventListener("click",Mv),x.crudEnvironmentJson.addEventListener("onCreateClick",jl),x.crudEnvironmentJson.addEventListener("onUpdateClick",Vl),x.crudEnvironmentJson.addEventListener("onDeleteClick",$l),x.crudEnvironmentJson.addEventListener("onEditToggle",Ul),x.crudEnvironmentFields.addEventListener("onCreateClick",jl),x.crudEnvironmentFields.addEventListener("onUpdateClick",Vl),x.crudEnvironmentFields.addEventListener("onDeleteClick",$l),x.crudEnvironmentFields.addEventListener("onEditToggle",Ul),x.environmentSelector.onchange=Nv,document.querySelector('a[data-bs-target="#tabEnvJson"]').addEventListener("shown.bs.tab",()=>{wn.renderer.updateFull()}),st()})}function Nv(){tr.set(Hl,x.environmentSelector.value),window.history.replaceState({},"",`${window.location.pathname}?${tr}`),Wl()}function $l(){D(Ae,"No environment selected",x.tableValidationEnvironments),D(Object.keys(Se).length>=2,"At least one environment is required",x.tableValidationEnvironments),delete Se[Ae],Ae=null,st()}function jl(t){var e,n;D(t.target.idValue,"Environment name must not be empty",t.target.validationElement),D(!Se[t.target.idValue],"Environment name already used",t.target.validationElement),t.target===x.crudEnvironmentFields?Se[t.target.idValue]=new fs({api_uri:(e=x.inputApiUri.value)!=null?e:"",searchNamespaces:(n=x.inputSearchNamespaces.value)!=null?n:"",ditto_version:x.selectDittoVersion.value?x.selectDittoVersion.value:"3"}):Se[t.target.idValue]=new fs(JSON.parse(wn.getValue())),Ae=t.target.idValue,t.target.toggleEdit(),st()}function Mv(t){t.target&&t.target.tagName==="TD"&&(Ae&&Ae===t.target.parentNode.id?Ae=null:Ae=t.target.parentNode.id,hs())}function Vl(t){Ae!==t.target.idValue&&e(),t.target===x.crudEnvironmentFields?(Se[Ae].api_uri=x.inputApiUri.value,Se[Ae].searchNamespaces=x.inputSearchNamespaces.value,Se[Ae].ditto_version=x.selectDittoVersion.value,Se[Ae].disablePolicies=!x.inputTabPolicies.checked,Se[Ae].disableConnections=!x.inputTabConnections.checked,Se[Ae].disableOperations=!x.inputTabOperations.checked):Se[Ae]=JSON.parse(wn.getValue()),t.target.toggleEdit(),st();function e(){Se[t.target.idValue]=Se[Ae],delete Se[Ae],Ae=t.target.idValue}}function st(t){Se&&localStorage.setItem(ql,JSON.stringify(Se)),e(),hs(),n(),Wl(t);function e(){let i=x.environmentSelector.value;i||(i=tr.get(Hl)),(!i||!Se[i])&&(i=Object.keys(Se)[0]),Ml(x.environmentSelector,Object.keys(Se)),x.environmentSelector.value=i}function n(){x.tbodyEnvironments.innerHTML="",Object.keys(Se).forEach(i=>{we(x.tbodyEnvironments,i,i===Ae)})}}function hs(){var t;if(Ae){let e=Se[Ae];x.crudEnvironmentFields.idValue=Ae,x.crudEnvironmentJson.idValue=Ae,wn.setValue(JSON.stringify(e,null,2),-1),x.inputApiUri.value=e.api_uri,x.inputSearchNamespaces.value=(t=e.searchNamespaces)!=null?t:"",x.selectDittoVersion.value=e.ditto_version?e.ditto_version:"3",x.inputTabPolicies.checked=!e.disablePolicies,x.inputTabConnections.checked=!e.disableConnections,x.inputTabOperations.checked=!e.disableOperations}else x.crudEnvironmentFields.idValue=null,x.crudEnvironmentJson.idValue=null,wn.setValue(""),x.inputApiUri.value=null,x.inputSearchNamespaces.value=null,x.selectDittoVersion.value=3,x.inputTabPolicies.checked=!0,x.inputTabConnections.checked=!0,x.inputTabOperations.checked=!0}function Rv(){return he(this,null,function*(){let t,e,n=tr.get(Iv);if(n)try{let a=yield fetch(n);if(!a.ok)throw new Error(`URL ${n} can not be loaded`);t=yield a.json(),o(t)}catch(a){t=null,wt(a.message,"Error loading environments from URL")}let i=localStorage.getItem(ql);i&&(e=JSON.parse(i));let r;return t?e?r=s(t,e):r=t:e?r=e:r=kl,Object.keys(r).forEach(a=>{r[a]=new fs(r[a])}),r;function o(a){Object.keys(a).forEach(l=>{if(!a[l].hasOwnProperty("api_uri"))throw new SyntaxError("Environments json invalid")})}function s(a,l){let f={};return Object.keys(a).forEach(c=>{f[c]=dn(dn({},l[c]),a[c])}),dn(dn({},l),f)}})}function Ul(t){x.inputApiUri.disabled=!t.detail.isEditing,x.inputSearchNamespaces.disabled=!t.detail.isEditing,x.selectDittoVersion.disabled=!t.detail.isEditing,x.inputTabPolicies.disabled=!t.detail.isEditing,x.inputTabConnections.disabled=!t.detail.isEditing,x.inputTabOperations.disabled=!t.detail.isEditing,wn.setReadOnly(!t.detail.isEditing),wn.renderer.setShowGutter(t.detail.isEditing),t.detail.isEditing||hs()}var Kl=Oo(Jl());var kv={things:{listConnections:{path:"/api/2/solutions/{{solutionId}}/connections",method:"GET",body:null,unwrapJsonPath:null},retrieveConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"GET",body:null,unwrapJsonPath:null},createConnection:{path:"/api/2/solutions/{{solutionId}}/connections",method:"POST",body:null,unwrapJsonPath:null},modifyConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"PUT",body:null,unwrapJsonPath:null},deleteConnection:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}",method:"DELETE",body:null,unwrapJsonPath:null},retrieveStatus:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/status",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionLogs:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/logs",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionMetrics:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/metrics",method:"GET",body:null,unwrapJsonPath:null},connectionCommand:{path:"/api/2/solutions/{{solutionId}}/connections/{{connectionId}}/command",method:"POST",body:null,unwrapJsonPath:null}},ditto_3:{listConnections:{path:"/api/2/connections",method:"GET",body:null,unwrapJsonPath:null},retrieveConnection:{path:"/api/2/connections/{{connectionId}}",method:"GET",body:null,unwrapJsonPath:null},createConnection:{path:"/api/2/connections",method:"POST",body:null,unwrapJsonPath:null},modifyConnection:{path:"/api/2/connections/{{connectionId}}",method:"PUT",body:null,unwrapJsonPath:null},deleteConnection:{path:"/api/2/connections/{{connectionId}}",method:"DELETE",body:null,unwrapJsonPath:null},retrieveStatus:{path:"/api/2/connections/{{connectionId}}/status",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionLogs:{path:"/api/2/connections/{{connectionId}}/logs",method:"GET",body:null,unwrapJsonPath:null},retrieveConnectionMetrics:{path:"/api/2/connections/{{connectionId}}/metrics",method:"GET",body:null,unwrapJsonPath:null},connectionCommand:{path:"/api/2/connections/{{connectionId}}/command",method:"POST",body:null,unwrapJsonPath:null}},ditto_2:{listConnections:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/user/connectivityRoot/connectionIdsRetrieval/singleton",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveAllConnectionIds"}},unwrapJsonPath:"?.?.connectionIds"},retrieveConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveConnection",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?.connection"},createConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:createConnection",connection:"{{connectionJson}}"}},unwrapJsonPath:"?.?.connection"},modifyConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:modifyConnection",connection:"{{connectionJson}}"}},unwrapJsonPath:null},deleteConnection:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:deleteConnection",connectionId:"{{connectionId}}"}},unwrapJsonPath:null},retrieveStatus:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1},piggybackCommand:{type:"connectivity.commands:retrieveConnectionStatus",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},retrieveConnectionLogs:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"connectivity.commands:retrieveConnectionLogs",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},retrieveConnectionMetrics:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"connectivity.commands:retrieveConnectionMetrics",connectionId:"{{connectionId}}"}},unwrapJsonPath:"?.?"},connectionCommand:{path:"/devops/piggyback/connectivity",method:"POST",body:{targetActorSelection:"/system/sharding/connection",headers:{aggregate:!1,"is-group-topic":!0},piggybackCommand:{type:"{{command}}",connectionId:"{{connectionId}}"}},unwrapJsonPath:null}}},$t,jt;function bs(t){t?v().devopsAuth==="basic"?($t="Authorization",jt="Basic "+window.btoa(v().usernamePasswordDevOps)):v().devopsAuth==="bearer"?($t="Authorization",jt="Bearer "+v().bearerDevOps):($t="Basic",jt=""):v().mainAuth==="basic"?($t="Authorization",jt="Basic "+window.btoa(v().usernamePassword)):v().mainAuth==="pre"?($t="x-ditto-pre-authenticated",jt=v().dittoPreAuthenticatedUsername):v().mainAuth==="bearer"?($t="Authorization",jt="Bearer "+v().bearer):($t="Basic",jt="")}function de(t,e,n,i,r=!1,o=!1){return he(this,null,function*(){let s;try{s=yield fetch(v().api_uri+(o?"":"/api/2")+e,dn({method:t,headers:dn({"Content-Type":"application/json",[$t]:jt},i)},n&&{body:JSON.stringify(n)}))}catch(a){throw wt(a),a}if(!s.ok)throw s.json().then(a=>{wt(a.message,a.error,a.status)}).catch(a=>{wt("No error details from Ditto",s.statusText,s.status)}),new Error("An error occurred: "+s.status);return s.status!==204?r?s:s.json():null})}function vs(t,e){return new Kl.EventSourcePolyfill(`${v().api_uri}/api/2/things?ids=${t}${e?"&"+e:""}`,{headers:{[$t]:jt}})}function ze(t,e,n,i,r){return he(this,null,function*(){D(Jn()!=="things"||v().solutionId,"No solutionId configured in environment");let o=kv[Jn()][t],s;try{s=yield fetch(v().api_uri+o.path.replace("{{solutionId}}",v().solutionId).replace("{{connectionId}}",n),{method:o.method,headers:{"Content-Type":t==="connectionCommand"?"text/plain":"application/json",[$t]:jt},body:o.body?JSON.stringify(o.body).replace("{{connectionId}}",n).replace('"{{connectionJson}}"',JSON.stringify(i)).replace("{{command}}",r):i?JSON.stringify(i):r})}catch(a){throw wt(a),a}if(!s.ok)throw s.json().then(a=>{wt(a.description,a.message,a.status)}).catch(a=>{wt("No error details from Ditto",s.statusText,s.status)}),new Error("An error occured: "+s.status);t!=="connectionCommand"&&s.status!==204?(document.body.style.cursor="progress",s.json().then(a=>{if(a&&a["?"]&&a["?"]["?"].status>=400){let l=a["?"]["?"].payload;wt(l.description,l.message,l.status)}else o.unwrapJsonPath&&o.unwrapJsonPath.split(".").forEach(function(l){l==="?"&&(l=Object.keys(a)[0]),a=a[l]}),e(a)}).catch(a=>{throw wt("Error calling connections API",a),a}).finally(()=>{document.body.style.cursor="default"})):e&&e()})}function Jn(){return v().api_uri.startsWith("https://things")?"things":v().ditto_version==="2"?"ditto_2":"ditto_3"}var Yl=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div id="authorizationModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Authorize
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <h5>Main authentication</h5>
                    <hr />
                    <div class="row">
                        <div class="col-md-5">
                            <input type="radio" id="main-userpass" name="main-auth" value="basic"></input>
                            <label for="main-userpass">Basic</label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="userName" class="input-group-text">Username</label>
                                <input type="text" class="form-control form-control-sm" id="userName"></input>
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <label for="password" class="input-group-text">Password</label>
                                <input type="password" class="form-control form-control-sm" id="password"></input>
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2">
                        <div class="col-md-5">
                            <input type="radio" id="main-bearer" name="main-auth" value="bearer"></input>
                            <label for="main-bearer">Bearer<br /><small>(JWT OAuth2.0 Bearer token)</small></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="bearer" class="input-group-text">Bearer</label>
                                <input type="password" class="form-control form-control-sm" id="bearer"></input>
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2">
                        <div class="col-md-5">
                            <input type="radio" id="main-pre" name="main-auth" value="pre"></input>
                            <label for="main-pre">Pre authenticated<br />
                                <small>(via HTTP header 'x-ditto-pre-authenticated', must take the form
                                    <code>prefix:suffix</code>)</small>
                            </label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="dittoPreAuthenticatedUsername" class="input-group-text">prefix:suffix</label>
                                <input type="text" class="form-control form-control-sm" id="dittoPreAuthenticatedUsername"></input>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <h5>DevOps authentication</h5>
                    <small>(for Connections and administrative tasks, optional)</small>
                    <hr />
                    <div class="row">
                        <div class="col-md-5">
                            <input type="radio" id="devops-userpass" name="devops-auth" value="basic"></input>
                            <label for="devops-userpass">Basic<br /></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="devOpsUserName" class="input-group-text">DevOps Username</label>
                                <input type="text" class="form-control form-control-sm" id="devOpsUserName"></input>
                            </div>
                            <div class="input-group input-group-sm mb-1">
                                <label for="devOpsPassword" class="input-group-text">DevOps Password</label>
                                <input type="password" class="form-control form-control-sm" id="devOpsPassword"></input>
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2">
                        <div class="col-md-5">
                            <input type="radio" id="devops-bearer" name="devops-auth" value="bearer"></input>
                            <label for="devops-bearer">Bearer<br /><small>(JWT OAuth2.0 Bearer token)</small></label>
                        </div>
                        <div class="col-md-7">
                            <div class="input-group input-group-sm mb-1">
                                <label for="bearerDevOps" class="input-group-text">DevOps Bearer</label>
                                <input type="password" class="form-control form-control-sm" id="bearerDevOps"></input>
                            </div>
                            <div class="input-group input-group-sm mb-1">
                        </div>
                    </div>
                    </div>
                </div>
                <div class="input-group input-group-sm" style="flex-direction: row-reverse;">
                    <button class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal"
                        id="authorizeSubmit">Authorize</button>
                </div>
            </div>
        </div>
    </div>
</div>
`;var ye={bearer:null,userName:null,password:null,bearerDevOps:null,devOpsUserName:null,devOpsPassword:null,dittoPreAuthenticatedUsername:null,collapseConnections:null},ys=!1;document.getElementById("authorizationHTML").innerHTML=Yl;function Xl(t){ys=t,bs(ys)}function Ql(){ee(ye),document.getElementById("authorize").onclick=()=>{let t=v().mainAuth,e=v().devopsAuth;t||(ye.dittoPreAuthenticatedUsername.value&&ye.dittoPreAuthenticatedUsername.value.length>0?t="pre":ye.bearer.value&&ye.bearer.value.length>0?t="bearer":ye.userName.value&&ye.userName.value.length>0&&(t="basic")),e||(ye.bearerDevOps.value&&ye.bearerDevOps.value.length>0?e="bearer":ye.devOpsUserName.value&&ye.devOpsUserName.value.length>0&&(e="basic"));let n=document.querySelectorAll('input[name="main-auth"]');for(let r=0;r<n.length;r++)n[r].checked=n[r].value===t;let i=document.querySelectorAll('input[name="devops-auth"]');for(let r=0;r<i.length;r++)i[r].checked=i[r].value===e},document.getElementById("authorizeSubmit").onclick=()=>{let t=document.querySelector('input[name="main-auth"]:checked'),e=t?t.value:void 0,n=document.querySelector('input[name="devops-auth"]:checked'),i=n?n.value:void 0;v().mainAuth=e,v().devopsAuth=i,v().usernamePassword=ye.userName.value+":"+ye.password.value,v().usernamePasswordDevOps=ye.devOpsUserName.value+":"+ye.devOpsPassword.value,v().bearer=ye.bearer.value,v().bearerDevOps=ye.bearerDevOps.value,v().dittoPreAuthenticatedUsername=ye.dittoPreAuthenticatedUsername.value,st()}}function Gl(){let t=v().usernamePassword?v().usernamePassword:":";ye.userName.value=t.split(":")[0],ye.password.value=t.split(":")[1],t=v().usernamePasswordDevOps?v().usernamePasswordDevOps:":",ye.devOpsUserName.value=t.split(":")[0],ye.devOpsPassword.value=t.split(":")[1],ye.bearer.value=v().bearer?v().bearer:"",ye.bearerDevOps.value=v().bearerDevOps?v().bearerDevOps:"",ye.dittoPreAuthenticatedUsername.value=v().dittoPreAuthenticatedUsername?v().dittoPreAuthenticatedUsername:"",bs(ys)}function Cn(t,e,n,i){let r=t,o=e,s=n,a=i,l=!1;return r.addEventListener("click",f),Ft(c),{set viewDirty(m){l=m}};function f(){Xl(r.dataset.auth==="devOps"),l&&(s.call(null,!1),l=!1)}function c(m){var E;r.toggleAttribute("hidden",(E=v()[a])!=null?E:!1),["pinnedThings","filterList","messageTemplates"].includes(m)||(o.classList.contains("show")?s.call(null,!0):l=!0)}}function Vt(t){return Vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(t)}function ec(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zl(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tc(t,e,n){return e&&Zl(t.prototype,e),n&&Zl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $v(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rr(t,e)}function ir(t){return ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ir(t)}function rr(t,e){return rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},rr(t,e)}function nc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nr(t,e,n){return nc()?nr=Reflect.construct.bind():nr=function(r,o,s){var a=[null];a.push.apply(a,o);var l=Function.bind.apply(r,a),f=new l;return s&&rr(f,s.prototype),f},nr.apply(null,arguments)}function jv(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Es(t){var e=typeof Map=="function"?new Map:void 0;return Es=function(i){if(i===null||!jv(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return nr(i,arguments,ir(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),rr(r,i)},Es(t)}function Vv(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uv(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vv(t)}function Hv(t){var e=nc();return function(){var i=ir(t),r;if(e){var o=ir(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return Uv(this,r)}}function qv(t){return Bv(t)||Wv(t)||ic(t)||zv()}function Bv(t){if(Array.isArray(t))return _s(t)}function Wv(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ic(t,e){if(t){if(typeof t=="string")return _s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _s(t,e)}}function _s(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function zv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gv(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ic(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){s=!0,a=l},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(s)throw a}}}}var lt=Object.prototype.hasOwnProperty;function Kn(t,e){return t=t.slice(),t.push(e),t}function Ts(t,e){return e=e.slice(),e.unshift(t),e}var Jv=function(t){$v(n,t);var e=Hv(n);function n(i){var r;return ec(this,n),r=e.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),r.avoidNew=!0,r.value=i,r.name="NewError",r}return tc(n)}(Es(Error));function le(t,e,n,i,r){if(!(this instanceof le))try{return new le(t,e,n,i,r)}catch(l){if(!l.avoidNew)throw l;return l.value}typeof t=="string"&&(r=i,i=n,n=e,e=t,t=null);var o=t&&Vt(t)==="object";if(t=t||{},this.json=t.json||n,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=lt.call(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.preventEval=t.preventEval||!1,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||i||null,this.otherTypeCallback=t.otherTypeCallback||r||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){var s={path:o?t.path:e};o?"json"in t&&(s.json=t.json):s.json=n;var a=this.evaluate(s);if(!a||Vt(a)!=="object")throw new Jv(a);return a}}le.prototype.evaluate=function(t,e,n,i){var r=this,o=this.parent,s=this.parentProperty,a=this.flatten,l=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=i||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&Vt(t)==="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!lt.call(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');var f=t;e=f.json,a=lt.call(t,"flatten")?t.flatten:a,this.currResultType=lt.call(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=lt.call(t,"sandbox")?t.sandbox:this.currSandbox,l=lt.call(t,"wrap")?t.wrap:l,this.currPreventEval=lt.call(t,"preventEval")?t.preventEval:this.currPreventEval,n=lt.call(t,"callback")?t.callback:n,this.currOtherTypeCallback=lt.call(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,o=lt.call(t,"parent")?t.parent:o,s=lt.call(t,"parentProperty")?t.parentProperty:s,t=t.path}if(o=o||null,s=s||null,Array.isArray(t)&&(t=le.toPathString(t)),!(!t&&t!==""||!e)){var c=le.toPathArray(t);c[0]==="$"&&c.length>1&&c.shift(),this._hasParentSelector=null;var m=this._trace(c,e,["$"],o,s,n).filter(function(E){return E&&!E.isParentSelector});return m.length?!l&&m.length===1&&!m[0].hasArrExpr?this._getPreferredOutput(m[0]):m.reduce(function(E,w){var H=r._getPreferredOutput(w);return a&&Array.isArray(H)?E=E.concat(H):E.push(H),E},[]):l?[]:void 0}};le.prototype._getPreferredOutput=function(t){var e=this.currResultType;switch(e){case"all":{var n=Array.isArray(t.path)?t.path:le.toPathArray(t.path);return t.pointer=le.toPointer(n),t.path=typeof t.path=="string"?t.path:le.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return le.toPathString(t[e]);case"pointer":return le.toPointer(t.path);default:throw new TypeError("Unknown result type")}};le.prototype._handleCallback=function(t,e,n){if(e){var i=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:le.toPathString(t.path),e(i,n,t)}};le.prototype._trace=function(t,e,n,i,r,o,s,a){var l=this,f;if(!t.length)return f={path:n,value:e,parent:i,parentProperty:r,hasArrExpr:s},this._handleCallback(f,o,"value"),f;var c=t[0],m=t.slice(1),E=[];function w(I){Array.isArray(I)?I.forEach(function(Le){E.push(Le)}):E.push(I)}if((typeof c!="string"||a)&&e&&lt.call(e,c))w(this._trace(m,e[c],Kn(n,c),e,c,o,s));else if(c==="*")this._walk(e,function(I){w(l._trace(m,e[I],Kn(n,I),e,I,o,!0,!0))});else if(c==="..")w(this._trace(m,e,n,i,r,o,s)),this._walk(e,function(I){Vt(e[I])==="object"&&w(l._trace(t.slice(),e[I],Kn(n,I),e,I,o,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:m,isParentSelector:!0};if(c==="~")return f={path:Kn(n,c),value:r,parent:i,parentProperty:null},this._handleCallback(f,o,"property"),f;if(c==="$")w(this._trace(m,e,n,null,null,o,s));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(c))w(this._slice(c,m,e,n,i,r,o));else if(c.indexOf("?(")===0){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var H=c.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(e,function(I){l._eval(H,e[I],I,n,i,r)&&w(l._trace(m,e[I],Kn(n,I),e,I,o,!0))})}else if(c[0]==="("){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");w(this._trace(Ts(this._eval(c,e,n[n.length-1],n.slice(0,-1),i,r),m),e,n,i,r,o,s))}else if(c[0]==="@"){var P=!1,V=c.slice(1,-2);switch(V){case"scalar":(!e||!["object","function"].includes(Vt(e)))&&(P=!0);break;case"boolean":case"string":case"undefined":case"function":Vt(e)===V&&(P=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(P=!0);break;case"number":Number.isFinite(e)&&(P=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(P=!0);break;case"object":e&&Vt(e)===V&&(P=!0);break;case"array":Array.isArray(e)&&(P=!0);break;case"other":P=this.currOtherTypeCallback(e,n,i,r);break;case"null":e===null&&(P=!0);break;default:throw new TypeError("Unknown value type "+V)}if(P)return f={path:n,value:e,parent:i,parentProperty:r},this._handleCallback(f,o,"value"),f}else if(c[0]==="`"&&e&&lt.call(e,c.slice(1))){var F=c.slice(1);w(this._trace(m,e[F],Kn(n,F),e,F,o,s,!0))}else if(c.includes(",")){var te=c.split(","),oe=Gv(te),$;try{for(oe.s();!($=oe.n()).done;){var z=$.value;w(this._trace(Ts(z,m),e,n,i,r,o,!0))}}catch(I){oe.e(I)}finally{oe.f()}}else!a&&e&&lt.call(e,c)&&w(this._trace(m,e[c],Kn(n,c),e,c,o,s,!0))}if(this._hasParentSelector)for(var j=0;j<E.length;j++){var ne=E[j];if(ne&&ne.isParentSelector){var Q=this._trace(ne.expr,e,ne.path,i,r,o,s);if(Array.isArray(Q)){E[j]=Q[0];for(var be=Q.length,ie=1;ie<be;ie++)j++,E.splice(j,0,Q[ie])}else E[j]=Q}}return E};le.prototype._walk=function(t,e){if(Array.isArray(t))for(var n=t.length,i=0;i<n;i++)e(i);else t&&Vt(t)==="object"&&Object.keys(t).forEach(function(r){e(r)})};le.prototype._slice=function(t,e,n,i,r,o,s){if(Array.isArray(n)){var a=n.length,l=t.split(":"),f=l[2]&&Number.parseInt(l[2])||1,c=l[0]&&Number.parseInt(l[0])||0,m=l[1]&&Number.parseInt(l[1])||a;c=c<0?Math.max(0,c+a):Math.min(a,c),m=m<0?Math.max(0,m+a):Math.min(a,m);for(var E=[],w=c;w<m;w+=f){var H=this._trace(Ts(w,e),n,i,r,o,s,!0);H.forEach(function(P){E.push(P)})}return E}};le.prototype._eval=function(t,e,n,i,r,o){this.currSandbox._$_parentProperty=o,this.currSandbox._$_parent=r,this.currSandbox._$_property=n,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;var s=t.includes("@path");s&&(this.currSandbox._$_path=le.toPathString(i.concat([n])));var a="script:"+t;if(!le.cache[a]){var l=t.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");s&&(l=l.replace(/@path/g,"_$_path")),le.cache[a]=new this.vm.Script(l)}try{return le.cache[a].runInNewContext(this.currSandbox)}catch(f){throw new Error("jsonPath: "+f.message+": "+t)}};le.cache={};le.toPathString=function(t){for(var e=t,n=e.length,i="$",r=1;r<n;r++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[r])||(i+=/^[\*0-9]+$/.test(e[r])?"["+e[r]+"]":"['"+e[r]+"']");return i};le.toPointer=function(t){for(var e=t,n=e.length,i="",r=1;r<n;r++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[r])||(i+="/"+e[r].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return i};le.toPathArray=function(t){var e=le.cache;if(e[t])return e[t].concat();var n=[],i=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(o,s){return"[#"+(n.push(s)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(o,s){return"['"+s.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(o,s){return";"+s.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),r=i.split(";").map(function(o){var s=o.match(/#([0-9]+)/);return!s||!s[1]?o:n[s[1]]});return e[t]=r,e[t].concat()};var Kv=function(e,n,i){for(var r=e.length,o=0;o<r;o++){var s=e[o];i(s)&&n.push(e.splice(o--,1)[0])}},Yv=function(){function t(e){ec(this,t),this.code=e}return tc(t,[{key:"runInNewContext",value:function(n){var i=this.code,r=Object.keys(n),o=[];Kv(r,o,function(c){return typeof n[c]=="function"});var s=r.map(function(c,m){return n[c]}),a=o.reduce(function(c,m){var E=n[m].toString();return/function/.test(E)||(E="function "+E),"var "+m+"="+E+";"+c},"");i=a+i,!/(["'])use strict\1/.test(i)&&!r.includes("arguments")&&(i="var arguments = undefined;"+i),i=i.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"");var l=i.lastIndexOf(";"),f=l>-1?i.slice(0,l+1)+" return "+i.slice(l+1):" return "+i;return nr(Function,r.concat([f])).apply(void 0,qv(s))}}]),t}();le.prototype.vm={Script:Yv};var rc=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<!-- Scrollable modal -->
<div id="fieldsModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                Adjust fields for things table
                <button type="button" class="btn-close btn-sm" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="input-group input-group-sm mb-1 mt-1">
                    <div class="form-control-sm" style="flex-grow: 1;"></div>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldUp">
                        <i class="bi bi-chevron-up"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldDown">
                        <i class="bi bi-chevron-down"></i>
                    </button>
                </div>

                <table class="table table-striped table-hover table-sm has-validation">
                    <tbody id="fieldList"></tbody>
                </table>
                <h6>Field Details</h6>
                <div class="input-group input-group-sm mb-1 mt-1 has-validation">
                    <label class="input-group-text">Field Path</label>
                    <input type="text" class="form-control" id="fieldPath"></input>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldCreate" data-bs-toggle="tooltip"
                        title="Add a new field with the given path">
                        <i class="bi bi-plus-circle"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldUpdate" data-bs-toggle="tooltip"
                        title="Save selected field details">
                        <i class="bi bi-save"></i>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" id="fieldDelete" data-bs-toggle="tooltip"
                        title="Delete selected field">
                        <i class="bi bi-trash3"></i>
                    </button>
                    <div class="invalid-feedback"></div>
                </div>
                <div class="input-group input-group-sm mb-1">
                    <label class="input-group-text">Field Label</label>
                    <input type="text" class="form-control form-control-sm" id="fieldLabel"></input>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>`;var Ee=-1,me={fieldPath:null,fieldLabel:null,fieldList:null,fieldsModal:null};document.getElementById("fieldsHTML").innerHTML=rc;function Cs(){v().fieldList||(v().fieldList=[]);let t=v().fieldList.filter(e=>e.active).map(e=>e.path);return"fields=thingId"+(t.length>0?","+t:"")}var ws=null;function oc(t){me.fieldPath.value=t,me.fieldLabel.value=null,ws||(ws=new _t(me.fieldsModal)),ws.show()}function sc(){return he(this,null,function*(){Ft(Zv),ee(me),me.fieldList.addEventListener("click",t=>{t.target&&t.target.tagName==="TD"&&Qv(t.target.parentNode.rowIndex)}),me.fieldsModal.addEventListener("hide.bs.modal",()=>{st()}),document.getElementById("fieldUpdate").onclick=()=>{D(Ee>=0,"No field selected");let t=v().fieldList[Ee],i=v().fieldList.filter((r,o)=>o!=Ee).map(r=>r.path).includes(t.path);console.log(i),D(!v().fieldList.filter((r,o)=>o!=Ee).map(r=>r.path).includes(me.fieldPath.value),"Changed field path already exists",me.fieldPath),t.path=me.fieldPath.value,t.label=me.fieldLabel.value,Yn()},document.getElementById("fieldCreate").onclick=()=>{D(me.fieldPath.value,"Field path must not be empty",me.fieldPath),D(!v().fieldList.map(t=>t.path).includes(me.fieldPath.value),"Field path already exists",me.fieldPath),v().fieldList.push({active:!0,path:me.fieldPath.value,label:me.fieldLabel.value?me.fieldLabel.value:me.fieldPath.value.split("/").slice(-1)[0]}),Yn()},document.getElementById("fieldDelete").onclick=()=>{D(Ee>=0,"No field selected"),v().fieldList.splice(Ee,1),Yn(),Ee=-1},document.getElementById("fieldUp").onclick=()=>{if(Ee<=0)return;let t=v().fieldList[Ee];v().fieldList.splice(Ee,1),Ee--,v().fieldList.splice(Ee,0,t),Yn()},document.getElementById("fieldDown").onclick=()=>{if(Ee<0||Ee===v().fieldList.length-1)return;let t=v().fieldList[Ee];v().fieldList.splice(Ee,1),Ee++,v().fieldList.splice(Ee,0,t),Yn()}})}function Qv(t){if(Ee===t)Ee=-1,me.fieldPath.value=null,me.fieldLabel.value=null;else{Ee=t;let e=v().fieldList[Ee];me.fieldPath.value=e.path,me.fieldLabel.value=e.label?e.label:null}}function Zv(){v().fieldList||(v().fieldList=[]),Yn()}function Yn(){me.fieldList.innerHTML="",Ee=-1,v().fieldList.forEach((t,e)=>{let n=me.fieldPath.value===t.path,i=me.fieldList.insertRow();Xr(i,e,t.active,ey),i.insertCell(-1).innerHTML=t.path,i.insertCell(-1).innerHTML=t.label?t.label:null,n&&(Ee=e,i.classList.add("table-active"),me.fieldLabel.value=t.label)}),Ee<0&&(me.fieldPath.value=null,me.fieldLabel.value=null)}function ey(t){v().fieldList[t.target.id].active=t.target.checked,Yn()}var Rp=Oo(Mp());var Qn,oo;function kp(){return he(this,null,function*(){Ge(VC),$p(jC),Ft(UC)})}var Fp=[];function ao(t){Fp.push(t)}function $C(t){Fp.forEach(e=>e.call(null,t))}function jC(t,e){so(oo),t&&t.length>0&&(console.log("SSE Start: THINGS TABLE"),oo=vs(t,e),oo.onmessage=qC)}function VC(t,e){t?e&&(Qn&&Qn.close(),console.log("SSE Start: SELECTED THING : "+t.thingId),Qn=vs(t.thingId,"fields=thingId,attributes,features,_revision,_modified"),Qn.onmessage=HC):so(Qn)}function so(t){t&&(t.close(),console.log("SSE Stopped: "+(t===Qn?"SELECTED THING":"THINGS TABLE")))}function UC(t){["pinnedThings","filterList","messageTemplates"].includes(t)||(so(Qn),so(oo))}function HC(t){if(t.data&&t.data!==""){let e=(0,Rp.default)(G,JSON.parse(t.data));Ut(e),$C(JSON.parse(t.data))}}function qC(t){t.data&&t.data!==""&&Ws(JSON.parse(t.data))}var co="",lo,Je={thingsTableHead:null,thingsTableBody:null,searchFilterEdit:null,favIcon:null},jp=[];function $p(t){jp.push(t)}function br(t,e){jp.forEach(n=>n.call(null,t,e))}function Vp(){return he(this,null,function*(){Ge(zC),ao(Ws),ee(Je),Je.thingsTableBody.addEventListener("click",BC)})}function BC(t){if(t.target&&t.target.nodeName==="TD"){let e=t.target.parentNode;e.id==="searchThingsMore"?(e.style.pointerEvents="none",t.stopImmediatePropagation(),Up(Je.searchFilterEdit.value,!0)):G&&G.thingId===e.id?(t.stopImmediatePropagation(),Ut(null)):Lt(e.id,null)}}function vr(t){co=t,t===""||/^(eq\(|ne\(|gt\(|ge\(|lt\(|le\(|in\(|like\(|exists\(|and\(|or\(|not\().*/.test(t)?Up(t):yr([t])}function zs(){co="pinned",Je.searchFilterEdit.value=null,Je.favIcon.classList.replace("bi-star-fill","bi-star"),yr(v().pinnedThings)}function po(){co==="pinned"?zs():vr(co)}function yr(t){Je.thingsTableBody.innerHTML="";let e=Cs();t.length>0?de("GET",`/things?${e}&ids=${t}&option=sort(%2BthingId)`).then(n=>{Hp(n),br(t,e)}).catch(n=>{uo(),br(null)}):(uo(),br(null))}function uo(t=!1){lo=null,Je.thingsTableHead.innerHTML="",Je.thingsTableBody.innerHTML="",t||Ut(null)}function Up(t,e=!1){document.body.style.cursor="progress";let n=v().searchNamespaces,i=Cs();de("GET","/search/things?"+i+(t&&t!==""?"&filter="+encodeURIComponent(t):"")+(n&&n!==""?"&namespaces="+n:"")+"&option=sort(%2BthingId)"+(e?",cursor("+lo+")":"")).then(s=>{e?Gs():uo(!0),Hp(s.items),r(s),e||br(s.items.map(a=>a.thingId),i)}).catch(s=>{uo(),br(null)}).finally(()=>{document.body.style.cursor="default"});function r(s){s.cursor?(o(),lo=s.cursor):lo=null}function o(){let s=Je.thingsTableBody.insertRow().insertCell(-1);s.innerHTML="load more...",s.colSpan=Je.thingsTableBody.rows[0].childElementCount,s.style.textAlign="center",s.style.cursor="pointer",s.disabled=!0,s.style.color="#3a8c9a",s.parentNode.id="searchThingsMore"}}function Gs(){let t=document.getElementById("searchThingsMore");t&&t.parentNode.removeChild(t)}function Hp(t){let e=v().fieldList.filter(s=>s.active);i();let n=!1;t.forEach((s,a)=>{let l=Je.thingsTableBody.insertRow();r(l,s)}),n||Ut(null);function i(){Je.thingsTableHead.innerHTML="",Qr(Je.thingsTableHead,""),Qr(Je.thingsTableHead,"Thing ID"),e.forEach(s=>{Qr(Je.thingsTableHead,s.label?s.label:s.path)})}function r(s,a){s.id=a.thingId,G&&a.thingId===G.thingId&&(n=!0,s.classList.add("table-active")),Xr(s,a.thingId,v().pinnedThings.includes(a.thingId),WC),Zi(s,o(a.thingId),a.thingId),e.forEach(l=>{let f=l.path.replace(/\//g,".");f.charAt(0)!=="."&&(f="$."+f);let c=le({json:a,path:f});Zi(s,c.length!==0?c[0]:"").setAttribute("jsonPath",f)})}function o(s){let a=/([0-9a-f]{7})[0-9a-f]-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,l=s;return v().shortenUUID&&(l=l.replace(a,"$1")),v().defaultNamespace&&(l=l.replace(v().defaultNamespace,"dn")),l}}function WC(t){if(t.target.checked)v().pinnedThings.push(this.id);else{let e=v().pinnedThings.indexOf(this.id);e>-1&&v().pinnedThings.splice(e,1)}st("pinnedThings")}function zC(t){t||wi(Je.thingsTableBody,()=>!1)}function Ws(t){let e=document.getElementById(t.thingId);console.assert(e!==null,"Unexpected thingId for table update. thingId was not loaded before"),Array.from(e.cells).forEach(n=>{let i=n.getAttribute("jsonPath");if(i){let r=le({json:t,path:i});r.length!==0&&(n.innerHTML=r[0])}})}var qp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div>
    <h5>Things</h5>
    <hr />
    <div>
        <div class="row resizable_pane" style="height: 30vh;">
            <div class="col-md-6 resizable_flex_column">
                <div class="input-group input-group-sm mb-1 mt-1">
                    <div class="btn-group dropend">
                        <button id="searchFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                            title="Toggle favorite for search filter">
                            <i id="favIcon" class="bi bi-star"></i>
                        </button>
                    </div>
                    <input type="search" class="form-control form-control-sm" 
                        id="searchFilterEdit" spellcheck=false autocomplete="off"></input>
                    <button id="searchThings" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                        title="Search things by thingId or valid ditto search filter">
                        search
                    </button>
                    <button id="pinnedThings" class="btn btn-outline-secondary btn-sm me-3 button_round_right"
                        data-bs-toggle="tooltip" title="Pinned things: get the list of all individually pinned things">
                        pinned
                    </button>
                    <button id="tableSettings" class="btn btn-outline-secondary btn-sm button_round_both"
                        data-bs-toggle="modal" data-bs-target="#fieldsModal">
                        <span data-bs-toggle="tooltip" title="Adjust fields for things table">
                            <i class="bi bi-gear"></i>
                        </span>
                    </button>
                </div>
                <div class="table-wrap">
                    <table class="table table-striped table-hover table-sm">
                        <thead>
                            <tr id="thingsTableHead"></tr>
                        </thead>
                        <tbody id="thingsTableBody"></tbody>
                    </table>
                </div>
            </div>
            <div class="col-md-6 resizable_flex_column" id="details">
                <ul id="tabItemsThing" class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabThingDetails">Thing
                            Details</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabModifyThing">
                                CRUD Thing<span class="badge badge-warn" id="thingsCrudWaring">!</span></a>
                        </li>
                    </ul>
                    <div id="tabContentThing" class="tab-content" style="flex-grow:1; overflow:hidden;">
                        <div class="tab-pane fade show active container no-margin" id="tabThingDetails">
                            <div class="table-wrap">
                                <table class="table table-striped table-hover table-sm">
                                    <tbody id="tbodyThingDetails"></tbody>
                                </table>
                            </div>
                    </div>
                    <div class="tab-pane fade container no-margin" style="height:100%;" id="tabModifyThing">
                        <crud-toolbar id="crudThings" label="Thing ID">
                            <div class="input-group input-group-sm mb-1">
                                <label class="input-group-text" id="labelX">Definition</label>
                                <div class="btn-group dropend">
                                    <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                                    data-bs-toggle="dropdown" disabled id="buttonThingDefinitions"></button>
                                    <ul id="ulThingDefinitions" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                                </div>
                                <input type="text" class="form-control" id="inputThingDefinition" disabled></input>
                            </div>
                            <div class="ace_container mb-1" style="flex-grow: 1;">
                                <div class="script_editor" id="thingJsonEditor"></div>
                            </div>
                        </crud-toolbar>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<h5 data-bs-toggle="collapse" data-bs-target="#collapseAttributes">Attributes <span class="badge rounded-pill bg-info"
        id="badgeAttributeCount"></span></h5>
<hr />
<div class="collapse" id="collapseAttributes">
    <div class="row">
        <div class="col-md-4" style="overflow-y:scroll;">
            <table class="table table-striped table-hover table-sm">
                <tbody id="tbodyAttributes"></tbody>
            </table>
        </div>
        <div class="col-md-8">
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active">CRUD Attribute</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane container active no-margin">
                    <crud-toolbar id="crudAttribute" label="Path">
                        <div class="input-group input-group-sm has-validation mb-1">
                            <label class="input-group-text">Value</label>
                            <input type="text" class="form-control form-control-sm" id="inputAttributeValue" disabled></input>
                            <div class="invalid-feedback"></div>
                        </div>
                    </crud-toolbar>
                </div>
            </div>
        </div>
    </div>
</div>
`;var G,Bp=[],Js={collapseThings:null,tabThings:null};document.getElementById("thingsHTML").innerHTML=qp;function Ge(t){Bp.push(t)}function Wp(){return he(this,null,function*(){ee(Js),Cn(Js.tabThings,Js.collapseThings,JC)})}function Lt(t,e){console.assert(t&&t!=="","thingId expected"),de("GET",`/things/${t}?fields=thingId%2CpolicyId%2Cdefinition%2Cattributes%2Cfeatures%2C_created%2C_modified%2C_revision`).then(n=>{Ut(n),e&&e()}).catch(()=>Ut())}function Ut(t){let e=t&&(!G||G.thingId!==t.thingId);G=t,Bp.forEach(n=>n.call(null,G,e))}function JC(){po()}var J={tbodyAttributes:null,crudAttribute:null,inputAttributeValue:null,badgeAttributeCount:null},zp;function Gp(){Ge(ZC),ee(J),J.tbodyAttributes.onclick=QC,J.crudAttribute.addEventListener("onCreateClick",KC),J.crudAttribute.addEventListener("onUpdateClick",YC),J.crudAttribute.addEventListener("onDeleteClick",XC),J.crudAttribute.addEventListener("onEditToggle",tA)}function KC(){D(J.crudAttribute.idValue,"Attribute path must not be empty",J.crudAttribute.validationElement),D(!G.attributes||!Object.keys(G.attributes).includes(J.crudAttribute.idValue),`Attribute path ${J.crudAttribute.idValue} already exists in Thing`,J.crudAttribute.validationElement),D(J.inputAttributeValue.value,"Attribute value must not be empty",J.inputAttributeValue),Ks("PUT",!0)}function YC(){D(J.inputAttributeValue.value,"Attribute value must not be empty"),Ks("PUT")}function XC(){Tn(`Are you sure you want to delete attribute<br>'${J.crudAttribute.idValue}'?`,"Delete",()=>{Ks("DELETE")})}function QC(t){if(t.target&&t.target.nodeName==="TD"){let e=t.target.parentNode.children[0].innerText;J.crudAttribute.idValue===e?fo(null):fo(G,e)}}function Ks(t,e){de(t,`/things/${G.thingId}/attributes/${J.crudAttribute.idValue}`,t==="PUT"?eA(J.inputAttributeValue.value):null,e?{"If-None-Match":"*"}:{"If-Match":t==="PUT"?zp:"*"}).then(()=>{t==="PUT"&&J.crudAttribute.toggleEdit(),Lt(G.thingId)})}function fo(t,e){J.crudAttribute.isEditing||(t?(J.crudAttribute.idValue=e,J.inputAttributeValue.value=ho(t.attributes[e])):(J.crudAttribute.idValue=null,J.inputAttributeValue.value=null))}function ZC(t){J.crudAttribute.editDisabled=t===null,J.tbodyAttributes.innerHTML="";let e=0,n=!1;t&&t.attributes&&Object.keys(G.attributes).forEach(i=>{i===J.crudAttribute.idValue&&(fo(G,i),n=!0),we(J.tbodyAttributes,i,i===J.crudAttribute.idValue,!1,ho(G.attributes[i])),e++}),J.badgeAttributeCount.innerText=e>0?e:"",n||fo(null)}function ho(t){return typeof t=="object"?JSON.stringify(t):t.toString()}function eA(t){try{return JSON.parse(t)}catch(e){return t}}function tA(t){let e=t.detail.isEditing;J.inputAttributeValue.disabled=!e,e&&J.crudAttribute.idValue&&J.crudAttribute.idValue!==""?de("GET",`/things/${G.thingId}/attributes/${J.crudAttribute.idValue}`,null,null,!0).then(n=>(zp=n.headers.get("ETag"),n.json())).then(n=>{J.inputAttributeValue.value=ho(n)}):J.inputAttributeValue.value=J.crudAttribute.idValue?ho(G.attributes[J.crudAttribute.idValue]):null}var Jp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#collapseFeatures">
    Features <span class="badge rounded-pill bg-info" id="badgeFeatureCount"></span></h5>
<hr />
<div class="collapse show" id="collapseFeatures">
    <div class="row resizable_pane" style="height: 45vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationFeature" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyFeatures"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <ul class="nav nav-tabs" id="tabItemsFeatures">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabCrudFeature">CRUD Feature</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1;" id="tabContentFeatures">
                <div class="tab-pane container active no-margin" id="tabCrudFeature">
                    <crud-toolbar id="crudFeature" label="Feature ID">
                        <div class="input-group input-group-sm mb-1">
                            <label class="input-group-text">Definition</label>
                            <input type="text" class="form-control" id="inputFeatureDefinition" disabled></input>
                        </div>
                        <div class="input-group input-group-sm mb-1" style="flex-grow: 1; display: flex;">
                            <label class="input-group-text">Properties<br>and<br>Desired<br>Properties</label>
                            <div class="ace_container" style="flex-grow: 1;">
                                <div class="script_editor" id="featurePropertiesEditor"></div>
                            </div>
                            <div class="ace_container" style="flex-grow: 1;">
                                <div class="script_editor" id="featureDesiredPropertiesEditor"></div>
                            </div>
                        </div>
                    </crud-toolbar>
                </div>
            </div>
        </div>
    </div>
</div>`;var Kp=[];document.getElementById("featuresHTML").innerHTML=Jp;function go(t){Kp.push(t)}function rA(){Kp.forEach(t=>t.call(null,U.crudFeature.idValue))}var Ct,sn,Yp,U={crudFeature:null,inputFeatureDefinition:null,badgeFeatureCount:null,tbodyFeatures:null,tableValidationFeature:null};function Xp(){Ge(uA),ee(U),kt(U.tbodyFeatures,U.tableValidationFeature),U.tbodyFeatures.onclick=cA,U.crudFeature.editDisabled=!0,U.crudFeature.addEventListener("onCreateClick",lA),U.crudFeature.addEventListener("onUpdateClick",oA),U.crudFeature.addEventListener("onDeleteClick",sA),U.crudFeature.addEventListener("onEditToggle",dA),Ct=Ce("featurePropertiesEditor","ace/mode/json",!0),sn=Ce("featureDesiredPropertiesEditor","ace/mode/json",!0),Ct.on("dblclick",aA),document.querySelector('a[data-bs-target="#tabCrudFeature"]').addEventListener("shown.bs.tab",t=>{Ct.renderer.updateFull(),sn.renderer.updateFull()})}function oA(){Ys("PUT")}function sA(){Tn(`Are you sure you want to delete feature<br>'${U.crudFeature.idValue}'?`,"Delete",()=>{Ys("DELETE")})}function aA(t){t.domEvent.shiftKey&&setTimeout(()=>{let e=Ct.getSelectedText();if(e){let n="$.."+e.replace(/['"]+/g,"").trim(),i=le({json:JSON.parse(Ct.getValue()),path:n,resultType:"pointer"});oc("features/"+U.crudFeature.idValue+"/properties"+i)}},10)}function lA(){D(U.crudFeature.idValue,"Feature ID must not be empty",U.crudFeature.validationElement),D(!G.features||!Object.keys(G.features).includes(U.crudFeature.idValue),`Feature ID ${U.crudFeature.idValue} already exists in Thing`,U.crudFeature.validationElement),Ys("PUT",!0)}function cA(t){t.target&&t.target.nodeName==="TD"&&(U.crudFeature.idValue===t.target.textContent?Er(null):Er(G,t.target.textContent))}function Ys(t,e=!1){D(G,"No Thing selected"),D(U.crudFeature.idValue,"No Feature selected");let n={},i=Ct.getValue(),r=sn.getValue();U.inputFeatureDefinition.value&&(n.definition=U.inputFeatureDefinition.value.split(",")),i&&(n.properties=JSON.parse(i)),r&&(n.desiredProperties=JSON.parse(r)),de(t,"/things/"+G.thingId+"/features/"+U.crudFeature.idValue,t==="PUT"?n:null,e?{"If-None-Match":"*"}:{"If-Match":t==="PUT"?Yp:"*"}).then(()=>{t==="PUT"&&U.crudFeature.toggleEdit(),Lt(G.thingId)}).catch()}function mo(t){t?(U.inputFeatureDefinition.value=t.definition?t.definition:null,t.properties?Ct.setValue(JSON.stringify(t.properties,null,4),-1):Ct.setValue(""),t.desiredProperties?sn.setValue(JSON.stringify(t.desiredProperties,null,4),-1):sn.setValue("")):(U.inputFeatureDefinition.value=null,Ct.setValue(""),sn.setValue("")),Ct.session.getUndoManager().reset(),sn.session.getUndoManager().reset()}function Er(t,e){U.crudFeature.isEditing||(t?(U.crudFeature.idValue=e,mo(t.features[e])):(U.crudFeature.idValue=null,mo(null)),rA())}function uA(t){U.crudFeature.editDisabled=t===null,U.tbodyFeatures.innerHTML="";let e=0,n=!1;if(t&&t.features)for(let i of Object.keys(t.features))i===U.crudFeature.idValue&&(Er(t,i),n=!0),we(U.tbodyFeatures,i,i===U.crudFeature.idValue),e++;U.badgeFeatureCount.textContent=e>0?e:"",n||(U.crudFeature.idValue=null,mo(null))}function dA(t){let e=t.detail.isEditing;e&&U.crudFeature.idValue&&U.crudFeature.idValue!==""?de("GET",`/things/${G.thingId}/features/${U.crudFeature.idValue}`,null,null,!0).then(r=>(Yp=r.headers.get("ETag").replace("W/",""),r.json())).then(r=>{n(),mo(r)}):(n(),i(),U.crudFeature.validationElement.classList.remove("is-invalid"));function n(){U.inputFeatureDefinition.disabled=!e,Ct.setReadOnly(!e),Ct.renderer.setShowGutter(e),sn.setReadOnly(!e),sn.renderer.setShowGutter(e)}function i(){U.crudFeature.idValue?Er(G,U.crudFeature.idValue):Er(null)}}var Zp=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="input-group input-group-sm mb-1 mt-1 has-validation">
            <label class="input-group-text">Subject and Timeout</label>
            <input type="text" class="form-control" id="inputMessageSubject"></input>
            <input type="number" class="form-control form-control-sm" id="inputMessageTimeout" value="10"></input>
            <button class="btn btn-outline-secondary btn-sm" id="buttonMessageSend">
                <i class="bi bi-send"></i>
                Send
            </button>
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm mb-1 has-validation">
            <label class="input-group-text">Template</label>
            <div class="btn-group dropend">
                <button id="buttonMessageFavorite" class="btn btn-outline-secondary btn-sm" data-bs-toggle="tooltip"
                    title="Save favorite for message on this feature">
                    <i id="favIconMessage" class="bi bi-star"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm dropdown-toggle dropdown-toggle-split"
                    data-bs-toggle="dropdown"></button>
                <ul id="ulMessageTemplates" class="dropdown-menu" style="position: fixed; top: auto;">
                </ul>
            </div>
            <input type="text" class="form-control" id="inputMessageTemplate">
            <div class="invalid-feedback"></div>
        </div>
        <div class="input-group input-group-sm" style="flex-grow: 1; display: flex;">
            <label class="input-group-text">Payload<br>and<br>Response</label>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="acePayload"></div>
            </div>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="aceResponse"></div>
            </div>
        </div>

    </div>
</div>`;var Sn,Y={inputMessageSubject:null,inputMessageTimeout:null,inputMessageTemplate:null,buttonMessageSend:null,buttonMessageFavorite:null,ulMessageTemplates:null,favIconMessage:null,tableValidationFeature:null},an,_r;function ef(){return he(this,null,function*(){Ft(hA),go(mA),Zr(document.getElementById("tabItemsFeatures"),document.getElementById("tabContentFeatures"),"Message to Feature",Zp),ee(Y),an=Ce("acePayload","ace/mode/json"),_r=Ce("aceResponse","ace/mode/json",!0),Y.buttonMessageSend.onclick=()=>{D(Sn,"Please select a Feature",Y.tableValidationFeature),D(Y.inputMessageSubject.value,"Please give a Subject",Y.inputMessageSubject),D(Y.inputMessageTimeout.value,"Please give a timeout",Y.inputMessageTimeout),fA()},Y.buttonMessageFavorite.onclick=()=>{let t=Y.inputMessageTemplate.value,e=Sn;D(e,"Please select a Feature",Y.tableValidationFeature),D(t,"Please give a name for the template",Y.inputMessageTemplate),v().messageTemplates[e]=v().messageTemplates[e]||{},Object.keys(v().messageTemplates[e]).includes(t)&&Y.favIconMessage.classList.contains("bi-star-fill")?(Y.favIconMessage.classList.replace("bi-star-fill","bi-star"),delete v().messageTemplates[e][t]):(Y.favIconMessage.classList.replace("bi-star","bi-star-fill"),v().messageTemplates[e][t]={subject:Y.inputMessageSubject.value,timeout:Y.inputMessageTimeout.value,payload:JSON.parse(an.getValue())},an.session.getUndoManager().markClean()),st("messageTemplates")},Y.ulMessageTemplates.addEventListener("click",t=>{if(t.target&&t.target.classList.contains("dropdown-item")){Y.favIconMessage.classList.replace("bi-star","bi-star-fill");let e=v().messageTemplates[Sn][t.target.textContent];Y.inputMessageTemplate.value=t.target.textContent,Y.inputMessageSubject.value=e.subject,Y.inputMessageTimeout.value=e.timeout,an.setValue(JSON.stringify(e.payload,null,2),-1),an.session.getUndoManager().markClean()}}),[Y.inputMessageTemplate,Y.inputMessageSubject,Y.inputMessageTimeout].forEach(t=>{t.addEventListener("change",()=>{Y.favIconMessage.classList.replace("bi-star-fill","bi-star")})}),an.on("input",()=>{an.session.getUndoManager().isClean()||Y.favIconMessage.classList.replace("bi-star-fill","bi-star")})})}function fA(){let t=JSON.parse(an.getValue());_r.setValue(""),de("POST","/things/"+G.thingId+"/features/"+Sn+"/inbox/messages/"+Y.inputMessageSubject.value+"?timeout="+Y.inputMessageTimeout.value,t).then(e=>{Y.inputMessageTimeout.value>0&&_r.setValue(JSON.stringify(e,null,2),-1)}).catch(e=>{_r.setValue("")})}function hA(t){v().messageTemplates=v().messageTemplates||{},t||tf(),t==="messageTemplates"&&nf()}function tf(){Y.favIconMessage.classList.replace("bi-star-fill","bi-star"),Y.inputMessageTemplate.value=null,Y.inputMessageSubject.value=null,Y.inputMessageTimeout.value="10",an.setValue("{}"),_r.setValue(""),Y.ulMessageTemplates.innerHTML=""}function nf(){Y.ulMessageTemplates.innerHTML="",rn(Y.ulMessageTemplates,["Saved message templates"],!0),Sn&&v().messageTemplates[Sn]&&rn(Y.ulMessageTemplates,Object.keys(v().messageTemplates[Sn]))}function mA(t){Sn=t,tf(),nf()}var bA=['eq(attributes/location,"kitchen")','ge(thingId,"myThing1")','gt(_created,"2020-08-05T12:17")',"exists(features/featureId)",'and(eq(attributes/location,"kitchen"),eq(attributes/color,"red"))','or(eq(attributes/location,"kitchen"),eq(attributes/location,"living-room"))','like(attributes/key1,"known-chars-at-start*")'],Xs=[],rf,Dt="...",of,xe={favIcon:null,searchFilterEdit:null,searchThings:null,searchFavorite:null,tabThings:null,pinnedThings:null};function af(){return he(this,null,function*(){Ft(vA),ee(xe),xe.pinnedThings.onclick=zs,of=Rl("#searchFilterEdit",EA,"Search for Things..."),of.input.addEventListener("selection",t=>{let e=t.detail.selection.value;yA(e.rql)}),xe.searchThings.onclick=()=>{sf(xe.searchFilterEdit.value),vr(xe.searchFilterEdit.value)},xe.searchFavorite.onclick=()=>{_A(xe.searchFilterEdit.value)&&(xe.favIcon.classList.toggle("bi-star"),xe.favIcon.classList.toggle("bi-star-fill"))},xe.searchFilterEdit.onkeyup=t=>{(t.key==="Enter"||t.code===13)&&xe.searchFilterEdit.value.indexOf(Dt)<0?(sf(xe.searchFilterEdit.value),vr(xe.searchFilterEdit.value)):(clearTimeout(rf),rf=setTimeout(lf,1e3))},xe.searchFilterEdit.onchange=()=>{Gs()},xe.searchFilterEdit.focus()})}function vA(){v().filterList||(v().filterList=[]),v().pinnedThings||(v().pinnedThings=[])}function yA(t){xe.searchFilterEdit.value=t,lf(),TA()||vr(xe.searchFilterEdit.value)}function EA(t){return he(this,null,function*(){var r,o,s;let e=new Date,n=new Date,i=new Date;return e.setDate(e.getDate()-1),n.setHours(n.getHours()-1),i.setMinutes(i.getMinutes()-1),[{label:"Created since 1m",rql:`gt(_created,"${i.toISOString()}")`,group:"Time"},{label:"Created since 1h",rql:`gt(_created,"${n.toISOString()}")`,group:"Time"},{label:"Created since 24h",rql:`gt(_created,"${e.toISOString()}")`,group:"Time"},{label:"Modified since 1m",rql:`gt(_modified,"${i.toISOString()}")`,group:"Time"},{label:"Modified since 1h",rql:`gt(_modified,"${n.toISOString()}")`,group:"Time"},{label:"Modified since 24h",rql:`gt(_modified,"${e.toISOString()}")`,group:"Time"},{label:`thingId = ${Dt}`,rql:`eq(thingId,"${Dt}")`,group:"ThingId"},{label:`thingId ~ ${Dt}`,rql:`like(thingId,"${Dt}*")`,group:"ThingId"},...((r=v().filterList)!=null?r:[]).map(a=>({label:a,rql:a,group:"Favorite"})),...((o=v().fieldList)!=null?o:[]).map(a=>({label:`${a.label} = ${Dt}`,rql:`eq(${a.path},"${Dt}")`,group:"Field"})),...((s=v().fieldList)!=null?s:[]).map(a=>({label:`${a.label} ~ ${Dt}`,rql:`like(${a.path},"*${Dt}*")`,group:"Field"})),...Xs.map(a=>({label:a,rql:a,group:"Recent"})),...bA.map(a=>({label:a,rql:a,group:"Example"}))]})}function _A(t){if(!t||t==="")return!1;let e=v().filterList.indexOf(t);return e>=0?v().filterList.splice(e,1):v().filterList.push(t),st("filterList"),!0}function lf(){v().filterList.indexOf(xe.searchFilterEdit.value)>=0?xe.favIcon.classList.replace("bi-star","bi-star-fill"):xe.favIcon.classList.replace("bi-star-fill","bi-star")}function TA(){let t=xe.searchFilterEdit.value.indexOf(Dt);return t>=0?(xe.searchFilterEdit.focus(),xe.searchFilterEdit.setSelectionRange(t,t+Dt.length),!0):!1}function sf(t){Xs.includes(t)||Xs.unshift(t)}var Qs={"(empty thing)":{},"WoT ThingModel 'floor-lamp' 1.0.0":{definition:"https://eclipse-ditto.github.io/ditto-examples/wot/models/floor-lamp-1.0.0.tm.jsonld"},"com.acme:coffeebrewer:0.1.0":{definition:"com.acme:coffeebrewer:0.1.0",attributes:{manufacturer:"ACME demo corp.",location:"Berlin, main floor",serialno:"42",model:"Speaking coffee machine"},features:{"coffee-brewer":{definition:["com.acme:coffeebrewer:0.1.0"],properties:{"brewed-coffees":0}},"water-tank":{properties:{configuration:{smartMode:!0,brewingTemp:87,tempToHold:44,timeoutSeconds:6e3},status:{waterAmount:731,temperature:44}}}}}};var ft,cf,X={tbodyThingDetails:null,crudThings:null,buttonThingDefinitions:null,inputThingDefinition:null,ulThingDefinitions:null};function uf(){return he(this,null,function*(){Ge(xA),ee(X),ft=Ce("thingJsonEditor","ace/mode/json",!0),rn(X.ulThingDefinitions,Object.keys(Qs)),X.ulThingDefinitions.addEventListener("click",PA),X.crudThings.addEventListener("onCreateClick",OA),X.crudThings.addEventListener("onUpdateClick",SA),X.crudThings.addEventListener("onDeleteClick",AA),X.crudThings.addEventListener("onEditToggle",LA),document.querySelector('a[data-bs-target="#tabModifyThing"]').addEventListener("shown.bs.tab",t=>{ft.renderer.updateFull()})})}function AA(){Tn(`Are you sure you want to delete thing<br>'${X.crudThings.idValue}'?`,"Delete",()=>{de("DELETE",`/things/${X.crudThings.idValue}`,null,{"if-match":"*"}).then(()=>{po()})})}function SA(){de("PUT",`/things/${X.crudThings.idValue}`,JSON.parse(ft.getValue()),{"if-match":cf}).then(()=>{X.crudThings.toggleEdit(),Lt(X.crudThings.idValue,null)})}function OA(){return he(this,null,function*(){let t=ft.getValue();X.crudThings.idValue!==void 0&&X.crudThings.idValue!==""?de("PUT","/things/"+X.crudThings.idValue,t===""?{}:JSON.parse(t),{"if-none-match":"*"}).then(e=>{X.crudThings.toggleEdit(),Lt(e.thingId,()=>{yr([e.thingId])})}):de("POST","/things",t===""?{}:JSON.parse(t)).then(e=>{X.crudThings.toggleEdit(),Lt(e.thingId,()=>{yr([e.thingId])})})})}function PA(t){Ut(null),X.inputThingDefinition.value=t.target.textContent,ft.setValue(JSON.stringify(Qs[t.target.textContent],null,2),-1)}function xA(t){if(X.crudThings.isEditing)return;e(),n();function e(){var i;X.tbodyThingDetails.innerHTML="",t&&(we(X.tbodyThingDetails,"thingId",!1,!0,t.thingId),we(X.tbodyThingDetails,"policyId",!1,!0,t.policyId),we(X.tbodyThingDetails,"definition",!1,!0,(i=t.definition)!=null?i:""),we(X.tbodyThingDetails,"revision",!1,!0,t._revision),we(X.tbodyThingDetails,"created",!1,!0,t._created),we(X.tbodyThingDetails,"modified",!1,!0,t._modified))}function n(){var i;if(t){X.crudThings.idValue=t.thingId,X.inputThingDefinition.value=(i=t.definition)!=null?i:"";let r=JSON.parse(JSON.stringify(t));delete r._revision,delete r._created,delete r._modified,ft.setValue(JSON.stringify(r,null,2),-1),ft.session.getUndoManager().reset()}else X.crudThings.idValue=null,X.inputThingDefinition.value=null,ft.setValue(""),ft.session.getUndoManager().reset()}}function LA(t){let e=t.detail.isEditing;e&&G?de("GET",`/things/${G.thingId}`,null,null,!0).then(o=>(cf=o.headers.get("ETag"),o.json())).then(o=>{n(),i(o)}):(n(),r());function n(){X.buttonThingDefinitions.disabled=!e,X.inputThingDefinition.disabled=!e,ft.setReadOnly(!e),ft.renderer.setShowGutter(e)}function i(o){var s;X.inputThingDefinition.value=(s=o.definition)!=null?s:"",ft.setValue(JSON.stringify(o,null,2),-1)}function r(){X.crudThings.idValue&&X.crudThings.idValue!==""?Lt(X.crudThings.idValue,null):(X.inputThingDefinition.value=null,ft.setValue(""))}}var df=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#collapseMessages">
    Incoming Thing Updates <span class="badge rounded-pill bg-info" id="badgeMessageIncomingCount"></span></h5>
<hr />
<div class="collapse" id="collapseMessages">
    <div class="row resizable_pane" style="height: 45vh;">
        <div class="col-md-6 resizable_flex_column">
            <div class="input-group input-group-sm mb-1">
                <button class="btn btn-outline-secondary btn-sm button_round_right" id="buttonResetMessagesIncoming"
                    data-bs-toggle="tooltip" title="Reset connection logs for the selected connection">
                    <i class="bi bi-x-circle"></i>
                    Reset
                </button>
            </div>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Revision</th>
                            <th>Field</th>
                            <th>Modified</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyMessagesIncoming"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-6 resizable_flex_column">
            <h6>Thing Update Detail</h6>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="messageIncomingDetail"></div>
            </div>
        </div>
    </div>
</div>`;var Zn={badgeMessageIncomingCount:null,buttonResetMessagesIncoming:null,tbodyMessagesIncoming:null},bo=[],vo,pf;document.getElementById("messagesIncomingHTML").innerHTML=df;function ff(){ao(MA),Ge(RA),ee(Zn),vo=Ce("messageIncomingDetail","ace/mode/json",!0),Zn.buttonResetMessagesIncoming.onclick=hf,Zn.tbodyMessagesIncoming.addEventListener("click",NA)}function NA(t){vo.setValue(JSON.stringify(bo[t.target.parentNode.rowIndex-1],null,2),-1),vo.session.getUndoManager().reset()}function hf(){bo=[],Zn.badgeMessageIncomingCount.textContent="",Zn.tbodyMessagesIncoming.innerHTML="",vo.setValue("")}function MA(t){bo.push(t),Zn.badgeMessageIncomingCount.textContent=bo.length,we(Zn.tbodyMessagesIncoming,t._revision,!1,!1,[...t.features?Object.keys(t.features):[],...t.attributes?Object.keys(t.attributes):[]],er(t._modified,!0))}function RA(t){(!t||t.thingId!==pf)&&(pf=t?t.thingId:null,hf())}var mf=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5 data-bs-toggle="collapse" data-bs-target="#connectionsEdit">
    Manage Connections
</h5>
<hr />
<div class="collapse show" id="connectionsEdit">
    <div class="row resizable_pane" style="height: 80vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group input-group-sm mt-1 mb-1" role="group">
                <div style="flex-grow: 1;"></div>
                <button class="btn btn-outline-secondary btn-sm button_round_left" id="buttonLoadConnections">
                    <i class="bi bi-arrow-clockwise"></i>
                    Refresh
                </button>
            </div>
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationConnections" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap mb-1">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Live Status</th>
                            <th>Recovery Status</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyConnections"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <h6>CRUD Connection</h6>
            <crud-toolbar label="Connection Id" id="crudConnection" style="flex-grow: 1;">
                <div class="input-group input-group-sm mb-1">
                    <label class="input-group-text">Template</label>
                    <div class="btn-group dropend">
                        <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                        data-bs-toggle="dropdown" id="buttonConnectionTemplates" disabled></button>
                        <ul id="ulConnectionTemplates" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                    </div>
                    <input type="text" class="form-control form-control-sm" id="inputConnectionTemplate" disabled></input>
                </div>
                <div class="input-group has-validation">
                    <input class="form-control" id="editorValidationConnection" hidden="true"></input>
                    <div class="invalid-feedback"></div>
                </div>
                <div class="row mb-1" style="flex-grow: 1;">
                    <div class="col-md-6 resizable_flex_column">
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionEditor"></div>
                        </div>        
                    </div>
                    <div class="col-md-6 resizable_flex_column">
                        <h6>Incoming JavaScript Mapping</h6>
                        <div class="ace_container mb-3" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionIncomingScript"></div>
                        </div>
                        <h6>Outgoing JavaScript Mapping</h6>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionOutgoingScript"></div>
                        </div>        
                    </div>
                </div>
            </crud-toolbar>
        </div>
    </div>
</div>
<h5 data-bs-toggle="collapse" data-bs-target="#tabConnectionHelper">
    Connection Status, Metrics and Logs
</h5>
<hr />
<div class="collapse show" id="tabConnectionHelper">
    <div class="row resizable_pane" style="height: 80vh;">
        <div class="col-md-4 resizable_flex_column">
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabConnectionMetrics">Metrics</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" data-bs-target="#tabConnectionStatus">Status</a>
                </li>
            </ul>
            <div class="tab-content" style="flex-grow: 1; overflow: hidden">
                <div class="tab-pane container active no-margin" id="tabConnectionMetrics">
                    <div class="resizable_flex_column">
                        <div class="input-group input-group-sm mb-1 mt-1">
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonResetConnectionMetrics" data-bs-toggle="tooltip"
                                title="Reset connection metrics for the selected connection">
                                <i class="bi bi-x-circle"></i>
                                Reset
                            </button>
                            <div class="form-control-sm" style="flex-grow: 1;"></div>
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonRetrieveConnectionMetrics" data-bs-toggle="tooltip"
                                title="Refresh connection metrics for the selected connection">
                                <i class="bi bi-arrow-clockwise"></i>
                                Refresh
                            </button>
                        </div>
                        <div class="table-wrap">
                            <table class="table table-striped table-hover table-sm">
                                <thead>
                                    <tr>
                                        <th>Direction</th>
                                        <th>Type</th>
                                        <th>Level</th>
                                        <th>1m</th>
                                        <th>1h</th>
                                        <th>24h</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyConnectionMetrics"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="tab-pane container fade no-margin" id="tabConnectionStatus">
                    <div class="resizable_flex_column">
                        <div class="input-group input-group-sm mb-1 mt-1">
                            <div class="form-control-sm" style="flex-grow: 1;"></div>
                            <button class="btn btn-outline-secondary btn-sm button_round_both"
                                id="buttonRetrieveConnectionStatus" data-bs-toggle="tooltip"
                                title="Refresh connection status">
                                <i class="bi bi-arrow-clockwise"></i>
                                Refresh
                            </button>
                        </div>
                        <div class="ace_container" style="flex-grow: 1;">
                            <div class="script_editor" id="connectionStatusDetail"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 resizable_flex_column">
            <h6>Connection Logs</h6>
            <div class="input-group input-group-sm mb-1">
                <button class="btn btn-outline-secondary btn-sm button_round_left" id="buttonEnableConnectionLogs"
                    data-bs-toggle="tooltip" title="Click to enable connection logs for the selected connection">
                    <i class="bi bi-toggle-off"></i>
                    <span>Enable</span>
                </button>
                <button class="btn btn-outline-secondary btn-sm button_round_right" id="buttonResetConnectionLogs"
                    data-bs-toggle="tooltip" title="Reset connection logs for the selected connection">
                    <i class="bi bi-x-circle"></i>
                    Reset
                </button>
                <div class="form-control-sm" style="flex-grow: 1;"></div>
                <button class="btn btn-outline-secondary btn-sm button_round_both" id="buttonRetrieveConnectionLogs"
                    data-bs-toggle="tooltip" title="Refresh connection logs for the selected connection">
                    <i class="bi bi-arrow-clockwise"></i>
                    Refresh
                </button>
            </div>
            <!-- <div class="input-group input-group-sm mb-1">
                <input id="inputConnectionLogFilter" type="search" class="form-control form-control-sm" placeholder="Filter logs..."></input>
            </div> -->
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Type</th>
                            <th>Level</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyConnectionLogs"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-4 resizable_flex_column">
            <h6>Connection Log Detail</h6>
            <div class="ace_container" style="flex-grow: 1;">
                <div class="script_editor" id="connectionLogDetail"></div>
            </div>
        </div>
    </div>
</div>`;var gf=[];document.getElementById("connectionsHTML").innerHTML=mf;function yo(t){gf.push(t)}function $A(t,e){gf.forEach(n=>n.call(null,t,e))}var ln={tbodyConnections:null,buttonLoadConnections:null,tabConnections:null,collapseConnections:null,tableValidationConnections:null},On;function bf(){ee(ln),new Cn(ln.tabConnections,ln.collapseConnections,VA,"disableConnections"),kt(ln.tbodyConnections,ln.tableValidationConnections),ln.buttonLoadConnections.onclick=Ii,ln.tbodyConnections.addEventListener("click",jA)}function ei(t,e){On=t?t.id:null,$A(t,e)}function Ii(){ln.tbodyConnections.innerHTML="";let t=!1;ze("listConnections",e=>{e.forEach(n=>{let i=Jn()==="ditto_2"?n:n.id,r=ln.tbodyConnections.insertRow();r.id=i,Jn()==="ditto_2"?ze("retrieveConnection",o=>{r.insertCell(0).innerHTML=o.name},i):r.insertCell(0).innerHTML=n.name?n.name:i,ze("retrieveStatus",o=>{r.insertCell(-1).innerHTML=o.liveStatus,r.insertCell(-1).innerHTML=o.recoveryStatus},i),i===On&&(r.classList.add("table-active"),t=!0)}),t||(On=null,ei(null))})}function jA(t){t.target&&t.target.tagName==="TD"&&(On===t.target.parentNode.id?(On=null,ei(null)):(On=t.target.parentNode.id,ze("retrieveConnection",ei,On)))}function VA(t){t&&(On=null,ei(null)),Ii()}var ea={"AMQP 0.9.1":{name:"AMQP 0.9.1",connectionType:"amqp-091",connectionStatus:"closed",failoverEnabled:!0,uri:"amqp://user:password@localhost:5672/vhost",sources:[{addresses:["queueName"],authorizationContext:["ditto:inbound-auth-subject"]}],targets:[{address:"exchangeName/routingKey",topics:["_/_/things/twin/events","_/_/things/live/messages"],authorizationContext:["ditto:outbound-auth-subject"]}]},"AMQP 1.0":{name:"AMQP 1.0",connectionType:"amqp-10",connectionStatus:"closed",failoverEnabled:!0,uri:"amqps://user:password@hono.eclipseprojects.io:5671",sources:[{addresses:["telemetry/FOO"],authorizationContext:["ditto:inbound-auth-subject"]}],targets:[{address:"events/twin",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"]}]},"MQTT 3.1.1":{name:"MQTT 3.1.1",connectionType:"mqtt",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0}]},"MQTT 5":{name:"MQTT 5",connectionType:"mqtt-5",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0}]},"MQTT 5 with JS mapping":{name:"MQTT 5 with JS mapping",connectionType:"mqtt-5",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://test.mosquitto.org:1883",sources:[{addresses:["eclipse-ditto-sandbox/#"],authorizationContext:["ditto:inbound-auth-subject"],qos:0,enforcement:{input:"{{ source:address }}",filters:["eclipse-ditto-sandbox/{{ thing:name }}/update"]},replyTarget:{enabled:!1},payloadMapping:["javascript"]}],targets:[{address:"eclipse-ditto-sandbox/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],qos:0,payloadMapping:["javascript"]}],mappingDefinitions:{javascript:{mappingEngine:"JavaScript",options:{incomingScript:`/**
 * Maps the passed parameters to a Ditto Protocol message.
 * @param {Object.<string, string>} headers - The headers Object containing all received header values
 * @param {string} [textPayload] - The String to be mapped
 * @param {ArrayBuffer} [bytePayload] - The bytes to be mapped as ArrayBuffer
 * @param {string} [contentType] - The received Content-Type, e.g. "application/json"
 * @returns {(DittoProtocolMessage|Array<DittoProtocolMessage>)} dittoProtocolMessage(s) -
 *  The mapped Ditto Protocol message,
 *  an array of Ditto Protocol messages or
 *  <code>null</code> if the message could/should not be mapped
 */
function mapToDittoProtocolMsg(
  headers,
  textPayload,
  bytePayload,
  contentType
) {

  // ### Insert/adapt your mapping logic here.
  // Use helper function Ditto.buildDittoProtocolMsg to build Ditto protocol message
  // based on incoming payload.
  // See https://www.eclipse.org/ditto/connectivity-mapping.html#helper-functions for details.

  // ### example code assuming the Ditto protocol content type for incoming messages.
  if (contentType === 'application/vnd.eclipse.ditto+json') {
    // Message is sent as Ditto protocol text payload and can be used directly
    return JSON.parse(textPayload);
  } else if (contentType === 'application/octet-stream') {
    // Message is sent as binary payload; assume Ditto protocol message (JSON).
    try {
      return JSON.parse(Ditto.arrayBufferToString(bytePayload));
    } catch (e) {
      // parsing failed (no JSON document); return null to drop the message
      return null;
    }
  }

  // no mapping logic matched; return null to drop the message
  return null;
}`,outgoingScript:`/**
 * Maps the passed parameters which originated from a Ditto Protocol message to an external message.
 * @param {string} namespace - The namespace of the entity in java package notation, e.g.: "org.eclipse.ditto". Or "_"
 * (underscore) for connection announcements.
 * @param {string} name - The name of the entity, e.g.: "device".
 * @param {string} group - The affected group/entity: "things"|"policies"|"connections".
 * @param {string} channel - The channel for the signal: "twin"|"live"|"none"
 * @param {string} criterion - The criterion to apply: "commands"|"events"|"search"|"messages"|"announcements"|"errors".
 * @param {string} action - The action to perform: "create"|"retrieve"|"modify"|"delete". Or the announcement name:
 * "opened"|"closed"|"subjectDeletion". Or the subject of the message.
 * @param {string} path - The path which is affected by the message (e.g.: "/attributes"), or the destination
 * of a message (e.g.: "inbox"|"outbox").
 * @param {Object.<string, string>} dittoHeaders - The headers Object containing all Ditto Protocol header values.
 * @param {*} [value] - The value to apply / which was applied (e.g. in a "modify" action).
 * @param {number} [status] - The status code that indicates the result of the command. When this field is set,
 * it indicates that the Ditto Protocol Message contains a response.
 * @param {Object} [extra] - The enriched extra fields when selected via "extraFields" option.
 * @returns {(ExternalMessage|Array<ExternalMessage>)} externalMessage - The mapped external message, an array of
 * external messages or <code>null</code> if the message could/should not be mapped.
 */
function mapFromDittoProtocolMsg(
  namespace,
  name,
  group,
  channel,
  criterion,
  action,
  path,
  dittoHeaders,
  value,
  status,
  extra
) {

  // ###
  // Insert your mapping logic here

  // ### example code using the Ditto protocol content type.
  let headers = dittoHeaders;
  let textPayload = JSON.stringify(Ditto.buildDittoProtocolMsg(namespace, name, group, channel, criterion, action,
                                                               path, dittoHeaders, value, status, extra));
  let bytePayload = null;
  let contentType = 'application/vnd.eclipse.ditto+json';

  return Ditto.buildExternalMsg(
      headers, // The external headers Object containing header values
      textPayload, // The external mapped String
      bytePayload, // The external mapped byte[]
      contentType // The returned Content-Type
  );
}`,loadBytebufferJS:"false",loadLongJS:"false"}}}},"HTTP 1.1":{name:"HTTP 1.1",connectionType:"http-push",connectionStatus:"closed",failoverEnabled:!0,uri:"https://webhook.site:443/<YOUR-WEBHOOK-ID>",specificConfig:{parallelism:"1"},sources:[],targets:[{address:"POST:/ditto-event/{{ thing:id }}",topics:["_/_/things/twin/events"],authorizationContext:["ditto:outbound-auth-subject"],headerMapping:{"content-type":"{{ header:content-type }}","api-key":"this-is-a-secret-api-key-to-send-along"}}]},"Kafka 2.x":{name:"Kafka 2.x",connectionType:"kafka",connectionStatus:"closed",failoverEnabled:!0,uri:"tcp://user:password@localhost:9092",specificConfig:{bootstrapServers:"localhost:9092,other.host:9092",saslMechanism:"plain"},sources:[{addresses:["theTopic"],consumerCount:1,qos:1,authorizationContext:["ditto:inbound-auth-subject"],enforcement:{input:"{{ header:device_id }}",filters:["{{ entity:id }}"]},headerMapping:{},payloadMapping:["Ditto"],replyTarget:{enabled:!0,address:"theReplyTopic",headerMapping:{},expectedResponseTypes:["response","error","nack"]},acknowledgementRequests:{includes:[]},declaredAcks:[]}],targets:[{address:"topic/key",topics:["_/_/things/twin/events","_/_/things/live/messages"],authorizationContext:["ditto:outbound-auth-subject"]}]}};var Oe={buttonConnectionTemplates:null,ulConnectionTemplates:null,inputConnectionTemplate:null,crudConnection:null,editorValidationConnection:null},et,Pn,xn,ht,Ni;function yf(){yo(Eo),ee(Oe),rn(Oe.ulConnectionTemplates,Object.keys(ea)),et=Ce("connectionEditor","ace/mode/json",!0),Pn=Ce("connectionIncomingScript","ace/mode/javascript",!0),xn=Ce("connectionOutgoingScript","ace/mode/javascript",!0),Oe.ulConnectionTemplates.addEventListener("click",GA),Pn.on("blur",vf(Pn,"incomingScript")),xn.on("blur",vf(xn,"outgoingScript")),et.on("input",HA),et.getSession().on("changeAnnotation",qA),Oe.crudConnection.addEventListener("onEditToggle",JA),Oe.crudConnection.addEventListener("onCreateClick",zA),Oe.crudConnection.addEventListener("onUpdateClick",BA),Oe.crudConnection.addEventListener("onDeleteClick",WA)}function vf(t,e){return()=>{if(!crudConnection.isEditing||Ni)return;let i=JSON.parse(et.getValue());n(i),i.mappingDefinitions.javascript.options[e]=t.getValue(),et.setValue(JSON.stringify(i,null,2),-1)};function n(i){i.mappingDefinitions||(i.mappingDefinitions={javascript:{mappingEngine:"JavaScript",options:{incomingScript:"",outgoingScript:""}}})}}function HA(){et.session.getUndoManager().isClean()||(Oe.inputConnectionTemplate.value=null,Oe.editorValidationConnection.classList.remove("is-invalid"))}function qA(){Ni=et.getSession().getAnnotations().filter(t=>t.type==="error").length>0,Pn.setReadOnly(Ni),xn.setReadOnly(Ni)}function BA(){D(!Ni,"Errors in connection json",Oe.editorValidationConnection),ht=JSON.parse(et.getValue()),ze("modifyConnection",()=>{Ii(),Oe.crudConnection.toggleEdit()},Oe.crudConnection.idValue,ht)}function WA(){Tn(`Are you sure you want to delete connection<br>'${ht.name}'?`,"Delete",()=>{ze("deleteConnection",()=>{ei(null),Ii()},Oe.crudConnection.idValue)})}function zA(){D(et.getValue()!=="","Please enter a connection configuration (select a template as a basis)",Oe.editorValidationConnection),D(!Ni,"Errors in connection json",Oe.editorValidationConnection);let t=JSON.parse(et.getValue());Jn()==="ditto_2"?t.id=Math.random().toString(36).replace("0.",""):delete t.id,ze("createConnection",e=>{ei(e,!0),Ii(),Oe.crudConnection.toggleEdit()},null,t)}function GA(t){Oe.inputConnectionTemplate.value=t.target.textContent;let e=JSON.parse(JSON.stringify(ea[Oe.inputConnectionTemplate.value]));Eo(e),Oe.editorValidationConnection.classList.remove("is-invalid"),et.session.getUndoManager().markClean()}function Eo(t){ht=t,Pn.setValue(""),xn.setValue(""),ht?(Oe.crudConnection.idValue=ht.id?ht.id:null,et.setValue(JSON.stringify(ht,null,2),-1),ht.mappingDefinitions&&ht.mappingDefinitions.javascript&&(Pn.setValue(ht.mappingDefinitions.javascript.options.incomingScript,-1),xn.setValue(ht.mappingDefinitions.javascript.options.outgoingScript,-1))):(Oe.crudConnection.idValue=null,et.setValue(""))}function JA(t){let e=t.detail.isEditing;Oe.buttonConnectionTemplates.disabled=!e,et.setReadOnly(!e),et.renderer.setShowGutter(e),Pn.setReadOnly(!e),Pn.renderer.setShowGutter(e),xn.setReadOnly(!e),xn.renderer.setShowGutter(e),e||(Oe.crudConnection.idValue&&Oe.crudConnection.idValue!==""?Eo(ht):Eo(null))}var ge={tbodyConnectionLogs:null,tbodyConnectionMetrics:null,buttonRetrieveConnectionStatus:null,buttonRetrieveConnectionLogs:null,buttonEnableConnectionLogs:null,buttonResetConnectionLogs:null,buttonRetrieveConnectionMetrics:null,buttonResetConnectionMetrics:null,tableValidationConnections:null},Tf,Tr,_o,mt;function wf(){yo(nS),ee(ge),Tr=Ce("connectionLogDetail","ace/mode/json",!0),_o=Ce("connectionStatusDetail","ace/mode/json",!0),ge.buttonRetrieveConnectionStatus.onclick=Ef,document.querySelector('a[data-bs-target="#tabConnectionStatus"]').onclick=Ef,ge.buttonEnableConnectionLogs.onclick=ZA,ge.buttonResetConnectionLogs.onclick=QA,ge.buttonRetrieveConnectionLogs.onclick=To,ge.tbodyConnectionLogs.addEventListener("click",XA),ge.buttonRetrieveConnectionMetrics.onclick=ta,document.querySelector('a[data-bs-target="#tabConnectionMetrics"]').onclick=ta,ge.buttonResetConnectionMetrics.onclick=YA}function YA(){D(mt,"Please select a connection",ge.tableValidationConnections),ze("connectionCommand",ta,mt,null,"connectivity.commands:resetConnectionMetrics")}function XA(t){Tr.setValue(JSON.stringify(Tf[t.target.parentNode.rowIndex-1],null,2),-1),Tr.session.getUndoManager().reset()}function QA(){D(mt,"Please select a connection",ge.tableValidationConnections),ze("connectionCommand",To,mt,null,"connectivity.commands:resetConnectionLogs")}function ZA(){D(mt,"Please select a connection",ge.tableValidationConnections),ze("connectionCommand",To,mt,null,"connectivity.commands:enableConnectionLogs")}function ta(){D(mt,"Please select a connection",ge.tableValidationConnections),ge.tbodyConnectionMetrics.innerHTML="",ze("retrieveConnectionMetrics",t=>{t.connectionMetrics&&Object.keys(t.connectionMetrics).forEach(e=>{t.connectionMetrics[e]&&Object.keys(t.connectionMetrics[e]).forEach(n=>{let i=t.connectionMetrics[e][n];we(ge.tbodyConnectionMetrics,e,!1,!1,n,"success",i.success.PT1M,i.success.PT1H,i.success.PT24H),we(ge.tbodyConnectionMetrics,e,!1,!1,n,"failure",i.failure.PT1M,i.failure.PT1H,i.failure.PT24H)})})},mt)}function Ef(){D(mt,"Please select a connection",ge.tableValidationConnections),ze("retrieveStatus",t=>{_o.setValue(JSON.stringify(t,null,2),-1),_o.session.getUndoManager().reset()},mt)}function To(){D(mt,"Please select a connection",ge.tableValidationConnections),ze("retrieveConnectionLogs",t=>{Tf=t.connectionLogs,tS(t),eS(t.connectionLogs)},mt)}var _f;function eS(t){ge.tbodyConnectionLogs.innerHTML="",Tr.setValue("");let e=_f?_f.match:n=>!0;t.filter(e).forEach(n=>{we(ge.tbodyConnectionLogs,er(n.timestamp,!0),!1,!1,n.type,n.level)}),ge.tbodyConnectionLogs.scrollTop=ge.tbodyConnectionLogs.scrollHeight-ge.tbodyConnectionLogs.clientHeight}function tS(t){t.enabledUntil?(ge.buttonEnableConnectionLogs.querySelector("i").classList.replace("bi-toggle-off","bi-toggle-on"),ge.buttonEnableConnectionLogs.setAttribute("title",`Enabled until ${er(t.enabledUntil)}`)):(ge.buttonEnableConnectionLogs.querySelector("i").classList.replace("bi-toggle-on","bi-toggle-off"),ge.buttonEnableConnectionLogs.setAttribute("title","Click to enable connection logs for the selected connection"))}function nS(t,e=!0){mt=t?t.id:null,_o.setValue(""),Tr.setValue(""),ge.tbodyConnectionMetrics.innerHTML="",ge.tbodyConnectionLogs.innerHTML="",!e&&t&&t.id&&To()}var Cf=`<!--
  ~ Copyright (c) 2023 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<h5>Ditto Services Logging</h5>
<hr />
<div class="input-group input-group-sm mt-1 mb-1" role="group">
    <div style="flex-grow: 1;"></div>
    <button class="btn btn-outline-primary btn-sm button_round_left" id="buttonLoadAllLogLevels">
        <i class="bi bi-arrow-clockwise"></i>
        Refresh
    </button>
</div>
<div class="row resizable_pane" style="height: 80vh">
    <div class="col-md-12 resizable_flex_column">
        <div id="divLoggers"></div>
        <template id="templateLogger">
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
                integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
            <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.3/font/bootstrap-icons.min.css"
                rel="stylesheet"
                integrity="sha512-YzwGgFdO1NQw1CZkPoGyRkEnUTxPSbGWXvGiXrWk8IeSqdyci0dEDYdLLjMxq1zCoU0QBa4kHAFiRhUL3z2bow=="
                crossorigin="anonymous" referrerpolicy="no-referrer" />
            <link href="./dist/main.css" rel="stylesheet" />
    
            <div class="input-group input-group-sm mb-1">
                <input class="form-control" type="text" disabled id="inputLogger" spellcheck="false"></input>
                <div class="btn-group" role="group">
                    <input type="radio" class="btn-check" id="debug" autocomplete="off">
                    <label class="btn btn-sm btn-outline-secondary" for="debug">DEBUG</label>
                    <input type="radio" class="btn-check" id="info" autocomplete="off">
                    <label class="btn btn-sm btn-outline-success" for="info">INFO</label>
                    <input type="radio" class="btn-check" id="warn" autocomplete="off">
                    <label class="btn btn-sm btn-outline-warning" for="warn">WARN</label>
                    <input type="radio" class="btn-check" id="error" autocomplete="off">
                    <label class="btn btn-sm btn-outline-danger" for="error">ERROR</label>
                </div>
            </div>
        </template>
    </div>
</div>`;var It={buttonLoadAllLogLevels:null,divLoggers:null,templateLogger:null,tabOperations:null,collapseOperations:null};document.getElementById("operationsHTML").innerHTML=Cf;function Sf(){return he(this,null,function*(){ee(It),new Cn(It.tabOperations,It.collapseOperations,na,"disableOperations"),It.buttonLoadAllLogLevels.onclick=na})}function Af(t,e){de("PUT","/devops/logging/"+t,e,null,!1,!0).then(()=>{na()})}function na(){de("GET","/devops/logging",null,null,!1,!0).then(t=>oS(t)).catch(t=>{It.divLoggers.innerHTML=""})}function oS(t){It.divLoggers.innerHTML="",Object.keys(t).sort().forEach((r,o)=>{e(r,o),Object.values(t[r])[0].loggerConfigs.forEach(s=>{n(r,s)}),i(r)});function e(r,o){let s=document.createElement("h6");s.innerText=r,o>0&&s.classList.add("mt-3"),It.divLoggers.append(s)}function n(r,o){let s=document.createElement("div");s.attachShadow({mode:"open"}),s.shadowRoot.append(It.templateLogger.content.cloneNode(!0)),s.shadowRoot.getElementById("inputLogger").value=o.logger,s.shadowRoot.getElementById(o.level).setAttribute("checked",""),Array.from(s.shadowRoot.querySelectorAll(".btn-check")).forEach(a=>{a.addEventListener("click",l=>Af(r,{logger:o.logger,level:l.target.id}))}),It.divLoggers.append(s)}function i(r){let o=document.createElement("div");o.attachShadow({mode:"open"}),o.shadowRoot.append(It.templateLogger.content.cloneNode(!0));let s=o.shadowRoot.getElementById("inputLogger");s.disabled=!1,s.placeholder="Add new logger name and choose log level",Array.from(o.shadowRoot.querySelectorAll(".btn-check")).forEach(a=>{a.addEventListener("click",l=>Af(r,{logger:s.value,level:l.target.id}))}),It.divLoggers.append(o)}}var ia={resources:{"thing:/":{grant:["READ","WRITE"],revoke:[]},"message:/":{grant:["READ","WRITE"],revoke:[]},"policy:/":{grant:["READ","WRITE"],revoke:[]}}};var Of=`<div>
    <h5>Overview</h5>
    <hr />
    <div class="row resizable_pane" style="height: 30vh;">
        <div class="col-md-6 resizable_flex_column">
            <h6>Load a policy</h6>
            <div class="input-group input-group-sm mb-1 mt-1 has-validation" role="group">
                <label class="input-group-text">PolicyId</label>
                <input type="text" class="form-control form-control-sm" id="inputPolicyId"></input>
                <button id="buttonLoadPolicy" class="btn btn-outline-secondary btn-sm"
                    title="Load policy with the given ID">
                    load
                </button>
                <div class="invalid-feedback"></div>
            </div>
        </div>
        <div class="col-md-6 resizable_flex_column">
            <h6>Who am I</h6>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyWhoami"></tbody>
                </table>
            </div>
        </div>
    </div>
    <h5>Policy Entries</h5>
    <hr />
    <div class="row resizable_pane" style="height: 50vh;">
        <div class="col-md-4 resizable_flex_column">
            <div class="input-group input-group-sm mb-1 mt-1 has-validation">
                <label class="input-group-text">Entry</label>
                <input type="text" class="form-control form-control-sm" id="inputPolicyEntry"></input>
                <button id="buttonCreatePolicyEntry" class="btn btn-outline-secondary btn-sm"
                    title="Create a policy entry with the given name">
                    <i class="bi bi-plus-circle"></i>
                </button>
                <button id="buttonDeletePolicyEntry" class="btn btn-outline-secondary btn-sm"
                    title="Delete the selected policy entry">
                    <i class="bi bi-trash3"></i>
                </button>
                <div class="invalid-feedback"></div>
            </div>
            <div class="input-group has-validation">
                <input class="form-control" id="tableValidationEntries" hidden="true"></input>
                <div class="invalid-feedback"></div>
            </div>
            <div class="table-wrap">
                <table class="table table-striped table-hover table-sm">
                    <tbody id="tbodyPolicyEntries"></tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 resizable_flex_column">
            <h6>Subjects</h6>
            <div class="row flex_column_part">
                <div class="col-md-6 resizable_flex_column">
                    <div class="input-group has-validation">
                        <input class="form-control" id="tableValidationSubjects" hidden="true"></input>
                        <div class="invalid-feedback"></div>
                    </div>
                    <div class="table-wrap">
                        <table class="table table-striped table-hover table-sm">
                            <tbody id="tbodyPolicySubjects"></tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-6 resizable_flex_column">
                    <div class="input-group input-group-sm mb-1 has-validation">
                        <label class="input-group-text">Subject</label>
                        <input type="text" class="form-control form-control-sm" id="inputSubjectId"></input>
                        <button class="btn btn-outline-secondary btn-sm" id="buttonCreatePolicySubject">
                            <i class="bi bi-plus-circle"></i>
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" id="buttonSavePolicySubject">
                            <i class="bi bi-save"></i>
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" id="buttonDeletePolicySubject">
                            <i class="bi bi-trash"></i>
                        </button>
                        <div class="invalid-feedback"></div>
                    </div>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div class="script_editor" id="subjectEditor"></div>
                    </div>        
                </div>
            </div>
            <h6>Resources</h6>
            <div class="row flex_column_part">
                <div class="col-md-6 resizable_flex_column">
                    <div class="input-group has-validation">
                        <input class="form-control" id="tableValidationResources" hidden="true"></input>
                        <div class="invalid-feedback"></div>
                    </div>
                    <div class="table-wrap">
                        <table class="table table-striped table-hover table-sm">
                            <tbody id="tbodyPolicyResources"></tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-6 resizable_flex_column">
                    <div class="input-group input-group-sm mb-1 has-validation">
                        <label class="input-group-text">Resource</label>
                        <div class="btn-group dropend">
                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                            data-bs-toggle="dropdown"></button>
                            <ul id="ulResourceTemplates" class="dropdown-menu" style="position: fixed; top: auto;"></ul>                                    
                        </div>
                        <input type="text" class="form-control form-control-sm" id="inputResourceId"></input>
                        <button class="btn btn-outline-secondary btn-sm" id="buttonCreatePolicyResource">
                            <i class="bi bi-plus-circle"></i>
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" id="buttonSavePolicyResource">
                            <i class="bi bi-save"></i>
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" id="buttonDeletePolicyResource">
                            <i class="bi bi-trash"></i>
                        </button>
                        <div class="invalid-feedback"></div>
                    </div>
                    <div class="ace_container" style="flex-grow: 1;">
                        <div class="script_editor" id="resourceEditor"></div>
                    </div>        
                </div>
            </div>
        </div>
    </div>
</div>`;var it,nt,We,tt,xf,_={inputPolicyId:null,inputPolicyEntry:null,inputSubjectId:null,inputResourceId:null,tbodyPolicyEntries:null,tbodyPolicySubjects:null,tbodyPolicyResources:null,tbodyWhoami:null,buttonLoadPolicy:null,buttonCreatePolicyEntry:null,buttonDeletePolicyEntry:null,buttonCreatePolicySubject:null,buttonDeletePolicySubject:null,buttonSavePolicySubject:null,buttonCreatePolicyResource:null,buttonDeletePolicyResource:null,buttonSavePolicyResource:null,tableValidationEntries:null,tableValidationSubjects:null,tableValidationResources:null,collapsePolicies:null,ulResourceTemplates:null,tabPolicies:null},Bt,Nt;document.getElementById("policyHTML").innerHTML=Of;function Lf(){ee(_),xf=new Cn(_.tabPolicies,_.collapsePolicies,dS,"disablePolicies"),rn(_.ulResourceTemplates,Object.keys(ia.resources)),kt(_.tbodyPolicyEntries,_.tableValidationEntries),kt(_.tbodyPolicySubjects,_.tableValidationSubjects),kt(_.tbodyPolicySubjects,_.tableValidationResources),Bt=Ce("subjectEditor","ace/mode/json"),Nt=Ce("resourceEditor","ace/mode/json"),_.buttonLoadPolicy.onclick=()=>{D(_.inputPolicyId.value,"Please enter a policyId",_.inputPolicyId),wo(_.inputPolicyId.value)},_.tbodyPolicyEntries.onclick=t=>{nt===t.target.textContent?(nt=null,tt=null,We=null,wi(tbodyWhoami,()=>!1),wr(null)):(nt=t.target.textContent,wr(it,nt))},_.buttonCreatePolicyEntry.onclick=()=>{Ln(!0),D(!Object.keys(it.entries).includes(_.inputPolicyEntry.value),`Entry with label ${_.inputPolicyEntry.value} already exists`,_.inputPolicyEntry),nt=_.inputPolicyEntry.value,Pf(_.inputPolicyEntry.value,{subjects:{},resources:{}})},_.buttonDeletePolicyEntry.onclick=()=>{Ln(!1,!0),Pf(nt)},_.tbodyPolicySubjects.onclick=t=>{We===t.target.parentNode.id?(We=null,wi(tbodyWhoami,()=>!1),Bt.setValue("")):(We=t.target.parentNode.id,wi(tbodyWhoami,e=>e.id===We),Bt.setValue(JSON.stringify(it.entries[nt].subjects[We],null,2),-1)),_.inputSubjectId.value=We},_.buttonCreatePolicySubject.onclick=()=>{Ln(!1,!0,!0),D(!Object.keys(it.entries[nt].subjects).includes(_.inputSubjectId.value),"Subject already exists",_.inputSubjectId),We=_.inputSubjectId.value,qt("/subjects/",_.inputSubjectId.value,Bt.getValue()!==""?JSON.parse(Bt.getValue()):{type:"generated"})},_.buttonSavePolicySubject.onclick=()=>{Ln(!1,!0,!1,!0),_.inputSubjectId.value===We?qt("/subjects/",We,JSON.parse(Bt.getValue())):(qt("/subjects/",We),We=_.inputSubjectId.value,qt("/subjects/",_.inputSubjectId.value,Bt.getValue()!==""?JSON.parse(Bt.getValue()):{type:"generated"}))},_.buttonDeletePolicySubject.onclick=()=>{Ln(!1,!0,!1,!0),qt("/subjects/",We)},_.tbodyPolicyResources.onclick=t=>{tt===t.target.parentNode.id?(tt=null,Nt.setValue("")):(tt=t.target.parentNode.id,Nt.setValue(JSON.stringify(it.entries[nt].resources[tt],null,2),-1)),_.inputResourceId.value=tt},_.buttonCreatePolicyResource.onclick=()=>{Ln(!1,!0,!1,!1,!0),D(!Object.keys(it.entries[nt].resources).includes(_.inputResourceId.value),"Resource already exists",_.inputResourceId),tt=_.inputResourceId.value,qt("/resources/",_.inputResourceId.value,Nt.getValue()!==""?JSON.parse(Nt.getValue()):{grant:["READ","WRITE"],revoke:[]})},_.buttonSavePolicyResource.onclick=()=>{Ln(!1,!0,!1,!1,!1,!0),_.inputResourceId.value===tt?qt("/resources/",tt,JSON.parse(Nt.getValue())):(qt("/resources/",tt),tt=_.inputResourceId.value,qt("/resources/",_.inputResourceId.value,Nt.getValue()!==""?JSON.parse(Nt.getValue()):{grant:["READ","WRITE"],revoke:[]}))},_.buttonDeletePolicyResource.onclick=()=>{Ln(!1,!0,!1,!1,!1,!0),qt("/resources/",tt)},_.ulResourceTemplates.addEventListener("click",t=>{_.inputResourceId.value=t.target.textContent,Nt.setValue(JSON.stringify(ia.resources[_.inputResourceId.value],0,2),-1)}),_.tbodyWhoami.onclick=t=>{_.inputSubjectId.value=t.target.parentNode.id},Ge(cS)}function Ln(t,e,n,i,r,o){D(it,"Please load a policy",_.inputPolicyId),t&&D(_.inputPolicyEntry.value,"Please enter a label for the entry",_.inputPolicyEntry),e&&D(nt,"Please select an entry",_.tableValidationEntries),n&&D(_.inputSubjectId.value,"Please enter a subject or select one above",_.inputSubjectId),i&&D(We,"Please select a subject",_.tableValidationSubjects),r&&D(_.inputResourceId.value,"Please enter a resource",_.inputResourceId),o&&D(tt,"Please select a resource",_.tableValidationResources)}function cS(t){_.inputPolicyId.value=t&&t.policyId?t.policyId:null,xf.viewDirty=!0}function uS(){_.tbodyWhoami.innerHTML="",de("GET","/whoami").then(t=>{t.subjects.forEach(e=>{we(_.tbodyWhoami,e,e===We,!1,e===t.defaultSubject?"default":"")})}).catch(t=>{})}function wo(t){de("GET","/policies/"+t).then(e=>ra(e)).catch(()=>ra())}function ra(t){if(it=t,_.tbodyPolicyEntries.innerHTML="",_.inputPolicyEntry.value=null,it){let e=!1;Object.keys(it.entries).forEach(n=>{we(_.tbodyPolicyEntries,n,n===nt),n===nt&&(_.inputPolicyEntry.value=n,wr(it,n),e=!0)}),e||(nt=null,wr(null))}else _.inputPolicyId.value=null,wr(null)}function wr(t,e){_.tbodyPolicySubjects.innerHTML="",_.tbodyPolicyResources.innerHTML="",_.inputSubjectId.value=null,_.inputResourceId.value=null,Bt.setValue(""),Nt.setValue(""),t&&(_.inputPolicyEntry.value=e,Object.keys(t.entries[e].subjects).forEach(n=>{we(_.tbodyPolicySubjects,n,n===We,!1,JSON.stringify(t.entries[e].subjects[n])),n===We&&(_.inputSubjectId.value=n,Bt.setValue(JSON.stringify(t.entries[e].subjects[n],null,2),-1))}),Object.keys(t.entries[e].resources).forEach(n=>{we(_.tbodyPolicyResources,n,n===tt,!1,JSON.stringify(t.entries[e].resources[n])),n===tt&&(_.inputResourceId.value=n,Nt.setValue(JSON.stringify(t.entries[e].resources[n],null,2),-1))}))}function Pf(t,e){de(e?"PUT":"DELETE",`/policies/${it.policyId}/entries/${t}`,e).then(()=>wo(it.policyId))}function qt(t,e,n){de(n?"PUT":"DELETE",`/policies/${it.policyId}/entries/${nt}${t}${e}`,n).then(()=>wo(it.policyId))}function dS(t){uS(),t&&ra(null),_.inputPolicyId.value&&wo(_.inputPolicyId.value)}var Df=`<!--
  ~ Copyright (c) 2022 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) distributed with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made available under the
  ~ terms of the Eclipse Public License 2.0 which is available at
  ~ http://www.eclipse.org/legal/epl-2.0
  ~
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<div class="tab-pane container fade no-margin">
    <div class="resizable_flex_column">
        <div class="ace_container" style="flex-grow: 1;">
            <div class="script_editor" id="aceDescription"></div>
        </div>
    </div>
</div>`;function oa(t,e){let n,i,r=!1,o=e,s;return{ready:()=>he(this,null,function*(){let m=Zr(document.getElementById(t.itemsId),document.getElementById(t.contentId),"WoT TD",Df,"Generated WoT Thing Description. This requires a valid reference to a WoT Thing Model in the "+(e?"Feature":"Thing")+" definition. The Ditto environment must have WoT support enabled.");n=document.querySelector(`a[data-bs-target="#${m}"]`),n.onclick=f;let E=Math.random().toString(36).replace("0.","");document.getElementById("aceDescription").id=E,i=Ce(E,"ace/mode/json",!0)}),onReferenceChanged:m=>{o&&(s=m),n&&n.classList.contains("active")?c():r=!0}};function f(){r&&(c(),r=!1)}function c(){let m=o?"/features/"+s:"";i.setValue(""),G&&(!o||s)&&de("GET","/things/"+G.thingId+m,null,{accept:"application/td+json"}).then(E=>{i.setValue(JSON.stringify(E,null,2),-1)}).catch()}}var If=`<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.3/font/bootstrap-icons.min.css" rel="stylesheet"
  integrity="sha512-YzwGgFdO1NQw1CZkPoGyRkEnUTxPSbGWXvGiXrWk8IeSqdyci0dEDYdLLjMxq1zCoU0QBa4kHAFiRhUL3z2bow=="
  crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="./dist/main.css" rel="stylesheet" />
<div class="resizable_flex_column px-1" id="divRoot">
  <div class="input-group input-group-sm mb-1 mt-1 has-validation">
    <label class="input-group-text" id="label">Default</label>
    <input type="text" class="form-control" disabled id="inputIdValue">
    <button class="btn btn-outline-primary btn-sm" id="buttonEdit" data-bs-toggle="tooltip" title="Edit">
      Edit
    </button>
    <button class="btn btn-outline-primary btn-sm" hidden id="buttonCreate" data-bs-toggle="tooltip" title="Create">
      Create
    </button>
    <button class="btn btn-outline-primary btn-sm" hidden id="buttonUpdate" data-bs-toggle="tooltip" title="Update">
      Update
    </button>
    <button class="btn btn-outline-secondary btn-sm" hidden id="buttonDelete" data-bs-toggle="tooltip" title="Delete">
      Delete
    </button>
    <button class="btn btn-outline-secondary btn-sm" hidden id="buttonCancel" data-bs-toggle="tooltip" title="Cancel">
      Cancel
    </button>
    <div class="invalid-feedback"></div>
  </div>
  <slot></slot>
</div>`;var sa=class extends HTMLElement{constructor(){super();ii(this,"isEditing",!1);ii(this,"isEditDisabled",!1);ii(this,"isCreateDisabled",!1);ii(this,"isDeleteDisabled",!1);ii(this,"dom",{label:null,inputIdValue:null,buttonEdit:null,buttonCreate:null,buttonUpdate:null,buttonDelete:null,buttonCancel:null,divRoot:null});this.attachShadow({mode:"open"})}get idValue(){return this.dom.inputIdValue.value}set idValue(n){this.shadowRoot.getElementById("inputIdValue").value=n;let i=this.shadowRoot.getElementById("buttonDelete");!this.isDeleteDisabled&&n&&n!==""?i.removeAttribute("hidden"):i.setAttribute("hidden","")}get editDisabled(){return this.isEditDisabled}set createDisabled(n){this.isCreateDisabled=n,this.setButtonState("buttonCreate",n)}set deleteDisabled(n){this.isDeleteDisabled=n,this.setButtonState("buttonDelete",n)}set editDisabled(n){this.isEditDisabled=n,this.isEditing||this.setButtonState("buttonEdit",n)}setButtonState(n,i){let r=this.shadowRoot.getElementById(n);i?r.setAttribute("hidden",""):r.removeAttribute("hidden")}get validationElement(){return this.dom.inputIdValue}connectedCallback(){this.shadowRoot.innerHTML=If,setTimeout(()=>{ee(this.dom,this.shadowRoot),this.dom.buttonEdit.onclick=()=>this.toggleEdit(!1),this.dom.buttonCancel.onclick=()=>this.toggleEdit(!0),this.dom.label.innerText=this.getAttribute("label")||"Label",this.dom.buttonCreate.onclick=this.eventDispatcher("onCreateClick"),this.dom.buttonUpdate.onclick=this.eventDispatcher("onUpdateClick"),this.dom.buttonDelete.onclick=this.eventDispatcher("onDeleteClick")})}eventDispatcher(n){return()=>{this.dispatchEvent(new CustomEvent(n,{composed:!0}))}}toggleEdit(n){this.isEditing=!this.isEditing,document.getElementById("modalCrudEdit").classList.toggle("editBackground"),this.dom.divRoot.classList.toggle("editForground"),this.isEditing||this.isEditDisabled?this.dom.buttonEdit.setAttribute("hidden",""):this.dom.buttonEdit.removeAttribute("hidden"),this.dom.buttonCancel.toggleAttribute("hidden"),this.isEditing?this.dom.inputIdValue.value?this.dom.buttonUpdate.toggleAttribute("hidden"):this.isCreateDisabled||this.dom.buttonCreate.toggleAttribute("hidden"):(this.dom.buttonCreate.setAttribute("hidden",""),this.dom.buttonUpdate.setAttribute("hidden","")),(this.isEditing||!this.dom.inputIdValue.value)&&this.dom.buttonDelete.setAttribute("hidden","");let i=this.isEditing&&(!this.dom.inputIdValue.value||this.hasAttribute("allowIdChange"));this.dom.inputIdValue.disabled=!i,this.dispatchEvent(new CustomEvent("onEditToggle",{composed:!0,detail:{isEditing:this.isEditing,isCancel:n}}))}};customElements.define("crud-toolbar",sa);var aa=!1,la;document.addEventListener("DOMContentLoaded",function(){return he(this,null,function*(){Nl(),yield Wp(),Vp(),uf(),kp(),ff(),Gp(),yield sc(),yield af(),Xp(),yield ef(),Lf(),bf(),yf(),wf(),Sf(),Ql(),yield zl();let t=oa({itemsId:"tabItemsThing",contentId:"tabContentThing"},!1);Ge(t.onReferenceChanged),t.ready();let e=oa({itemsId:"tabItemsFeatures",contentId:"tabContentFeatures"},!0);go(e.onReferenceChanged),e.ready(),new ot(document.querySelector(".dropdown-toggle"),{popperConfig:{strategy:"fixed"}}),la=document.getElementById("mainNavbar"),la.querySelectorAll(".nav-link").forEach(o=>{o.addEventListener("click",s=>{la.querySelectorAll(".nav-link,.active").forEach(a=>a.classList.remove("active")),s.currentTarget.classList.add("active")})}),document.querySelectorAll(".table").forEach(o=>{o.addEventListener("click",s=>{s.target&&s.target.tagName==="TD"&&(Array.from(s.target.parentNode.parentNode.children).forEach(a=>{a!==s.target.parentNode&&a.classList.remove("table-active")}),s.target.parentNode.classList.toggle("table-active"))})});let n=new ResizeObserver(()=>{aa=!0});document.querySelectorAll(".resizable_pane").forEach(o=>{n.observe(o),o.addEventListener("mouseup",()=>{aa&&(window.dispatchEvent(new Event("resize")),aa=!1)})});let{get:i,set:r}=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");document.querySelectorAll("input").forEach(o=>{o.addEventListener("change",s=>{s.target.classList.remove("is-invalid")}),Object.defineProperty(o,"value",{get(){return i.call(this)},set(s){return o.classList.remove("is-invalid"),r.call(this,s)}})})})});})();
/*! Bundled license information:

event-source-polyfill/src/eventsource.js:
  (** @license
   * eventsource.js
   * Available under MIT License (MIT)
   * https://github.com/Yaffle/EventSource/
   *)

bootstrap/dist/js/bootstrap.esm.js:
  (*!
    * Bootstrap v5.2.3 (https://getbootstrap.com/)
    * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)
*/
